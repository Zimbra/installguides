<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6">
<meta name="author" content="v8.8.3, 2017-09-07">
<title>Zimbra Collaboration Multi-Server Installation Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Zimbra Collaboration Multi-Server Installation Guide</h1>
<div class="details">
<span id="author" class="author">v8.8.3, 2017-09-07</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_license">License</a></li>
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#Audience">Audience</a></li>
<li><a href="#Intro_license">Zimbra Collaboration License</a></li>
<li><a href="#For_More_Information">For More Information</a></li>
<li><a href="#Support_and_Contact_Information">Support and Contact Information</a></li>
</ul>
</li>
<li><a href="#planning">Planning for the Installation</a>
<ul class="sectlevel2">
<li><a href="#Zimbra_Application_Packages">Zimbra Application Packages</a></li>
<li><a href="#_configuration_examples">Configuration Examples</a></li>
<li><a href="#_downloading_the_zimbra_software">Downloading the Zimbra Software</a></li>
<li><a href="#Zimbra_Licenses">Zimbra Licensing (Network Edition Only)</a>
<ul class="sectlevel3">
<li><a href="#Zimbra_License_Requirements">Zimbra License Requirements</a></li>
<li><a href="#License_Usage_by_Zimbra_Collaboration_Account_Type">License Usage by Zimbra Collaboration Account Type</a></li>
<li><a href="#License_Activation">License Activation</a></li>
<li><a href="#Automatic_License_Activation">Automatic License Activation</a></li>
<li><a href="#Manual_License_Activation">Manual License Activation</a></li>
<li><a href="#License_Not_Installed_or_Activated">License Not Installed or Activated</a></li>
<li><a href="#Obtaining_a_License">Obtaining a License</a></li>
<li><a href="#Menu_Driven_Configuration">Menu-Driven Configuration</a>
<ul class="sectlevel4">
<li><a href="#main_menu_options">Main Menu options</a></li>
<li><a href="#common_config_options">Common Configuration Options</a></li>
<li><a href="#ldap_config">Ldap configuration</a></li>
<li><a href="#zimbra_logger">Zimbra Logger</a></li>
<li><a href="#mta_config">MTA Server Configuration Options</a></li>
<li><a href="#dns_cache">DNS Cache</a></li>
<li><a href="#snmp_config">Snmp configuration</a></li>
<li><a href="#store_config">Store configuration</a></li>
<li><a href="#proxy_config">Proxy configuration</a></li>
<li><a href="#imapd_config">IMAPD configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Scanning_Attachments_in_Outgoing_Mail">Scanning Attachments in Outgoing Mail</a></li>
<li><a href="#_overview_of_the_zimbra_proxy_server">Overview of the Zimbra Proxy Server</a>
<ul class="sectlevel3">
<li><a href="#_zimbra_proxy_components_and_memcached">Zimbra Proxy Components and Memcached</a></li>
<li><a href="#_zimbra_proxy_architecture_and_flow">Zimbra Proxy Architecture and Flow</a></li>
<li><a href="#_zimbra_proxy_position_in_zimbra_collaboration_runtime">Zimbra Proxy Position in Zimbra Collaboration Runtime</a></li>
<li><a href="#_deployment_strategy">Deployment Strategy</a></li>
<li><a href="#_configuration_during_installation">Configuration during installation</a></li>
<li><a href="#_zimbra_proxy_ports">Zimbra Proxy Ports</a></li>
</ul>
</li>
<li><a href="#_configuring_for_virtual_hosting">Configuring for Virtual Hosting</a></li>
</ul>
</li>
<li><a href="#Installation_Prerequisites">Preparing Your Server Environment</a>
<ul class="sectlevel2">
<li><a href="#_system_requirements">System Requirements</a></li>
<li><a href="#Modifying_Operating_System_Configurations">Modifying Operating System Configurations</a></li>
<li><a href="#Configuring_High-Fidelity_Document_Preview">Configuring High-Fidelity Document Preview (Network Edition Only)</a>
<ul class="sectlevel3">
<li><a href="#Install_Language_and_Font_Packages">Install Language and Font Packages</a></li>
</ul>
</li>
<li><a href="#DNS_Configuration_Requirement">DNS Configuration Requirement</a></li>
</ul>
</li>
<li><a href="#multiple_server_install">Multiple-Server Installation</a>
<ul class="sectlevel2">
<li><a href="#starting_multiple_server_install">Starting the Installation Process</a></li>
<li><a href="#install_ldap_master">Installing Zimbra LDAP Master Server</a></li>
<li><a href="#install_mailbox">Installing the Zimbra Mailbox Server</a>
<ul class="sectlevel3">
<li><a href="#_install_zimbra_mailbox_services">Install Zimbra Mailbox Services</a></li>
</ul>
</li>
<li><a href="#_installing_zimbra_mta_on_a_server">Installing Zimbra MTA on a Server</a></li>
<li><a href="#_installing_zimbra_proxy">Installing Zimbra Proxy</a>
<ul class="sectlevel3">
<li><a href="#_installing_on_the_mta_server">Installing on the MTA Server</a></li>
<li><a href="#_installing_on_a_separate_server">Installing on a separate server</a></li>
</ul>
</li>
<li><a href="#_installing_zimbra_imapd">Installing Zimbra IMAPD</a>
<ul class="sectlevel3">
<li><a href="#_installing_on_the_mailbox_server">Installing on the Mailbox Server</a></li>
<li><a href="#_installing_on_a_separate_server_2">Installing on a separate server</a></li>
</ul>
</li>
<li><a href="#_installing_zimbra_archiving_package">Installing zimbra-archiving Package</a></li>
<li><a href="#_installing_the_zimbra_snmp_package">Installing the zimbra-SNMP Package</a></li>
<li><a href="#_final_set_up">Final Set-Up</a>
<ul class="sectlevel3">
<li><a href="#_set_up_the_ssh_keys">Set Up the SSH Keys</a></li>
<li><a href="#_enabling_server_statistics_display">Enabling Server Statistics Display</a></li>
<li><a href="#_spam_ham_training_on_mta_servers">Spam/Ham Training on MTA servers</a></li>
</ul>
</li>
<li><a href="#_verifying_server_configuration">Verifying Server Configuration</a></li>
<li><a href="#_logging_on_to_the_administration_console">Logging on to the Administration Console</a></li>
<li><a href="#_post_installation_tasks">Post Installation Tasks</a>
<ul class="sectlevel3">
<li><a href="#_defining_classes_of_service">Defining Classes of Service</a></li>
<li><a href="#_provisioning_accounts">Provisioning Accounts</a>
<ul class="sectlevel4">
<li><a href="#_configuring_one_account">Configuring One Account</a></li>
<li><a href="#_configuring_many_accounts_at_once">Configuring Many Accounts at Once</a></li>
<li><a href="#_import_the_content_of_users_mailboxes">Import the Content of Users’ Mailboxes</a></li>
</ul>
</li>
<li><a href="#_ephemeral_data_migration">Ephemeral Data Migration</a></li>
</ul>
</li>
<li><a href="#_uninstalling_zimbra_collaboration">Uninstalling Zimbra Collaboration</a></li>
</ul>
</li>
<li><a href="#multi-server-adding-mailbox">Adding a Mailbox Server to a Single Server Configuration</a>
<ul class="sectlevel2">
<li><a href="#_setup_requirements_for_adding_a_mailbox_server">Setup Requirements For Adding a Mailbox Server</a></li>
<li><a href="#_overview_of_process">Overview of Process</a></li>
<li><a href="#_configuring_the_mailbox_server">Configuring the Mailbox Server</a></li>
<li><a href="#_adding_customized_features">Adding Customized Features</a></li>
<li><a href="#_testing_the_configuration">Testing the Configuration</a></li>
<li><a href="#_move_mailboxes">Move Mailboxes</a>
<ul class="sectlevel3">
<li><a href="#_move_mailboxes_using_cli_zmmboxmove">Move Mailboxes Using CLI zmmboxmove</a></li>
</ul>
</li>
<li><a href="#_turn_off_mailbox_server_on_single_server_node">Turn Off Mailbox Server on Single-Server Node</a></li>
</ul>
</li>
<li><a href="#multi-master-replication">Configuring Multi-Master Replication</a>
<ul class="sectlevel2">
<li><a href="#_managing_multiple_master_ldap_servers">Managing Multiple Master LDAP Servers</a></li>
<li><a href="#_installing_a_secondary_master_ldap_server">Installing a Secondary Master LDAP Server</a>
<ul class="sectlevel3">
<li><a href="#_passwords_required_to_install_the_secondary_master">Passwords Required to Install the Secondary Master</a></li>
<li><a href="#_setting_up_a_secondary_master_ldap_server">Setting Up a Secondary Master LDAP Server</a></li>
</ul>
</li>
<li><a href="#_promote_existing_replicas_to_multi_master_ldap_servers">Promote Existing Replicas to Multi-Master LDAP Servers</a></li>
<li><a href="#_deleting_a_multi_master_replication_node">Deleting a Multi-Master Replication Node</a>
<ul class="sectlevel3">
<li><a href="#_example_of_deleting_an_mmr_node">Example of Deleting an MMR Node</a></li>
</ul>
</li>
<li><a href="#_monitoring_multiple_ldap_master_status">Monitoring Multiple LDAP Master Status</a>
<ul class="sectlevel3">
<li><a href="#_feature_requirement">Feature Requirement</a></li>
<li><a href="#_error_codes_and_status_explanations">Error Codes and Status Explanations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldap-replication">Configuring LDAP Replication</a>
<ul class="sectlevel2">
<li><a href="#_configuring_ldap_replication_overview">Configuring LDAP Replication Overview</a></li>
<li><a href="#_installing_zimbra_master_ldap_server">Installing Zimbra Master LDAP Server</a></li>
<li><a href="#_enable_replication_on_the_ldap_master">Enable Replication on the LDAP Master</a></li>
<li><a href="#_installing_a_replica_ldap_server">Installing a Replica LDAP Server</a>
<ul class="sectlevel3">
<li><a href="#_test_the_replica">Test the Replica</a></li>
</ul>
</li>
<li><a href="#_configuring_zimbra_servers_to_use_ldap_replica">Configuring Zimbra Servers to Use LDAP Replica</a></li>
<li><a href="#_uninstalling_an_ldap_replica_server">Uninstalling an LDAP Replica Server</a>
<ul class="sectlevel3">
<li><a href="#_remove_ldap_replica_from_all_active_servers">Remove LDAP Replica from All Active Servers</a></li>
<li><a href="#_disable_ldap_on_the_replica">Disable LDAP on the Replica</a></li>
</ul>
</li>
<li><a href="#_monitoring_ldap_replication_status">Monitoring LDAP Replication Status</a>
<ul class="sectlevel3">
<li><a href="#_feature_requirement_2">Feature Requirement</a></li>
<li><a href="#_error_codes_and_status_explanations_2">Error Codes and Status Explanations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#System_Requirements">System Requirements for Zimbra Collaboration</a>
<ul class="sectlevel2">
<li><a href="#Zimbra_Connector_for_Outlook">Zimbra Connector for Outlook (Network Edition Only)</a></li>
<li><a href="#Zimbra_Mobile">Zimbra Mobile (Network Edition Only)</a></li>
<li><a href="#Zimbra_Touch_Client"><strong>Deprecated</strong> Zimbra Touch Client (Network Edition Only)</a></li>
<li><a href="#BES"><strong>Deprecated</strong> Zimbra Connector for BlackBerry Enterprise Server (Network Edition Only)</a></li>
<li><a href="#Available_Languages">Available Languages</a>
<ul class="sectlevel3">
<li><a href="#end_user_translations">End User Translations</a></li>
<li><a href="#admin_translations">Administrator Translations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Zimbra-Network-NG-Modules-first-steps-guide">Zimbra Network NG Modules: First Steps</a>
<ul class="sectlevel2">
<li><a href="#backup-ng">Switching to Backup NG</a>
<ul class="sectlevel3">
<li><a href="#backup-path-limitations">Backup Path Limitations</a></li>
<li><a href="#backup-ng-initialisation">Backup NG Initialization</a></li>
</ul>
</li>
<li><a href="#mobile-ng">Switching to Mobile NG</a>
<ul class="sectlevel3">
<li><a href="#what-happens-after-the-switch">What happens after the switch</a></li>
<li><a href="#mobile-ng-initialisation">Mobile NG Initialization</a></li>
</ul>
</li>
<li><a href="#hsm-ng">Switching to HSM NG</a></li>
<li><a href="#admin-ng">Switching to Admin NG</a>
<ul class="sectlevel3">
<li><a href="#admin-ng-initialisation">Admin NG Initialization</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="CC BY-SA"></span> Synacor, Inc., 2016-2017</p>
</div>
<div class="paragraph">
<p>&#169; 2016-2017 by Synacor, Inc. Zimbra Collaboration Multi-Server Installation Guide</p>
</div>
<div class="paragraph">
<p>This work is licensed under the Creative Commons Attribution-ShareAlike 4.0
International License unless another license agreement between you and
Synacor, Inc. provides otherwise. To view a copy of this license, visit
<a href="http://creativecommons.org/licenses/by-sa/4.0" class="bare">http://creativecommons.org/licenses/by-sa/4.0</a> or send a letter to Creative
Commons, PO Box 1866, Mountain View, CA 94042, USA.</p>
</div>
<div class="paragraph">
<p>Synacor, Inc., 2016<br>
40 La Riviere Drive, Suite 300<br>
Buffalo, New York 14202</p>
</div>
<div class="paragraph">
<p><a href="http://www.synacor.com" class="bare">http://www.synacor.com</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Information in this guide is intended for persons responsible for
installing Zimbra Collaboration. This guide will help you plan and
perform all installation procedures necessary to deploy a fully
functioning email system based on Zimbra’s messaging technology.</p>
</div>
<div class="paragraph">
<p>This guide covers the installation of
Zimbra Collaboration Network Edition 8.8.3.</p>
</div>
<div class="sect2">
<h3 id="Audience">Audience</h3>
<div class="paragraph">
<p>This installation guide assumes you have a thorough understanding of
system administration concepts and tasks and are familiar with email
communication standards, security concepts, directory services, and
database management.</p>
</div>
</div>
<div class="sect2">
<h3 id="Intro_license">Zimbra Collaboration License</h3>
<div class="paragraph">
<p>A Zimbra license is required in order to create accounts in
Zimbra Collaboration Network Edition. You cannot install Zimbra Collaboration
Network Edition without a license. For more information about licenses,
see <a href="#Zimbra_License_Requirements">Zimbra License Requirements</a></p>
</div>
<div class="paragraph">
<p>If you do not have a license, go to Zimbra’s website
<a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a> to obtain a license from the Network Downloads area.</p>
</div>
</div>
<div class="sect2">
<h3 id="For_More_Information">For More Information</h3>
<div class="paragraph">
<p>Zimbra documentation, including a readme text file, the administrator
guide, and other Zimbra guides are copied to the servers during the
installation. The major documentation types are listed below.
You can access all the documents on the Zimbra website,
<a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a> and from the administration console, Help Desk page.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Administrator Guide</strong>. This guide describes product architecture,
server functionality, administration tasks, configuration options,
and backup and restore procedures.</p>
</li>
<li>
<p><strong>Administrator Help</strong>. The administrator Help provides instructions
about how to add and maintain your servers, domains, and user
accounts from the admin console.</p>
</li>
<li>
<p><strong>Web Client Help</strong>. The Web Client Help provides instructions about
how to use the Zimbra Web Client features.</p>
</li>
<li>
<p><strong>Migration Wizard Guides</strong>. These guides describe how to migrate
users that are on Microsoft Exchange or Lotus Domino systems to
the Zimbra Collaboration.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Support_and_Contact_Information">Support and Contact Information</h3>
<div class="paragraph">
<p>Visit <a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a> to join the community and to be a part of
building the best open source messaging solution.  We appreciate your
feedback and suggestions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Contact Zimbra Sales to purchase Zimbra Collaboration.</p>
</li>
<li>
<p>Network Edition customers can contact support at
<strong>support@zimbra.com</strong>.</p>
</li>
<li>
<p>Explore the <a href="https://forums.zimbra.org/">Zimbra Forums</a> for answers to
installation or configuration problems.</p>
</li>
<li>
<p>Join the Zimbra Community Forum, to participate and learn more about
Zimbra Collaboration.</p>
</li>
<li>
<p>Send an email to <strong>feedback@zimbra.com</strong> to let us know what you like
about the product and what you would like to see in the product.
If you prefer, post your ideas to the Zimbra Forum.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you encounter problems with this software, visit
<a href="https://bugzilla.zimbra.com" class="bare">https://bugzilla.zimbra.com</a> and submit a bug report.
Make sure you provide enough detail so that the bug can be easily duplicated.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="planning">Planning for the Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the components that are installed and reviews the
configuration options that can be made when you install
Zimbra Collaboration (ZCS).</p>
</div>
<div class="sect2">
<h3 id="Zimbra_Application_Packages">Zimbra Application Packages</h3>
<div class="paragraph">
<p>Zimbra architecture includes open-source integrations using industry
standard protocols. The third-party software has been tested and
configured to work with the Zimbra software.</p>
</div>
<div class="paragraph">
<p>The following describes the Zimbra Collaboration application packages that are
installed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Zimbra Core:</strong> This package includes the libraries, utilities,
monitoring tools, and basic configuration files. Zimbra Core is
automatically installed on each server.</p>
</li>
<li>
<p><strong>Zimbra LDAP:</strong> User authentication is provided through <code>OpenLDAP®</code>
software. Each account on the Zimbra server has a unique mailbox ID that
is the primary point of reference to identify the account. The OpenLDAP
schema has been customized for Zimbra Collaboration.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Zimbra LDAP server must be configured before any other servers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can set up LDAP replication, configuring a master LDAP server and
replica LDAP servers.</p>
</div>
</li>
<li>
<p><strong>Zimbra Store:</strong> This package includes the components for the
<strong>mailbox server</strong>, including <strong>Jetty</strong>, which is the servlet container the
Zimbra software runs within. The Zimbra <strong>mailbox server</strong> includes the
following components:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Data store:</strong> The data store is a <code>MariaDB©</code> database.</p>
</li>
<li>
<p><strong>Message store:</strong> The message store is where all email messages and
file attachments reside.</p>
</li>
<li>
<p><strong>Index store:</strong>  Index and search technology is provided through <code>Lucene</code>.
Index files are maintained for each mailbox.</p>
</li>
<li>
<p><strong>Web application services:</strong> The <code>Jetty</code> web application server runs
web applications (webapps) on any store server. It provides one or more
web application services.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Zimbra MTA:</strong> <code>Postfix</code> is the open source mail transfer agent (MTA)
that receives email via SMTP and routes each message to the appropriate
Zimbra mailbox server using Local Mail Transfer Protocol (LMTP). The
Zimbra MTA also includes <strong>anti-virus</strong> and <strong>anti-spam</strong> components.</p>
</li>
<li>
<p><strong>Zimbra Proxy:</strong> Zimbra Proxy is a high-performance reverse proxy
service for passing IMAP[S]/POP[S]/HTTP[S] client requests to other
internal Zimbra Collaboration services using <code>nginx</code>.  This package is normally
installed on the MTA server(s) or on its own independent server(s). When
the <strong>zimbra-proxy</strong> package is installed, the proxy feature is enabled by
default.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Installing the Zimbra Proxy is required as of
ZCS 8.7.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Zimbra Memcached:</strong> This package is automatically selected when the
<strong>Zimbra-Proxy</strong> package is installed and provides access to <code>Memcached</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
At least one server must run <strong>zimbra-memcached</strong> when the Zimbra Proxy
service is in use.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use a single memcached server with one or more Zimbra proxies.</p>
</div>
</li>
<li>
<p><strong>Zimbra SNMP:</strong> Installing this package is optional.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you choose to install <strong>Zimbra-SNMP</strong> for monitoring, this package
should be installed on every Zimbra server.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Zimbra Logger:</strong> Installing this package is optional. It
is installed on one mailbox server. It provides tools for <code>syslog</code>
aggregation and reporting.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If you do not install <strong>Zimbra Logger</strong>, the server statistics section of
the administration console will not display.</p>
</li>
<li>
<p>The <strong>Zimbra Logger</strong> package must be installed at the same time as the
<strong>Zimbra Store</strong> package.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Zimbra Spell:</strong> This package is optional.  It provides the open source
spell checker <code>Aspell</code> used by the Zimbra Web Client.</p>
</li>
<li>
<p><strong>Zimbra Apache:</strong> This package is installed automatically when <strong>Zimbra
Spell</strong>
or <strong>Zimbra Convertd</strong>
is installed.</p>
</li>
<li>
<p><strong>Zimbra Convertd:</strong> This package should be installed on at least one
<strong>Zimbra-Store</strong> server. Only one <strong>Zimbra-Convertd</strong> package needs to be
present in the Zimbra Collaboration environment. The default is to install one
<strong>Zimbra-Convertd</strong> on each <strong>Zimbra-Store</strong> server.</p>
</li>
<li>
<p><strong>Zimbra Archiving:</strong> The Zimbra Archiving and Discovery feature is an
optional feature for Zimbra Collaboration <strong>Network Edition</strong>.<br>
Archiving and Discovery offers the ability to store and search all messages
that were delivered to or sent by Zimbra Collaboration.<br>
This package includes the <strong>cross mailbox search</strong> function which can be
used for both live and archive mailbox searches.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Using Archiving and Discovery can trigger additional mailbox
license usage. To find out more about Zimbra Archiving and Discovery,
contact Zimbra sales.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Zimbra Chat:</strong> Installing this package is optional. This package should be installed on at least one
<strong>Zimbra-Store</strong> server. Zimbra Chat includes a server extension with all
the necessary modules to run an embedded XMPP Server, and an End-User Zimlet which connects
to the server extension and offer to the users a rich point-to-point text-chat conversations.
Zimbra Chat is marked as GA and supported starting Zimbra Collaboration 8.8.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Zimbra Chat package must be selected and installed on every <strong>Zimbra-Store</strong>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Zimbra Drive:</strong> Installing this package is optional.This package should be installed on at least one
<strong>Zimbra-Store</strong> server. *Zimbra Drive includes a server extension with all
the necessary modules to connect and authenticate *Zimbra Users against a ownCloud or
NextCloud Server, and an End-User Zimlet which allow users to perform actions to the their docu-
ments stored on ownCloud or Nextcloud.
Zimbra Drive is marked as GA and supported starting Zimbra Collaboration 8.8.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Zimbra Drive package must be selected and installed on every <strong>Zimbra-Store</strong>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Zimbra Drive provides only a connectivity to a ownCloud or NextCloud Server. And is the Customer
responsibility to maintain, backup, and protect the data stored on this ownCloud or NextCloud Servers.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Zimbra server configuration is menu driven. The installation menu
shows you the default configuration values. The menu displays the
logical host name and email domain name [mailhost.example.com] as
configured on the computer. You can change any of the values. For single
server installs, you must define the administrator’s password, which you
use to log on to the administration console, and you specify the
location of the Zimbra license xml file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_examples">Configuration Examples</h3>
<div class="paragraph">
<p>Zimbra Collaboration can be easily scaled for any size of email environment, from very
small businesses with fewer than 25 email accounts to large businesses
with thousands of email accounts. Contact Zimbra Sales for more
information about setting up your environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="_downloading_the_zimbra_software">Downloading the Zimbra Software</h3>
<div class="paragraph">
<p>For the latest Zimbra Collaboration software download, go to
<a href="https://www.zimbra.com/downloads/" class="bare">https://www.zimbra.com/downloads/</a>.
Save the Zimbra Collaboration download file to the computer from which you will
install the software.</p>
</div>
<div class="paragraph">
<p>When Zimbra Collaboration is installed, the following Zimbra
applications are saved to the Zimbra server.</p>
</div>
<div class="paragraph">
<p>You can access these download files from your Administration Console<br>
<strong>Tools and Migration &gt; Download</strong> page.</p>
</div>
<div class="paragraph">
<p>Instruction guides are available from the Help Center page or from
<a href="https://www.zimbra.com/support/" class="bare">https://www.zimbra.com/support/</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Zimbra_Licenses">Zimbra Licensing (Network Edition Only)</h3>
<div class="paragraph">
<p>Zimbra Collaboration licensing gives administrators better visibility
and control into the licensed features they plan to deploy. The
following is a summary of the feature attributes of a Zimbra Collaboration
Network Edition license.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Accounts limit.</strong> The maximum number of accounts you can create and
the number of accounts created are shown.</p>
</li>
<li>
<p><strong>Mobile accounts limit.</strong> The maximum number of accounts that can have
the native mail mobile feature enabled.</p>
</li>
<li>
<p><strong>Touch Client accounts limit</strong>. The maximum number of accounts that
can have the touch client mobile feature enabled.</p>
</li>
<li>
<p><strong>MAPI accounts limit</strong>. The maximum number of accounts that can use
Zimbra Connector for Microsoft Outlook (ZCO).</p>
</li>
<li>
<p><strong>Exchange Web Services (EWS) accounts limit.</strong> The maximum number of
accounts that can use EWS for connecting to an Exchange server.
EWS is a separately licensed add-on feature.</p>
</li>
<li>
<p><strong>High-Fidelity Document Preview:</strong> The maximum number of accounts that
can use the High-Fidelity document preview facility. LibreOffice must be
installed.</p>
</li>
<li>
<p><strong>Archiving Accounts limit.</strong> The maximum number of archive accounts
that can be created. The archive feature must be installed.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="Zimbra_License_Requirements">Zimbra License Requirements</h4>
<div class="paragraph">
<p>A Zimbra license is required in order to create accounts in
the Network Edition of Zimbra Collaboration.</p>
</div>
<div class="paragraph">
<p>Several types of licenses are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Trial</strong>.  You can obtain a free Trial license from the Zimbra website,
at <a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a>. The trial license allows you to create up to
50 users. It expires in 60 days.</p>
</li>
<li>
<p><strong>Trial Extended.</strong>  You can obtain a Trial Extended license from Zimbra
Sales by contacting <a href="mailto:sales@zimbra.com">sales@zimbra.com</a> or calling 1-972-407-0688. This
license allows you to create up to 50 users and is valid for an extended
period of time.</p>
</li>
<li>
<p><strong>Subscription.</strong>  You must purchase the Zimbra Subscription license. This
license is valid for a specific Zimbra Collaboration system and is
encrypted with the number of Zimbra accounts (seats) you have purchased,
the effective date, and expiration date of the subscription license.</p>
</li>
<li>
<p><strong>Perpetual.</strong>  You must purchase the Zimbra Perpetual license. This
license is similar to a subscription license and is valid for a specific
Zimbra Collaboration system, is encrypted with the number of Zimbra
accounts (seats) you have purchased, the effective date, and an
expiration date of 2099-12-31. When you renew your support agreement, no
new perpetual license is sent to you, but your Account records in the
systems is updated with your new support end date.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="License_Usage_by_Zimbra_Collaboration_Account_Type">License Usage by Zimbra Collaboration Account Type</h4>
<div class="paragraph">
<p>A mailbox license is required for an account assigned to a person,
including accounts created for archiving. Distribution lists, aliases,
locations and resources do not count against the license.</p>
</div>
<div class="paragraph">
<p>Below is a description of types of Zimbra Collaboration accounts and if they
impact your license limit.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>System accounts.</strong> System accounts are specific accounts used by
Zimbra Collaboration. They include the spam filter accounts for junk mail
(spam and ham), virus quarantine account for email messages with
viruses, and GALsync account if you configure GAL for your domain. <strong>Do
not delete these accounts!</strong> These accounts do not count against your
license.</p>
</li>
<li>
<p><strong>Administrator account.</strong>  Administrator accounts count against your license.</p>
</li>
<li>
<p><strong>User accounts.</strong>  User accounts count against your license account limit.<br>
When you delete an account, the license account limit reflects the change.</p>
</li>
<li>
<p><strong>Alias account.</strong>  Aliases do not count against your license.</p>
</li>
<li>
<p><strong>Distribution list.</strong>  Distribution lists do not count against your license.</p>
</li>
<li>
<p><strong>Resource account.</strong>  Resource accounts (location and resources) do not
count against your Zimbra Collaboration license.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="License_Activation">License Activation</h4>
<div class="paragraph">
<p>All Network Edition installations require license activation. New
installations have a 10 day grace period from the license issue date
before requiring activation. Your license can be activated from the
administration console by selecting<br>
<strong>Configure&gt;Global Settings&gt;License</strong><br>
then clicking <strong>Activate License</strong> in the toolbar. You can also
activate your license from the command line interface.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Upgraded Zimbra Collaboration versions require an immediate activation of a
valid license to maintain network feature functionality.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Automatic_License_Activation">Automatic License Activation</h4>
<div class="paragraph">
<p>Licenses are automatically activated if the Zimbra Collaboration server
has a connection to the Internet and can communicate with the Zimbra
License server. If you are unable to automatically activate your
license, see the next section on
<a href="#Manual_License_Activation">Manual License Activation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="Manual_License_Activation">Manual License Activation</h4>
<div class="paragraph">
<p>For systems that do not have external access to the Zimbra License
server, you can use the Zimbra Support Portal to manually activate your
license. Go to the Zimbra website at <a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a> and click on the
<strong>Support</strong> page to display the Zimbra Technical Support page. Click on the
<strong>Support Portal Login</strong> button to display the Zimbra Support Portal page.
Enter your email and password to log in.</p>
</div>
<div class="paragraph">
<p>If you have problems accessing the Support Portal, contact Zimbra Sales
at <a href="mailto:sales@zimbra.com">sales@zimbra.com</a> or by calling 1-972-407-0688.</p>
</div>
</div>
<div class="sect3">
<h4 id="License_Not_Installed_or_Activated">License Not Installed or Activated</h4>
<div class="paragraph">
<p>If you fail to install or activate your Zimbra Collaboration server
license, the following scenarios describe how your Zimbra Collaboration
server will be impacted.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>License is not installed.</strong>  If a license is not installed, the
Zimbra Collaboration server defaults to single user mode where all features
limited by license are limited to one user.</p>
</li>
<li>
<p><strong>License is not valid.</strong>  If the license file is forged or could not be
validated for other reasons, the Zimbra Collaboration server defaults to
single user mode.</p>
</li>
<li>
<p><strong>License is not activated.</strong>  A license activation grace period is 10
days. If for some reason the license is never activated, the
Zimbra Collaboration server defaults to single user mode.</p>
</li>
<li>
<p><strong>License is in future.</strong>  If the license starting date is still in the
future, the Zimbra Collaboration server defaults to single user mode.</p>
</li>
<li>
<p><strong>License is in grace period.</strong>  If the license ending date has passed and
is within the 30 day grace period, all features limited by license are
still enabled, but administrators may see license renewal prompts.</p>
</li>
<li>
<p><strong>License expired.</strong>  If the license ending date has passed and the 30 day
grace period expired, the Zimbra Collaboration server defaults to the
feature set of the Open Source Edition.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Obtaining_a_License">Obtaining a License</h4>
<div class="paragraph">
<p>Go to Zimbra’s Website <a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a> to obtain a trial license
from the Network Downloads area.  Contact Zimbra sales regarding a trial
extended license, or to purchase a subscription license or perpetual
license, by emailing <a href="mailto:sales@zimbra.com">sales@zimbra.com</a> or calling 1-972-407-0688.</p>
</div>
<div class="paragraph">
<p>The subscription and perpetual license can only be installed on the
Zimbra Collaboration system for which it is purchased. Only one Zimbra
license is required for your Zimbra Collaboration environment. This
license sets the number of accounts that can be created.</p>
</div>
<div class="paragraph">
<p>Current license information, including the number of accounts purchased,
the number of accounts used, and the expiration date, can be viewed from
the administration console&#8217;s <strong>Configure&gt;Global Settings&gt;License</strong> page.</p>
</div>
</div>
<div class="sect3">
<h4 id="Menu_Driven_Configuration">Menu-Driven Configuration</h4>
<div class="paragraph">
<p>The default configuration installs Zimbra-LDAP, Zimbra-MTA with
anti-virus and anti-spam protection, the Zimbra mailbox server, SNMP
monitoring tools (optional), Zimbra-spell (optional), the logger tool
(optional), and the Zimbra proxy on one server.</p>
</div>
<div class="paragraph">
<p>The menu driven installation displays the components and their existing
default values. You can modify the information during the installation
process. The table below describes the menu options.</p>
</div>
<div class="sect4">
<h5 id="main_menu_options">Main Menu options</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>Main Menu</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="16"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common Configuration</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Select the sub-menu for
  <a href="#common_config_options">Common Configuration Options</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-ldap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#ldap_config">Ldap configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-logger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toggle whether <a href="#zimbra_logger"><strong>zimbra-logger</strong></a> is enabled or not.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-mta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#mta_config">Mta configuration</a>
  Postfix is the open source mail transfer agent (MTA) that receives email
  via SMTP and routes each message to the appropriate Zimbra mailbox server
  using Local Mail Transfer Protocol (LMTP).
  The Zimbra MTA also includes the anti-virus and anti- spam components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-dnscache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#dns_cache">DNS Cache</a>
  Intended primarily on MTAs for optimized DNS and RBL lookups.
  Can also be installed on mailstores and proxy servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-snmp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#snmp_config">Snmp configuration</a>
  Installing the Zimbra-SNMP package is optional.
  If you choose to install Zimbra-SNMP for monitoring, the package should
  be run on every server (Zimbra server, Zimbra LDAP, Zimbra MTA) that is
  part of the Zimbra configuration. Zimbra uses <strong>swatch</strong> to watch the
  syslog output to generate SNMP traps.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-store</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#store_config">Store configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-spell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toggle whether <strong>zimbra-spell</strong> is enabled or not.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-convertd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toggle whether <strong>zimbra-convertd</strong> is enabled or not - defaults to <strong>yes</strong><br>
  The default is to install one zimbra-convertd on each zimbra-store server.
  But only one zimbra-convertd needs to be present in a deployment depending
  on size of ZCS environment.<br>
  <strong>(Network Edition only)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#proxy_config">Proxy configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-imapd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the sub-menu for
  <a href="#imapd_config">IMAPD configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-chat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installing the Zimbra-Chat package is optional.
  If you choose to install Zimbra-Chat for point-to-point text chat, it should
  be installed on every Zimbra Store Server that is part of the Zimbra configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zimbra-drive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installing the Zimbra-Drive package is optional.
  If you choose to install Zimbra-Drive for file sync-and-share, it should
  be installed on every Zimbra Store Server that is part of the Zimbra configuration.
  Please bear in mind you will need a third party server running ownCloud or Nextcloud.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable VMware HA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toggle whether <strong>VMware HA</strong> is enabled or not - defaults to <strong>no</strong><br>
  VMware HA Clustering Heartbeat is only available when running within a
  virtual machine running vmware-tools.<br>
  <strong>(Network Edition only)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Class of Service Configuration</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>This menu section lists major new features for the Zimbra Collaboration
release and whether the feature is enabled or not. When you change the
feature setting during Zimbra Collaboration installation, you change the
default COS settings Having this control, lets you decide when to
introduce new features to your users.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable default backup schedule</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Toggle whether <strong>VMware HA</strong> is enabled or not - defaults to <strong>yes</strong><br>
   The Zimbra Archiving and Discovery package is an optional feature for
   Zimbra Network Edition. Archiving and Discovery offers the ability to
   store and search all messages that were delivered to or sent by Zimbra.
   This package includes the cross mailbox search function which can be
   used for both live and archive mailbox searches.<br>
   <strong>(Network Edition only)</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>s</strong>) Save config to file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">At any time during the installation, you can save the configuration to file.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>c</strong>) Collapse menu</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to collapse the menu.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>x</strong>) Expand menu</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Expand menus to see the underlying options</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="common_config_options">Common Configuration Options</h5>
<div class="paragraph">
<p>The packages installed in common configuration include libraries, utilities,
monitoring tools, and basic configuration files under Zimbra Core.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>Common Configuration - These are common settings for all servers</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="4"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The host name configured in the operating system installation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP master host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The LDAP host name. On a single server installation, this name is the
same as the hostname.  On a multi server installation, this LDAP host
name is configured on every server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default port is <strong>389</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Admin password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the master LDAP password.  This is the password for the Zimbra
admin user and is configured on every server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">All except Zimbra LDAP Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Base DN</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The base DN describes where to load users and groups. In LDAP form, it is
 <strong>cn=Users</strong>. Default is <strong>cn=zimbra</strong>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="4"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secure interprocess communications</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The default is <strong>yes</strong>. Secure interprocess communications requires that
connections between the mail store, and other processes that use Java,
use secure communications. It also specifies whether secure
communications should be used between the master LDAP server and the
replica LDAP servers for replication.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time Zone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select the time zone to apply to the default COS. The time zone that
should be entered is the time zone that the majority of users in the COS
will be located in. The default time zone is PST (Pacific Time).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IPv4</strong> or <strong>IPv6</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default SSL digest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the default message digest to use when generating certificate.
 Defaults is <strong>sha256</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="ldap_config">Ldap configuration</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>zimbra-ldap</strong> - These options are configured on the Zimbra LDAP server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="9"><p class="tableblock">Zimbra LDAP Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The default is <strong>Enabled</strong>.  For replica LDAP servers, the status can be
changed to Disabled if the database is manually loaded after
installation completes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create Domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default is <strong>yes</strong>.  You can create one domain during installation.
 Additional domains can be created from the administration console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain to create</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default domain is the fully qualified hostname of the server. If you
created a valid mail domain on your DNS server, enter it here.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Root password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, this password is automatically generated and is used for
 internal LDAP operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Replication password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the password used by the LDAP replication user to identify
 itself to the LDAP master and must be the same as the password on the
 LDAP master server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Postfix password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the password used by the <strong>postfix</strong> user to identify itself to the
 LDAP server and must be configured on the MTA server to be the same as
 the password on the LDAP master server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Amavis password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This password is automatically generated and is the password used by the
 <strong>amavis</strong> user to identify itself to the LDAP server and must be the same
 password on the LDAP master server and on the MTA server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Nginx password</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>This password is automatically generated and is used by the <strong>nginx</strong> user
 to identify itself to the LDAP server and must be the same password on
 the LDAP master server and on the MTA server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This option is displayed only if the zimbra-proxy package is installed.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP Bes Searcher password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This password is automatically generated and is used by the ldap
BES user.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="zimbra_logger">Zimbra Logger</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra mailbox server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>zimbra-logger</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The Logger package is installed on one mail server. If installed, it is
 automatically enabled. Logs from all the hosts are sent to the mailbox
 server where the logger package is installed.
 This data is used for generating statistics graphs and reporting and for
 message tracing.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="mta_config">MTA Server Configuration Options</h5>
<div class="paragraph">
<p>Zimbra MTA server configuration involves installation of the <strong>Zimbra-MTA</strong>
package. This also includes <strong>anti-virus</strong> and <strong>anti-spam</strong> components.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>zimbra-mta</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="6"><p class="tableblock">Zimbra MTA Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MTA Auth host</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>This is configured automatically if the MTA authentication server host
is on the same server, but must be configured if the authentication
server is not on the MTA.
The MTA Auth host must be one of the mailbox servers.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable Spamassassin</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable ClamAV</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is enabled.
 To configure attachment scanning, see
<a href="#Scanning_Attachments_in_Outgoing_Mail">Scanning Attachments in Outgoing Mail</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Notification address for AV alerts</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Sets the notification address for AV alerts.
You can either accept the default or create a new address.
If you create a new address, remember to provision this address
from the admin console.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the virus notification address does not exist and your
host name is the same as the domain name on the Zimbra server,
the virus notifications remain queued in the Zimbra MTA server
cannot be delivered.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Bind password for Postfix LDAP user</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically set.  This is the password used by the <strong>postfix</strong> user to
identify itself to the LDAP server and must be configured on the MTA
server to be the same as the password on the LDAP master server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Bind password for Amavis LDAP user</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatically set. This is the password used by the <strong>amavis</strong> user to
identify itself to the LDAP server and must be configured on the MTA
server to be the same as the <strong>amavis</strong> password on the master LDAP server.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
New installs of ZCS limit spam/ham training to the first MTA installed.
If you uninstall or move this MTA, you will need to enable spam/ham training
on another MTA, as one host should have this enabled to run
<code>zmtrainsa --cleanup</code>. To do this on that host, do:<br>
<code>zmlocalconfig -e zmtrainsa_cleanup_host=TRUE</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="dns_cache">DNS Cache</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>zimbra-dnscache (optional)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock">Zimbra mailbox server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Master DNS IP address(es)</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>IP addresses of DNS servers</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable DNS lookups over TCP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>yes</strong> or <strong>no</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable DNS lookups over UDP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>yes</strong> or <strong>no</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Only allow TCP to communicate with Master DNS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>yes</strong> or <strong>no</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="snmp_config">Snmp configuration</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>zimbra-snmp (optional)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="5"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable SNMP notifications</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The default is <strong>yes</strong>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SNMP Trap hostname</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname of the SNMP Trap destination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable SMTP notification</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default is <strong>yes</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP Source email address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>From</strong> address to use in email notifications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP Destination email address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>To</strong> address to use in email
 notifications</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="store_config">Store configuration</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><strong>zimbra-store</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="7"><p class="tableblock">Zimbra Mailbox Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create Admin User</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Yes</strong> or <strong>No</strong>. The administrator account is created during installation.
This account is the first account provisioned on the Zimbra server and
allows you to log on to the administration console.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Admin user to create</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name assigned to the administrator account. Once the
administrator account has been created, it is suggested that you <strong>do not
rename the account</strong> as automatic Zimbra Collaboration notifications might
not be received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You must set the admin account password. The password is case sensitive
and must be a <strong>minimum of six characters</strong>. The administrator name, mail
address, and password are required to log in to the administration
console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anti-virus quarantine user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A virus quarantine account is automatically created during installation.
When AmavisD identifies an email message with a virus, the email is
automatically sent to this mailbox. The virus quarantine mailbox is
configured to delete messages older than 7 days.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable automated spam training</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Yes</strong> or <strong>No</strong>.  By default, the automated spam training filter is
enabled and two mail accounts are created - one for the
<strong>Spam Training User</strong> and one for the <strong>Non-spam (HAM) Training User</strong>.
See the next 2 menu items which will be shown if spam training is
enabled.<br>
These addresses are automatically configured
to work with the spam training filter. The accounts created have
randomly selected names. To recognize what the accounts are used for,
you may want to change their names.<br>
The spam training filter is automatically added to the <strong>cron</strong> table
and runs daily.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Spam Training User</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to receive mail notification about mail that was not marked as junk,
but should have been.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Non-spam (HAM) Training User</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to receive mail notification about mail that was marked as junk,
but should not have been.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">The default port configurations are shown</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="10"><p class="tableblock">Zimbra Mailbox Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SMTP host</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Defaults to current server name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Web server HTTP port:</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>80</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Web server HTTPS port:</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>443</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Web server mode</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Can be <strong>HTTP</strong>, <strong>HTTPS</strong>, <strong>Mixed</strong>, <strong>Both</strong> or <strong>Redirect</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Mixed</strong> mode uses HTTPS for logging in and HTTP for normal session
traffic</p>
</li>
<li>
<p><strong>Both</strong> mode means that an HTTP session stays HTTP, including during
the login phase, and an HTTPS session remains HTTPS throughout,
including the login phase.</p>
</li>
<li>
<p><strong>Redirect</strong> mode redirects any users connecting via HTTP to an HTTPS
connection.</p>
</li>
<li>
<p>All modes use SSL encryption for back-end administrative traffic.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IMAP server port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>143</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IMAP server SSL port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>993</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>POP server port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>110</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>POP server SSL port</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>995</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Use spell checker server</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>Yes</strong> (if installed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Spell server URL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://&lt;example.com&gt;:7780/aspell.php" class="bare">http://&lt;example.com&gt;:7780/aspell.php</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">If either or both of these next 2 options are changed to <strong>TRUE</strong>,
the proxy setting on the mailbox store are enabled in preparation for
setting up <code>zimbra-proxy</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="6"><p class="tableblock">Zimbra Mailbox Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*Configure for use with mail proxy.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>default <strong>FALSE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*Configure for use with web proxy.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default <strong>FALSE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable version update checks.</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Collaboration automatically
checks to see if a new Zimbra Collaboration update is available. The
default is <strong>TRUE</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enable version update notifications.</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>This enables automatic notification when updates are available
when this is set to TRUE.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The software update information can be viewed from the Administration
Console Tools Overview pane.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Version update notification email.</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the email address of the account to be notified
when updates are available. The default is to send the notification
to the admin’s account.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Version update source email.</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the email address of the account that sends the email
notification. The default is the admin’s account.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="proxy_config">Proxy configuration</h5>
<div class="paragraph">
<p>Zimbra Proxy (Nginx-Zimbra) is a high-performance reverse proxy server that
passes IMAP[S]/POP[S]/HTTP[S] client requests to other internal ZCS services.</p>
</div>
<div class="paragraph">
<p>It requires the separate package <strong>Zimbra Memcached</strong> which is
automatically selected when the <strong>zimbra-proxy</strong> package is installed.
One server must run <code>zimbramemcached</code> when the proxy is in use.
All installed zimbra proxies can use a single memcached server.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>zimbra-proxy</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="10"><p class="tableblock">mailbox server,<br>
MTA server  or<br>
own independent server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable POP/IMAP Proxy</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>default TRUE</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP proxy port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default 143</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP SSL proxy port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default 993</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP proxy port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default 110</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP SSL proxy port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default 995</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bind password for nginx ldap user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable HTTP[S] Proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default TRUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP proxy port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default 80</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS proxy port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default 443</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy server mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default https</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="imapd_config">IMAPD configuration</h5>
<div class="paragraph">
<p>IMAPD is an external IMAP[S] service that may be used as a
replacement for the embedded IMAP[S] service that runs inside of
<code>mailboxd</code>.  It would normally not be required with a single-server
installation.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 15%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Server Configured</strong></th>
<th class="tableblock halign-left valign-top"><strong>Menu Item</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>zimbra-imapd</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">mailbox server or<br>
independent server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add to upstream IMAP Servers?:</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>default <code>no</code>.  If <code>yes</code>, the
following global config settings will be applied:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>This server will be added to the list of <code>zimbraReverseProxyUpstreamImapServers</code></p>
</li>
<li>
<p>Embedded IMAP[S] servers will be disabled.</p>
</li>
</ul>
</div>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Scanning_Attachments_in_Outgoing_Mail">Scanning Attachments in Outgoing Mail</h3>
<div class="paragraph">
<p>You can enable real-time scanning of attachments in outgoing emails sent
using the Zimbra Web Client. If enabled, when an attachment is added to
an email, it is scanned using ClamAV prior to sending the message. If
ClamAV detects a virus, it will block attaching the file to the message.
By default, scanning is configured for a single node installation.</p>
</div>
<div class="paragraph">
<p>To enable in a multi-node environment, one of the MTA nodes needs to be
picked for handling ClamAV scanning. Then, the necessary configuration
can be done using the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="bash">zmprov ms &lt;mta server&gt; zimbraClamAVBindAddress &lt;mta server&gt;
zmprov mcf zimbraAttachmentsScanURL clam://&lt;mta server&gt;:3310/
zmprov mcf zimbraAttachmentsScanEnabled TRUE</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_of_the_zimbra_proxy_server">Overview of the Zimbra Proxy Server</h3>
<div class="paragraph">
<p>Zimbra Proxy (Nginx-Zimbra) is a high-performance reverse proxy server
that passes <strong>IMAP[S]/POP[S]/HTTP[S]</strong> client requests to other internal
Zimbra Collaboration services.  A reverse proxy server is an Internet-facing server
that protects and manages client connections to your internal services.  It
can also provide functions like: GSSAPI authentication, throttle
control, SSL connection with different certificates for different
virtual host names, and other features.</p>
</div>
<div class="paragraph">
<p>In a typical use case, Zimbra Proxy extracts user login information
(such as account id or user name) and then fetches the route to the
upstream mail server or web server&#8217;s address from the <strong>Nginx Lookup
Extension</strong>, and finally proxies the interactions between clients and
upstream Zimbra Collaboration servers.  To accelerate the speed of route lookup,
memcached is introduced, which caches the lookup result.  The subsequent login
with the same username is directly proxied without looking up in Nginx Lookup
Extension.</p>
</div>
<div class="paragraph">
<p>You can install the Zimbra Proxy package on a mailbox server, MTA
server, or on its own independent server.  When the Zimbra Proxy package
is installed, the proxy feature is enabled.  In most cases, no
modification is necessary.</p>
</div>
<div class="paragraph">
<p>Benefits for using the Zimbra Proxy include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Centralizes access to Mailbox servers</p>
</li>
<li>
<p>Load Balancing</p>
</li>
<li>
<p>Security</p>
</li>
<li>
<p>Authentication</p>
</li>
<li>
<p>SSL Termination</p>
</li>
<li>
<p>Caching</p>
</li>
<li>
<p>Centralized Logging and Auditing</p>
</li>
<li>
<p>URLRewriting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see the wiki page
<a href="https://wiki.zimbra.com/wiki/Zimbra_Proxy_Guide" class="bare">https://wiki.zimbra.com/wiki/Zimbra_Proxy_Guide</a></p>
</div>
<div class="sect3">
<h4 id="_zimbra_proxy_components_and_memcached">Zimbra Proxy Components and Memcached</h4>
<div class="paragraph">
<p>Zimbra Proxy is designed to provide a HTTP[S]/POP[S]/IMAP[S] reverse
proxy that is quick, reliable, and scalable. Zimbra Proxy includes the
following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Nginx</strong>. A high performance HTTP[S]/POP[S]/IMAP[S] proxy server which
handles all incoming HTTP[S]/POP[S]/IMAP[S] requests.</p>
</li>
<li>
<p><strong>Zimbra Proxy Route Lookup Handler</strong>. This is a servlet (also named as
Nginx Lookup Extension or NLE) located on the Zimbra Collaboration mailbox server.
This servlet handles queries for the user account route information
(the server and port number where the user account resides).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Memcached</strong> is a high performance, distributed memory object caching system.
Route information is cached for further use in order to increase performance.
<strong>zimbra-memcached</strong> is a separate package that is recommended to be
installed along with zimbra-proxy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_proxy_architecture_and_flow">Zimbra Proxy Architecture and Flow</h4>
<div class="paragraph">
<p>The following sequence explains the architecture and the login flow when an
end client connects to Zimbra Proxy.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>End clients connect to Zimbra Proxy using HTTP[S]/POP[S]/IMAP[S] ports.</p>
</li>
<li>
<p>Proxy attempts to contact a memcached server (elected from the available
memcached servers, using a round-robin algorithm) if available and with
caching enabled to query the upstream route information for this
particular client.</p>
</li>
<li>
<p>If the route information is present in memcached, then this will be a
<strong>cache-hit</strong> case and the proxy connects to the corresponding Zimbra
Mailbox server right away and initiates a web/mail proxy session for
this client. The memcached component stores the route information for
the configured period of time (configurable and one hour by default).
Zimbra proxy uses this route information instead of querying the Zimbra
Proxy Route Lookup Handler/NLE until the default period of time has
expired.</p>
</li>
<li>
<p>If the route information is not present in memcached, then this will be
a <strong>cache-miss</strong> case, so Zimbra Proxy will proceed sending an HTTP request
to an available Zimbra Proxy Route Lookup Handler/NLE (elected by
round-robin), to look up the upstream mailbox server where this user
account resides.</p>
</li>
<li>
<p>Zimbra Proxy Route Lookup Handler/NLE locates the route information from
LDAP for the account being accessed and returns this back to Zimbra Proxy.</p>
</li>
<li>
<p>Zimbra Proxy uses this route information to connect to the
corresponding Zimbra Mailbox server and initiates a web/mail proxy
session. It also caches this route information into a memcached server
so that the next time this user logs in, the memcached server has the
upstream information available in its cache, and Zimbra Proxy will not
need to contact NLE.The end client is transparent to this and behaves as
if it is connecting directly to the Zimbra Mailbox server.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_proxy_position_in_zimbra_collaboration_runtime">Zimbra Proxy Position in Zimbra Collaboration Runtime</h4>
<div class="paragraph">
<p>The following figure displays the positions of Zimbra Proxy and its
relationships to other components of Zimbra Collaboration.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/zimbra-proxy.png" alt="Proxy place in network"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_strategy">Deployment Strategy</h4>
<div class="paragraph">
<p>The deployment strategy and position with respect to non-proxy hosts,
Zimbra actively suggests using the Proxy server on the edge (either on
an independent server or on the same server running LDAP/MTA) with
mailbox servers behind it. In the case of multiple proxies, an external
load balancer can be placed in front to distribute the load evenly among
the proxy servers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Zimbra Proxy package does not act as a firewall and needs to be behind
the firewall in customer deployments.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_during_installation">Configuration during installation</h4>
<div class="paragraph">
<p>zimbra-proxy package needs to be selected during the installation
process (it is installed by default). It is highly recommended to
install memcached as well along with proxy for better performance.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Install zimbra-proxy [Y]
Install zimbra-memcached [Y]</pre>
</div>
</div>
<div class="paragraph">
<p>This would install and enable all IMAP[S]/POP[S]/HTTP[S] proxy
components with the following default configuration.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    Proxy configuration

       1) Status:                                  Enabled
       2) Enable POP/IMAP Proxy:                   TRUE
       3) IMAP proxy port:                         143
       4) IMAP SSL proxy port:                     993
       5) POP proxy port:                          110
       6) POP SSL proxy port:                      995
       7) Bind password for nginx ldap user:       set
       8) Enable HTTP[S] Proxy:                    TRUE
       9) HTTP proxy port:                         80
      10) HTTPS proxy port:                        443
      11) Proxy server mode:                       https</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_proxy_ports">Zimbra Proxy Ports</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The following ports are used either by Zimbra Proxy or by Zimbra Mailbox
(if Proxy is not configured).<br>
<strong>If you have any other services running on these ports, turn them off.</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>End clients connect directly to Zimbra Proxy, using the Zimbra Proxy
Ports. Zimbra Proxy connects to the Route Lookup Handler/NLE (which
resides on Zimbra Mailbox server) using the Zimbra Mailbox Ports.</p>
</div>
<div class="paragraph">
<p><strong>Zimbra Proxy Port Mapping</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2">Zimbra Proxy Ports (External to Zimbra Collaboration)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP3S (Secure POP3)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">995</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">143</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAPS (Secure IMAP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">993</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2">Zimbra Mailbox Ports (Internal to Zimbra Collaboration)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Route Lookup Handler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7072</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP Backend (if Proxy configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8080</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS Backend (if Proxy configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8443</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP3 Backend (if Proxy configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7110</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP3S Backend (if Proxy configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7995</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP Backend (if Proxy configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7143</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAPS Backend (if Proxy configured)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7993</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_for_virtual_hosting">Configuring for Virtual Hosting</h3>
<div class="paragraph">
<p>You can configure multiple virtual hostnames to host more than one
domain name on a server. When you create a virtual host, users can log
in without having to specify the domain name as part of their user name.</p>
</div>
<div class="paragraph">
<p>Virtual hosts are configured from the administration console<br>
<strong>Configure&gt;Domains&gt;Virtual Hosts</strong><br>
page. The virtual host requires a valid DNS configuration with an A record.</p>
</div>
<div class="paragraph">
<p>When users log in, they enter the virtual host name in the browser. For
example, <strong><a href="https://mail.example.com" class="bare">https://mail.example.com</a></strong>. When the Zimbra logon screen
displays, users enter only their user name and password. The
authentication request searches for a domain with that virtual host
name. When the virtual host is found, the authentication is completed
against that domain.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Installation_Prerequisites">Preparing Your Server Environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to successfully install and run Zimbra Collaboration, ensure
your system meets the requirements described in this section. System
administrators should be familiar with installing and managing email
systems.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Do not manually create the user <strong>zimbra</strong> before running the ZCS installation.
The installation automatically creates this user and sets up its environment.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_system_requirements">System Requirements</h3>
<div class="paragraph">
<p>For the Zimbra Collaboration system requirements see
<a href="#System_Requirements">System Requirements for Zimbra Collaboration</a> at the end of
this guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="Modifying_Operating_System_Configurations">Modifying Operating System Configurations</h3>
<div class="paragraph">
<p>Zimbra Collaboration runs on one of several operating systems, including
Ubuntu® LTS, Red Hat® Enterprise Linux, CentOS and Oracle Linux.</p>
</div>
<div class="paragraph">
<p>A full default installation of the Linux distribution that you select is
required.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Zimbra recommends that the operating systems you use are updated
with the latest patches that have been tested with Zimbra Collaboration.
See the latest release notes to see the operating systems patch list
that has been tested with Zimbra Collaboration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Configuring_High-Fidelity_Document_Preview">Configuring High-Fidelity Document Preview (Network Edition Only)</h3>
<div class="paragraph">
<p>The high-fidelity document preview feature requires the installation of
LibreOffice or the LibreOffice-headless package, depending on the
operating system you are running.</p>
</div>
<div class="paragraph">
<p>If LibreOffice is installed, the system is automatically configured
to use high-fidelity document preview. If LibreOffice is not
installed, the preview engine from prior Zimbra Collaboration releases
is used.</p>
</div>
<div class="paragraph">
<p>This can be accomplished with the appropriate Linux distribution&#8217;s
package management systems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For RHEL, install the libreoffice-headless package:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>yum install libreoffice
yum install libreoffice-headless</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For Ubuntu, install libreoffice:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get install libreoffice</pre>
</div>
</div>
<div class="sect3">
<h4 id="Install_Language_and_Font_Packages">Install Language and Font Packages</h4>
<div class="paragraph">
<p>Confirm you have the appropriate language packs or fonts installed for
LibreOffice to properly view documents and attachments. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If using Ubuntu 12.04 (<strong>deprecated</strong>) and viewing East Asian languages, be sure to install:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get install libreoffice-l10n-*
apt-get install ttf-vlgothic</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If using Ubuntu 14.04 or 16.04 and viewing East Asian languages, be sure to install:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>apt-get install libreoffice-l10n-*
apt-get install fonts-vlgothic</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If using RHEL, be sure to install:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>yum install libreoffice-langpack-xx</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DNS_Configuration_Requirement">DNS Configuration Requirement</h3>
<div class="paragraph">
<p>When you create a domain during the installation process, Zimbra Collaboration checks
to see if you have an MX record correctly configured for that domain.
If it is not, an error is displayed suggesting that the domain name have
an MX record configured in DNS.</p>
</div>
<div class="paragraph">
<p>In order to send and receive email, the Zimbra MTA must be configured in
DNS with both A and MX records. For sending mail, the MTA uses DNS to
resolve hostnames and email-routing information. To receive mail, the MX
record must be configured correctly to route the message to the mail
server.</p>
</div>
<div class="paragraph">
<p>During the installation process, Zimbra Collaboration checks to see if
you have an MX record correctly configured. If it is not, an error is
displayed suggesting that the domain name have an MX record configured
in DNS.</p>
</div>
<div class="paragraph">
<p>You must configure a relay host if you do not enable DNS. After Zimbra Collaboration is installed, go to the <strong>administration console</strong>'s
<strong>Global Settings&gt;MTA</strong> tab and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Uncheck <strong>Enable DNS lookups</strong>.</p>
</li>
<li>
<p>Enter the <strong>relay MTA address</strong> to use for external delivery.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Even if a relay host is configured, an MX record is still
required if the Zimbra Collaboration server is going to receive email
from the Internet.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multiple_server_install">Multiple-Server Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The multiple-server installation is straight-forward and easy to run.
You run the same installation script on each server, select the
component(s) to install, and use the menu to configure the system.</p>
</div>
<div class="paragraph">
<p>When the server installation is complete after final set-up and server
configuration steps are run, the servers are started and the status is
displayed.</p>
</div>
<div class="paragraph">
<p><strong>Order of Installation</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ZCS LDAP server(s)</p>
</li>
<li>
<p>ZCS MTA server(s)</p>
</li>
<li>
<p>ZCS Proxy server(s)</p>
</li>
<li>
<p>ZCS Mailbox server(s) options:</p>
<div class="ulist">
<ul>
<li>
<p>Zimbra Mailbox Server, which includes the mailstore services and
webapp services (mailstore server + UI server)</p>
</li>
<li>
<p>Zimbra Web Application Server Split mode, which includes:</p>
<div class="ulist">
<ul>
<li>
<p>a Zimbra mailstore server (mailstore server)</p>
</li>
<li>
<p>a Zimbra webapp server (UI server)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>ZCS IMAPD server(s)</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Zimbra-proxy is normally installed on the MTA server or you can install it on its own server.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Do not manually create the user ‘zimbra’ before running the ZCS
installation. The installation automatically creates this user and sets up
its environment.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Before you start, verify that the system clocks are synced on all servers.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="starting_multiple_server_install">Starting the Installation Process</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>Before you begin, make sure to:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Store your license in a directory folder on your server as it is needed to
complete your installation of Zimbra Collaboration. For more information about
licenses, see <a href="#Intro_license">Zimbra Collaboration License</a> and
<a href="#Zimbra_License_Requirements">Zimbra License Requirements</a>
(Network Edition only)</p>
</li>
<li>
<p>Confirm you have the latest system requirements and prerequisites for
installing Zimbra Collaboration, as described in
<a href="#System_Requirements">System Requirements for Zimbra Collaboration</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For the latest Zimbra Collaboration software downloads, go to
<a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a>.<br>
Save the Zimbra Collaboration <strong>tar</strong> file to the computer from which you are
installing the software.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>The screen shots are examples of the Zimbra Collaboration installation
script. The actual script may be different.</em>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 1 through step 4 are performed for each server to be installed.</p>
</div>
<div class="paragraph">
<p>Open an SSH session to the Zimbra server and follow the steps below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as <strong>root</strong> to the Zimbra Collaboration server and <strong>cd</strong> to the
directory where the Zimbra Collaboration archive file is saved
(cd /var/&lt;tmp&gt;). Type the following commands.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>tar xzvf [zcs.tgz]</code> to unpack the file</p>
</li>
<li>
<p><code>cd [zcs filename]</code> to change to the correct directory. The file
name includes the release and build date.</p>
</li>
<li>
<p><code>./install.sh</code> to begin the installation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>As the installation proceeds, press</em> <strong>Enter</strong> <em>to accept the
defaults that are shown in brackets</em> [ ] <em>or enter the appropriate
answer for your configuration.</em>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="bash">root@mailhost:/tmp# tar xzvf zcs.tgz
zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124/
zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124/packages/
.
.
.
zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124/install.sh
zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124/README.txt

root@zimbraiop:/tmp/# cd zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124/
root@zimbraiop:/tmp/zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124# ./install.sh

Operations logged to /tmp/install.log.y1YeCSI5
.
.
.</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The <strong>install.sh</strong> script reviews the installation software to verify that the
Zimbra packages are available.<br>
The installation process checks to see whether any of the applications
<strong>Sendmail</strong>, <strong>Postfix</strong>, <strong>MySQL</strong> or <strong>MariaDB</strong> are running.<br>
If any of these applications are running, you are asked to disable them.<br>
Disabling <strong>MySQL</strong> and <strong>MariaDB</strong> is <strong>optional</strong> but highly recommended.<br>
<strong>Sendmail</strong> and <strong>Postfix</strong> <strong>MUST</strong> be disabled for Zimbra Collaboration to start correctly.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="bash">root@zimbraiop:/tmp/zcs-NETWORK-8.7.6_GA_1776.UBUNTU16_64.20170326144124# ./install.sh


Operations logged to /tmp/install.log.y1YeCSI5
Checking for existing installation...
    zimbra-chat...NOT FOUND
    zimbra-drive...NOT FOUND
    zimbra-imapd...NOT FOUND
    zimbra-ldap...NOT FOUND
    zimbra-logger...NOT FOUND
    zimbra-mta...NOT FOUND
    zimbra-dnscache...NOT FOUND
    zimbra-snmp...NOT FOUND
    zimbra-store...NOT FOUND
    zimbra-apache...NOT FOUND
    zimbra-spell...NOT FOUND
    zimbra-convertd...NOT FOUND
    zimbra-memcached...NOT FOUND
    zimbra-proxy...NOT FOUND
    zimbra-archiving...NOT FOUND
    zimbra-core...NOT FOUND

.
.
.</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The Zimbra software agreement displays. Read the agreement and when<br>
<code>Do you agree with the terms of the software license agreement? [N]</code><br>
displays, enter <code>Y</code> to continue.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The license agreement displays in multiple sections,
and you must accept each section of the license agreement.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p><code>Use Zimbra&#8217;s package repository [Y]</code><br>
displays, press <code>enter</code> to continue. Your system will be configured to add
the Zimbra packaging repository for <strong>yum</strong> or <strong>apt-get</strong> as appropriate
so it can install the Zimbra 3rd party packages.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Checking for installable packages

Found zimbra-core (local)
Found zimbra-ldap (local)
Found zimbra-logger (local)
Found zimbra-mta (local)
Found zimbra-dnscache (local)
Found zimbra-snmp (local)
Found zimbra-store (local)
Found zimbra-apache (local)
Found zimbra-spell (local)
Found zimbra-convertd (local)
Found zimbra-memcached (repo)
Found zimbra-proxy (local)
Found zimbra-archiving (local)
Found zimbra-imapd (local)
Found zimbra-chat (repo)
Found zimbra-drive (repo)



Use Zimbra's package repository [Y] y
Configuring package repository</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Next, select the packages to be installed on this server.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the cross mailbox search feature, install the Zimbra Archive
package. To use the archiving and discovery feature, contact Zimbra
sales.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The installer verifies that there is enough room to install Zimbra.</p>
</div>
</li>
<li>
<p>Next, the installer checks to see that the prerequisite packages are
installed as listed in the Other Dependencies section of the
<a href="#System_Requirements">System Requirements for Zimbra Collaboration</a></p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>Before the Main menu is displayed, the installer checks to see if the
hostname is resolvable via DNS and if there is an error asks
you if would like to change the hostname. The domain name should have an
MX record configured in DNS.</em>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="install_ldap_master">Installing Zimbra LDAP Master Server</h3>
<div class="paragraph">
<p>You must configure the ZCS LDAP Master server before you can install
other ZCS servers. You can set up LDAP replication, configuring a
master LDAP server and replica LDAP servers, either configuring all LDAP
servers now or after you set up the initial Zimbra Collaboration servers. See the
section on <a href="#ldap-replication">Configuring LDAP Replication</a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in
<a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open an SSH session to the LDAP server, log on to the server as <strong>root</strong>,
and unpack the ZCS software.</p>
</li>
<li>
<p>Type <code>y</code> and press <em>Enter</em> to install the <code>zimbra-ldap</code> package.<br>
The <code>zimbra-mta</code>, <code>zimbra-store</code> and <code>zimbra-logger</code> packages should be
marked <code>n</code>.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Install zimbra-ldap [Y] Y

Install zimbra-logger [Y] N

Install zimbra-mta [Y] N

Install zimbra-dnscache [Y] N

Install zimbra-snmp [Y] N

Install zimbra-store [Y] N

Install zimbra-apache [Y] N

Install zimbra-spell [Y] N

Install zimbra-convertd [Y] N

Install zimbra-memcached [Y] N

Install zimbra-proxy [Y] N

Install zimbra-archiving [N] N

Install zimbra-chat [Y] N

Install zimbra-drive [Y] N

Install zimbra-imapd [Y] N

Checking required space for zimbra-core

Installing:
    zimbra-core
    zimbra-ldap

The system will be modified.  Continue? [N]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to modify the system. The selected
packages are installed on the server.</p>
<div class="paragraph">
<p>The Main menu displays the default entries for the Zimbra component you
are installing.<br>
To expand the menu to see the configuration values, type <code>x</code> and press <em>Enter</em>.<br>
The main menu expands to display configuration details for the package
being installed.</p>
</div>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Values that require further configuration are marked with asterisks (<code>*</code>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>To navigate the Main menu, select the menu item to change. You can
modify any of the values. See the section
<a href="#main_menu_options">Main Menu options</a>
for a description of the Main menu.</p>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Main menu

   1) Common Configuration:
   2) zimbra-ldap:                             Enabled
   3) Enable default backup schedule:          yes
   s) Save config to file
   x) Expand menu
   q) Quit

*** CONFIGURATION COMPLETE - press 'a' to apply
Select from menu, or press 'a' to apply config (? - help)</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>1</code> to display the <strong>Common Configuration</strong> submenu.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Common configuration

   1) Hostname:                                ldap-1.example.com
   2) Ldap master host:                        ldap-1.example.com
   3) Ldap port:                               389
   4) Ldap Admin password:                     set
   5) Store ephemeral attributes outside Ldap: no
   6) Secure interprocess communications:      yes
   7) TimeZone:                                America/Mexico_City
   8) IP Mode:                                 ipv4
   9) Default SSL digest:                      sha256

Select, or 'r' for previous menu [r]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>4</code> to display the automatically generated LDAP admin password.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Select, or 'r' for previous menu [r] 4

Password for ldap admin user (min 6 characters): [bEyMZxNxq]</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can change this password.<br>
Write down the LDAP password, the LDAP host name and the LDAP port.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>LDAP Admin Password _______________________
LDAP Host name      _______________________
LDAP Port           _______________________</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must configure this information when you install the mailbox servers
and the MTA servers.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Type <code>7</code> to set the correct time zone.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>1 Africa/Algiers
.
.
.
94 Europe/London
.
.
.
109 Pacific/Tongatapu
110 UTC
Enter the number for the local timezone: [110] 94</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the Main menu.</p>
</li>
<li>
<p>From the Main menu, type <code>2</code> for <strong>zimbra-ldap</strong> to view the
<strong>Ldap configuration</strong> settings.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Ldap configuration

   1) Status:                                  Enabled
   2) Create Domain:                           yes
   3) Domain to create:                        ldap-1.example.com
   4) Ldap root password:                      set
   5) Ldap replication password:               set
   6) Ldap postfix password:                   set
   7) Ldap amavis password:                    set
   8) Ldap nginx password:                     set
   9) Ldap Bes Searcher password:              set

Select, or 'r' for previous menu [r]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>3</code> for <strong>Domain to create</strong> to change the default domain name to
the main domain name you want to use for your network, (e.g. <strong>example.com</strong>).</p>
</li>
<li>
<p>The passwords listed in the <strong>LDAP configuration</strong> menu are automatically
generated.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If you want to change the passwords for LDAP root, LDAP replication,
LDAP Postfix, LDAP Amavis, and LDAP Nginx, enter the
corresponding number <code>4</code> through <code>8</code> and change the passwords.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Ldap replication password _____________________
Ldap postfix password     _____________________
Ldap amavis password      _____________________
Ldap nginx password       _____________________</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need these passwords when configuring the MTA and the LDAP
replica servers. Write them down.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>When changes to the LDAP configuration menu are complete:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>*** CONFIGURATION COMPLETE - press 'a' to apply
Select from menu, or press 'a' to apply config (? - help) a
Save configuration data to a file? [Yes]
Save config in file: [/opt/zimbra/config.8381]
Saving config in /opt/zimbra/config.8381...done</code></pre>
</div>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>enter <code>r</code> to return to the main menu.</p>
</li>
<li>
<p>Type <code>a</code> to apply the configuration changes.</p>
</li>
<li>
<p>When <code>Save configuration data to file</code> appears,<br>
type <code>Yes</code> and press <em>Enter</em>.</p>
</li>
<li>
<p>The next request asks where to save the files.<br>
To accept the default, press <em>Enter</em>.<br>
To save the files to another directory, enter the directory
and press <em>Enter</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>When <code>The system will be modified - continue? [No]</code> appears,<br>
type <code>y</code> and press <em>Enter</em>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The server is modified. Installing all the components and configuring
the server can take a few minutes. This includes but is not limited to
setting local config values, creating and installing SSL certificates,
setting passwords, timezone preferences, and starting the servers, among
other processes.</p>
</div>
</div>
</div>
</li>
<li>
<p>When <code>Configuration complete - press return to exit</code> displays,
press <em>Enter</em>.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>*** CONFIGURATION COMPLETE - press 'a' to apply
Select from menu, or press 'a' to apply config (? - help) a
Save configuration data to a file? [Yes]
Save config in file: [/opt/zimbra/config.8381]
Saving config in /opt/zimbra/config.8381...done.
The system will be modified - continue? [No] y
Operations logged to /tmp/zmsetup.20170302-133132.log
Setting local config values...done.
.
.
.
Starting servers...done.
Skipping creation of default domain GAL sync account - not a service node.
Setting up zimbra crontab...done.


Moving /tmp/zmsetup.20170302-133132.log to /opt/zimbra/log


Configuration complete - press return to exit</code></pre>
</div>
</div>
<div class="paragraph">
<p>The installation of the LDAP server is complete.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="install_mailbox">Installing the Zimbra Mailbox Server</h3>
<div class="paragraph">
<p>The <strong>zimbra-store</strong> package can be installed with the LDAP server, the MTA
server, or as a separate mailbox server.</p>
</div>
<div class="paragraph">
<p>You can have the following configuration options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Zimbra Mailbox Server</strong> containing mailstore services and webapp
services (mailstore server + UI server)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Zimbra Web Application Server Split</strong>, which includes:</p>
<div class="ulist">
<ul>
<li>
<p>Mailstore server providing the backend SOAP/REST functionality</p>
</li>
<li>
<p>UI server providing the web UI functionality (static html/js/css content)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can have more than one of the above configurations.
In a web application server split environment, you must have at least
one mailstore server and one UI server in your configuration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A web application server split environment must have proxy and
memcached installed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Zimbra license file can be installed on one of the mailbox
servers during the installation.
If you do not have a license file, you can install it from the
administration console when the Zimbra Collaboration install is complete.
See <a href="#Zimbra_License_Requirements">Zimbra License Requirements</a></p>
</div>
<div class="sect3">
<h4 id="_install_zimbra_mailbox_services">Install Zimbra Mailbox Services</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in
<a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open an SSH session to the Mailbox server, log on to the server as
<strong>root</strong>, and unpack the ZCS software.</p>
</li>
<li>
<p>Type <code>y</code> and press <em>Enter</em> to install the <strong>zimbra-logger</strong> package
(optional and only on one mail server) and <strong>zimbra-store</strong>.
In the following screen shot example, the packages to be installed are emphasized.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>If SNMP is being used, the SNMP package is installed on every
Zimbra server. Mark</em> <code>y</code>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Install zimbra-ldap [Y] N

Install zimbra-logger [Y] Y

Install zimbra-mta [Y] N

Install zimbra-dnscache [Y] N

Install zimbra-snmp [Y] Y

Install zimbra-store [Y] Y

Install zimbra-apache [Y] Y

Install zimbra-spell [Y] Y

Install zimbra-convertd [Y] Y

Install zimbra-memcached [Y] N

Install zimbra-proxy [Y] N

Install zimbra-archiving [N] Y

Install zimbra-chat [Y] Y

Install zimbra-drive [Y] Y

Install zimbra-imapd [Y] N

Checking required space for zimbra-core
Checking space for zimbra-store
Checking required packages for zimbra-store
     FOUND: libreoffice-1:4.2.8-0ubuntu4
zimbra-store package check complete.

Installing:
    zimbra-core
    zimbra-logger
    zimbra-snmp
    zimbra-store
    zimbra-apache
    zimbra-spell
    zimbra-convertd
    zimbra-archiving
    zimbra-chat
    zimbra-drive

The system will be modified.  Continue? [N]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to modify the system. The selected
packages are installed on the server.</p>
<div class="paragraph">
<p>The Main menu displays the default entries for the Zimbra component you
are installing.<br>
To expand the menu to see the configuration values, type <code>x</code> and press <em>Enter</em>.<br>
The main menu expands to display configuration details for the package
being installed.</p>
</div>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Values that require further configuration are marked with asterisks (<code>*</code>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>To navigate the Main menu, select the menu item to change. You can
modify any of the values. See the section
<a href="#main_menu_options">Main Menu options</a>
for a description of the Main menu.</p>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Main menu

   1) Common Configuration:
        +Hostname:                             mailstore-1.example.com
******* +Ldap master host:                     UNSET
        +Ldap port:                            389
******* +Ldap Admin password:                  UNSET
        +LDAP Base DN:                         cn=zimbra
        +Store ephemeral attributes outside Ldap: no
        +Secure interprocess communications:   yes
        +TimeZone:                             UTC
        +IP Mode:                              ipv4
        +Default SSL digest:                   sha256

   2) zimbra-logger:                           Enabled
   3) zimbra-snmp:                             Enabled
   4) zimbra-store:                            Enabled
        +Create Admin User:                    yes
        +Admin user to create:                 admin@mailstore-1.example.com
******* +Admin Password                        UNSET
        +Anti-virus quarantine user:           virus-quarantine.mgpgruxx@mailstore-1.example.com
        +Enable automated spam training:       yes
        +Spam training user:                   spam.qgku2xsq@mailstore-1.example.com
        +Non-spam(Ham) training user:          ham.y49bbzuis@mailstore-1.example.com
******* +SMTP host:                            UNSET
        +Web server HTTP port:                 8080
        +Web server HTTPS port:                8443
        +Web server mode:                      https
        +IMAP server port:                     7143
        +IMAP server SSL port:                 7993
        +POP server port:                      7110
        +POP server SSL port:                  7995
        +Use spell check server:               yes
        +Spell server URL:                     http://mailstore-1.example.com:7780/aspell.php
        +Enable version update checks:         TRUE
        +Enable version update notifications:  TRUE
        +Version update notification email:    admin@mailstore-1.example.com
        +Version update source email:          admin@mailstore-1.example.com
        +Install mailstore (service webapp):   yes
        +Install UI (zimbra,zimbraAdmin webapps): yes
******* +License filename:                     UNSET

   5) zimbra-spell:                            Enabled
   6) zimbra-convertd:                         Enabled
   7) Default Class of Service Configuration:
   8) Enable default backup schedule:          yes
   s) Save config to file
   x) Expand menu
   q) Quit

Address unconfigured (**) items  (? - help)</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>1</code> to display the <strong>Common Configuration</strong> submenu.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Common configuration

   1) Hostname:                                mailstore-1.example.com
** 2) Ldap master host:                        UNSET
   3) Ldap port:                               389
** 4) Ldap Admin password:                     UNSET
   5) LDAP Base DN:                            cn=zimbra
   6) Store ephemeral attributes outside Ldap: no
   7) Secure interprocess communications:      yes
   8) TimeZone:                                UTC
   9) IP Mode:                                 ipv4
  10) Default SSL digest:                      sha256</code></pre>
</div>
</div>
<div class="paragraph">
<p>The mailbox server hostname is displayed.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You must change the LDAP master host name and password to be the
values configured on the LDAP server.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Type <code>2</code>, press <em>Enter</em>, and type the LDAP host name.
(<strong>ldap-1.example.com</strong> in this example.)</p>
</li>
<li>
<p>Type <code>4</code>, press <em>Enter</em>, and type the LDAP password.<br>
To obtain the LDAP password, you will need to log on to the
LDAP server as the <code>zimbra</code> user, and run the following command:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="bash">zmlocalconfig -s zimbra_ldap_password</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you set these values, the server immediately contacts the LDAP
server. If it cannot contact the server, you cannot proceed.</p>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>8</code> to set the correct time zone.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>1 Africa/Algiers
.
.
.
94 Europe/London
.
.
.
109 Pacific/Tongatapu
110 UTC
Enter the number for the local timezone: [110] 94</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the Main menu.</p>
</li>
<li>
<p>From the Main menu, type <code>4</code> for <strong>zimbra-store</strong> to view the
<strong>Store configuration</strong> settings.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Store configuration

   1) Status:                                  Enabled
   2) Create Admin User:                       yes
   3) Admin user to create:                    admin@mailstore-1.example.com
** 4) Admin Password                           UNSET
   5) Anti-virus quarantine user:              virus-quarantine.orulkdewtz@mailstore-1.example.com
   6) Enable automated spam training:          yes
   7) Spam training user:                      spam.udbnonsavi@mailstore-1.example.com
   8) Non-spam(Ham) training user:             ham.3ptgqja0f@mailstore-1.example.com
** 9) SMTP host:                               UNSET
  10) Web server HTTP port:                    8080
  11) Web server HTTPS port:                   8443
  12) HTTP proxy port:                         80
  13) HTTPS proxy port:                        443
  14) Web server mode:                         https
  15) IMAP server port:                        7143
  16) IMAP server SSL port:                    7993
  17) IMAP proxy port:                         143
  18) IMAP SSL proxy port:                     993
  19) POP server port:                         7110
  20) POP server SSL port:                     7995
  21) POP proxy port:                          110
  22) POP SSL proxy port:                      995
  23) Use spell check server:                  yes
  24) Spell server URL:                        http://mailstore-1.example.com:7780/aspell.php
  25) Configure for use with mail proxy:       TRUE
  26) Configure for use with web proxy:        TRUE
  27) Enable version update checks:            TRUE
  28) Enable version update notifications:     TRUE
  29) Version update notification email:       admin@mailstore-1.example.com
  30) Version update source email:             admin@mailstore-1.example.com
  31) Install mailstore (service webapp):      yes
  32) Install UI (zimbra,zimbraAdmin webapps): yes
**33) License filename:                        UNSET

Select, or 'r' for previous menu [r]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>4</code> and set the password for the administrator account.
The password is case sensitive and must be a minimum of six
characters.  During the install process, the admin account is
provisioned on the mailbox store server. You log on to the
administration console with this password.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>By default, the domain name portions of the email addresses for the
Admin user, Anti-virus quarantine user, Spam training user and Non-spam(Ham)
training user, are set to be the zimbra mailstore server address.
You may want to change these to be the Zimbra Collaboration primary domain address
instead.  (<strong>example.com</strong> in this example)</em>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Type the corresponding number to set the <code>SMTP host</code>.  This is the
mta-server host name.</p>
</li>
<li>
<p>Type the corresponding number if you want to change the default
<code>Web server mode</code>. The communication protocol options are
HTTP, HTTPS, mixed, both or redirect.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><strong>Mixed</strong> mode uses HTTPS for logging in and HTTP for normal session
traffic</p>
</li>
<li>
<p><strong>Both</strong> mode means that an HTTP session stays HTTP, including during
the login phase, and an HTTPS session remains HTTPS throughout,
including the login phase.</p>
</li>
<li>
<p><strong>Redirect</strong> mode redirects any users connecting via HTTP to an HTTPS
connection.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All modes use SSL encryption for back-end administrative traffic.</p>
</div>
</div>
</div>
</li>
<li>
<p>If you are configuring proxy servers, type the corresponding number
   to enable the servers. When you enable these, the mail server port
   and proxy port numbers are automatically changed.
See <a href="#_configuration_during_installation">Configuration during installation</a>.</p>
</li>
<li>
<p>If you install the <strong>Zimbra-spell</strong> package, it should be installed
on every mailstore.<br>
The hostname portion of the http address for each should be the hostname
of the mailstore server it is installed on.</p>
</li>
<li>
<p><code>Enable version update checks</code> and <code>Enable version update notifications</code>
are set to TRUE. Zimbra Collaboration automatically checks for the latest
Zimbra Collaboration software updates and notifies the account that is
configured in Version update notification email.
You can modify this later from the administration console.</p>
</li>
<li>
<p>If the <strong>Zimbra-proxy</strong> package is not installed on the mailbox
server, two menu options are displayed so you can preconfigure the
mailbox server for use with the zimbra proxy server:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Configure for use with mail proxy</p>
</li>
<li>
<p>Configure for use with web proxy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Set either or both of these to TRUE if you are going to set up
Zimbra-proxy.<br>
The Zimbra-proxy ports display in the menu when these are set
to TRUE.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>(Network Edition only)</strong>.  Type the corresponding menu
number to install the Zimbra license file.<br>
Enter the location of the Zimbra license file. For example, if you
saved the license file to the tmp directory,
you would type <code>/tmp/ZCSLicense.xml</code>.<br>
You cannot proceed without a license.</p>
</li>
<li>
<p>Configure the mailstore and webapp services either on a single
server or in a split server configuration.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>To install mailstore server only, set
<code>Install UI (zimbra,zimbraAdmin webapps)</code> value to <code>no</code>,
 which will exclude the web services.</p>
</li>
<li>
<p>To install UI server only, set the
<code>Install mailstore (service webapp)</code> value to <code>no</code>,
which will exclude mailstore services.</p>
</li>
<li>
<p>To install both the mailstore and UI services on the same server,
confirm the values for<br>
<code>Install mailstore (service webapp)</code> and<br>
<code>Install UI (zimbra,zimbraAdmin webapps)</code><br>
are both set to <code>yes</code>.  The default is <code>yes</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See the release notes for additional configuration information
for installing a split node environment.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the Main menu.</p>
</li>
<li>
<p>Review the Default Class of Service Configuration settings.
If you want to change the COS default configuration of
these features, type the number for the
<code>Default Class of Service Configuration</code> Then type the
corresponding number for the feature to be enabled or disabled.<br>
The default COS settings are adjusted to match.</p>
</li>
<li>
<p>When the mailbox server is configured, return to the Main menu
and type <code>a</code> to apply the configuration changes.<br>
Press <em>Enter</em> to save the configuration data.</p>
</li>
<li>
<p>When Save Configuration data to file appears, type <code>Yes</code> and press <em>Enter</em>.</p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>Save configuration data to a file? [Yes]</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The next request asks where to save the files. To accept the
default, press <em>Enter</em>. To save the files to another directory, enter the
directory and then press Enter</p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>Save config in file: [/opt/zimbra/config.16039]
Saving config in /opt/zimbra/config.16039...done.</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>When <code>The system will be modified - continue?</code> appears, type <code>Yes</code> and
press <em>Enter</em>.</p>
<div class="paragraph">
<p>The server is modified. Installing all the components and configuring
the server can take several minutes. This includes installing SSL
certificates, setting passwords, setting ports, installing skins
and common zimlets, setting time zone preferences, backup schedules
and starting the servers, among other processes.</p>
</div>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>The system will be modified - continue? [No] y
Operations logged to /tmp/zmsetup.20160711-234517.log
Setting local config values...done.
.
.
.
Configuration complete - press return to exit</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>When <code>Configuration complete - press return to exit</code> displays,
press <em>Enter</em></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation of the mailbox server is complete.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_zimbra_mta_on_a_server">Installing Zimbra MTA on a Server</h3>
<div class="paragraph">
<p>When Zimbra-mta is installed, the LDAP host name and the
Zimbra LDAP password must be known to the MTA server.
If not, the MTA cannot contact the LDAP server and is not able to
complete the installation.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in
<a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open an SSH session to the MTA server, log on to the server as
<strong>root</strong>, and unpack the ZCS software.</p>
</li>
<li>
<p>Type <code>y</code> and press <em>Enter</em> to install the <strong>zimbra-mta</strong> and
<strong>zimbra-dnscache</strong> packages.  The other packages should be marked <code>n</code>.
In the following screen shot example, the packages to be installed are emphasized.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>If SNMP is being used, the SNMP package is installed on every
Zimbra server. Mark</em> <code>y</code>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Select the packages to install

Install zimbra-ldap [Y] n

Install zimbra-logger [Y] n

Install zimbra-mta [Y] y

Install zimbra-dnscache [Y] y

Install zimbra-snmp [Y] n

Install zimbra-store [Y] n

Install zimbra-apache [Y] n

Install zimbra-spell [Y] n

Install zimbra-memcached [Y] n

Install zimbra-proxy [Y] n
Checking required space for zimbra-core

Installing:
    zimbra-core
    zimbra-mta
    zimbra-dnscache

The system will be modified.  Continue? [N] y
Installing packages</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to modify the system. The selected
packages are installed on the server.</p>
<div class="paragraph">
<p>The Main menu displays the default entries for the Zimbra component you
are installing.<br>
To expand the menu to see the configuration values, type <code>x</code> and press <em>Enter</em>.<br>
The main menu expands to display configuration details for the package
being installed.</p>
</div>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Values that require further configuration are marked with asterisks (<code>*</code>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>To navigate the Main menu, select the menu item to change. You can
modify any of the values. See the section
<a href="#main_menu_options">Main Menu options</a>
for a description of the Main menu.</p>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Main menu

   1) Common Configuration:
        +Hostname:                             mta-1.example.com
******* +Ldap master host:                     UNSET
        +Ldap port:                            389
******* +Ldap Admin password:                  UNSET
        +LDAP Base DN:                         cn=zimbra
        +Store ephemeral attributes outside Ldap: no
        +Secure interprocess communications:   yes
        +TimeZone:                             Africa/Monrovia
        +IP Mode:                              ipv4
        +Default SSL digest:                   sha256

   2) zimbra-mta:                              Enabled
        +Enable Spamassassin:                  yes
        +Enable Clam AV:                       yes
        +Enable OpenDKIM:                      yes
        +Notification address for AV alerts:   admin@mta-1.example.com
******* +Bind password for postfix ldap user:  UNSET
******* +Bind password for amavis ldap user:   UNSET

   3) zimbra-dnscache:                         Enabled
   s) Save config to file
   x) Expand menu
   q) Quit

Address unconfigured (**) items  (? - help)</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>1</code> to display the <strong>Common Configuration</strong> submenu.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Common configuration

   1) Hostname:                                mta-1.example.com
** 2) Ldap master host:                        UNSET
   3) Ldap port:                               389
** 4) Ldap Admin password:                     UNSET
   5) LDAP Base DN:                            cn=zimbra
   6) Store ephemeral attributes outside Ldap: no
   7) Secure interprocess communications:      yes
   8) TimeZone:                                Africa/Monrovia
   9) IP Mode:                                 ipv4
  10) Default SSL digest:                      sha256</code></pre>
</div>
</div>
<div class="paragraph">
<p>The mta server hostname is displayed.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You must change the LDAP master host name and password to be the
values configured on the LDAP server.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Type <code>2</code>, press <em>Enter</em>, and type the LDAP host name.
(<strong>ldap-1.example.com</strong> in this example.)</p>
</li>
<li>
<p>Type <code>4</code>, press <em>Enter</em>, and type the LDAP password.<br>
To obtain the LDAP password, you will need to log on to the
LDAP server as the <code>zimbra</code> user, and run the following command:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="bash">zmlocalconfig -s zimbra_ldap_password</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you set these values, the server immediately contacts the LDAP
server. If it cannot contact the server, you cannot proceed.</p>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>8</code> to set the correct time zone.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>1 Africa/Algiers
.
.
.
94 Europe/London
.
.
.
109 Pacific/Tongatapu
110 UTC
Enter the number for the local timezone: [110] 94</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the <strong>Main</strong> menu.</p>
</li>
<li>
<p>Type <code>2</code> to got to the <strong>Mta configuration</strong> menu.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Mta configuration

   1) Status:                                  Enabled
   2) Enable Spamassassin:                     yes
   3) Enable Clam AV:                          yes
   4) Enable OpenDKIM:                         yes
   5) Notification address for AV alerts:      admin@mta-1.example.com
** 6) Bind password for postfix ldap user:     UNSET
** 7) Bind password for amavis ldap user:      UNSET

Select, or 'r' for previous menu [r]</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>You can change the <code>Notification address for AV alerts</code>.  This should be
an address on the domain, such as the admin address. (<strong>admin@example.com</strong>)</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you enter an address other than the admin address, you must provision an
account with that address after the installation is complete.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Select the menu number for <code>Bind password for postfix ldap user</code>.<br>
You must use the same value for this as is configured on the
LDAP master server.</p>
</li>
<li>
<p>Select the menu number for <code>Bind password for amavis ldap user</code>.<br>
You must use the same value for this as is configured on the
LDAP master server.</p>
</li>
<li>
<p>Type <code>r</code> to return to the <strong>Main</strong> menu.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are installing the Zimbra-proxy package, see
<a href="#_installing_zimbra_proxy">Installing Zimbra Proxy</a> before continuing.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>When the MTA server is configured, return to the Main menu and
type <code>a</code> to apply the configuration changes.<br>
Press <em>Enter</em> to save the configuration data.</p>
</li>
<li>
<p>When <code>Save configuration data to file</code> appears,<br>
type <code>Yes</code> and press <em>Enter</em>.</p>
</li>
<li>
<p>The next request asks where to save the file.  To accept the default,
press <em>Enter</em>. To save the files to another directory, enter the
directory and then press <em>Enter</em>.</p>
</li>
<li>
<p>When <code>The system will be modified - continue?</code> appears,<br>
type <code>Yes</code> and press <em>Enter</em>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The server is modified. Installing all the components and configuring
the MTA server can take a few minutes. This can include setting
passwords, setting ports, setting time zone preferences, and starting
the server, among other processes.</p>
</div>
</div>
</div>
</li>
<li>
<p>When <code>Installation complete - press return to exit</code> displays,
press <em>Enter</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation of the MTA server is complete.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_zimbra_proxy">Installing Zimbra Proxy</h3>
<div class="paragraph">
<p>Installing the <code>zimbra-proxy</code> package is optional, but recommended for
scalable multi-server deployment. Zimbra proxy is normally installed
on the MTA server or can be configured on a separate server. Zimbra
proxy can be installed on more than one server. At least one instance
of <code>zimbra-memcached</code> must be installed to cache the route information
(upstream mailbox server for each endclient).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you are moving from a non-proxy environment (for
example, single server to multi-server environment), additional steps
are necessary for the mailbox server and proxy configuration. After
you complete the proxy installation, reconfigure the mailbox server as
described in the Zimbra Collaboration Administration Guide, <em>Zimbra Proxy</em> chapter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Memcached is shipped as the caching layer to cache LDAP
lookups. Memcache does not have authentication and security features
so the servers should have a firewall set up appropriately. The
default port is <code>11211</code> and is controlled by the
<code>zimbraMemcacheBindPort</code> conf setting.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_installing_on_the_mta_server">Installing on the MTA Server</h4>
<div class="paragraph">
<p>If you are installing <code>zimbra-proxy</code> on the MTA server, select the
<code>zimbra-proxy</code> package and the <code>zimbra-memcached</code> package. Follow the
installation process for <a href="#_installing_zimbra_mta_on_a_server">Installing Zimbra MTA on a Server</a>.
After Step 11, configure the Zimbra-proxy.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the MTA server, select to install the <code>zimbra-proxy</code> and
<code>zimbra-memcached</code> packages, type <code>y</code> and press <strong>Enter</strong> to install the selected
package.</p>
</li>
<li>
<p>The <em>Main</em> menu displays the default entries for the Zimbra component
you are installing. Select <strong>Proxy Configuration</strong> menu. You can modify
any of the values.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <strong>Bind password for Nginx ldap user</strong> was configured when the LDAP
server was installed. This is set when the MTA connected to the LDAP
server. This is not used unless the Kerberos5 authenticating mechanism
is enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Setting the password even though GSSAPI auth/proxy
is not set up does not cause any issues.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>Proxy configuration

      1) Status:                                Enabled
      2) Enable POP/IMAP Proxy:                 TRUE
      3) IMAP proxy port:                       143
      4) IMAP SSL proxy port:                   993
      5) POP proxy port:                        110
      6) POP SSL proxy port:                    995
      7) Bind password for nginx ldap user:     set
      8) Enable HTTP[S] Proxy:                  TRUE
      9) HTTP proxy port:                       80
      10) HTTPS proxy port:                     443
      11) Proxy server mode:                    https</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Return to <a href="#_installing_zimbra_mta_on_a_server">Installing Zimbra MTA on a Server</a>, step 12,
to continue the MTA server installation.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_installing_on_a_separate_server">Installing on a separate server</h4>
<div class="paragraph">
<p>The LDAP host name and the Zimbra LDAP password must be known to the
proxy server. If not, the proxy server cannot contact the LDAP server
and the installation fails.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in <a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open a SSH session to the server, log on to the server as
root, and unpack the Zimbra software.</p>
</li>
<li>
<p>Select to install the <code>zimbra-proxy</code> package and the <code>zimbra-memcached</code>
package. The other packages should be marked <code>N</code>. If you have not
installed <code>zimbra-proxy</code> on another server, you must have at least one
instance of <code>zimbra-memcached</code> installed to cache the data for NGINX, as
shown in the following screen shot example.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If SNMP is used, the <code>zimbra-snmp</code> package must also be
installed.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Select the packages to install

Install zimbra-ldap [Y] N
Install zimbra-logger [Y] N
Install zimbra-mta [Y] N
Install zimbra-dnscache [N] N
Install zimbra-snmp [Y] N
Install zimbra-store [Y] N
Install zimbra-apache [Y] N
Install zimbra-spell [Y] N
Install zimbra-convertd [N] N
Install zimbra-memcached [N] <strong>Y</strong>
Install zimbra-proxy [N] <strong>Y</strong>
Install zimbra-archiving [N] N
Installing:
    zimbra-memcached
    zimbra-proxy

This system will be modified. Continue [N] <strong>Y</strong>
Configuration section</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to install the selected package.</p>
</li>
<li>
<p>The <em>Main</em> menu displays. Type <code>1</code> and press <em>Enter</em> to go to the <strong>Common
Configuration</strong> menu.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The mailbox server hostname is displayed. You must change the LDAP
master host name and password to be the values configured on the LDAP
server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type <code>2</code>, press <em>Enter</em>, and type the LDAP host
name. (<code>ldap-1.example.com</code>, in this example.)</p>
</li>
<li>
<p>Type <code>4</code>, press <em>Enter</em>, and type the LDAP password.</p>
<div class="paragraph">
<p>After you set these values, the server immediately contacts the LDAP
server. If it cannot contact the server, you cannot proceed.</p>
</div>
</li>
<li>
<p>Type 7 to set the correct time zone</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the Main menu.</p>
</li>
<li>
<p>Type <code>2</code> to select <code>zimbra-proxy</code>.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Main menu

1) Common Configuration:
        +Hostname:                              localhost
        +Ldap master host:                      ldap-1.example.com
        +Ldap port:                             389
        +Ldap Admin password:                   set
        +LDAP Base DN:                          cn=zimbra
        +Store ephemeral attributes outside Ldap: no
        +Secure interprocess communications:    yes
        +TimeZone:                              (GMT-08.00) Pacific Time (US &amp; Canada)
        +IP Mode:                               ipv4
        +Default SSL digest:                    sha256

2) zimbra-proxy:                              Enabled
        +Enable POP/IMAP Proxy:                 TRUE
        +IMAP server port:                      7143
        +IMAP server SSL port:                  7993
        +IMAP proxy port:                       143
        +IMAP SSL proxy port:                   993
        +POP server port:                       7110
        +POP server SSL port:                   7995
        +POP proxy port:                        110
        +POP SSL proxy port:                    995
******* +Bind password for nginx ldap user:     Not Verified
        +Enable HTTP[S] Proxy:                  TRUE
      	+Web server HTTP port:				  	8080
		+Web server HTTPS port:				  	8443
		+HTTP proxy port: 					  	80
		+HTTPS proxy port:					  	443
		+Proxy server mode:					  	https

3) Enable default backup schedule:			  	yes
s) Save config to file
x) Expand menu
q) Quit

Select, or 'r' for previous menu [r] 2</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The <strong>Proxy Configuration</strong> menu displays. You can modify any of the
values.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <strong>Bind password for Nginx ldap user</strong> is configured when the LDAP
server was installed. This is set when the MTA connected to the LDAP
server. This is not used unless the Kerberos5 authenticating mechanism
is enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Setting the password even though GSSAPI auth/proxy is not set up
does not cause any issues.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>Proxy configuration

   1) Status:                                  Enabled
   2) Enable POP/IMAP Proxy:                   TRUE
   3) IMAP server port:                        7143
   4) IMAP server SSL port:                    7993
   5) IMAP proxy port:                         143
   6) IMAP SSL proxy port:                     993
   7) POP server port:                         7110
   8) POP server SSL port:                     7995
   9) POP proxy port:                          110
  10) POP SSL proxy port:                      995
  11) Bind password for nginx ldap user:       set
  12) Enable HTTP[S] Proxy:                    TRUE
  13) Web server HTTP port:                    8080
  14) Web server HTTPS port:                   8443
  15) HTTP proxy port:                         80
  16) HTTPS proxy port:                        443
  17) Proxy server mode:                       https</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the <em>Main</em> menu.</p>
</li>
<li>
<p>When the proxy server is configured, return to the <em>Main</em> menu and
type <code>a</code> to apply the configuration changes. Press <em>Enter</em> to save the
configuration data.</p>
</li>
<li>
<p>When <strong>Save Configuration data to a file</strong> appears, press <em>Enter</em>.</p>
</li>
<li>
<p>The next request asks where to save the files. To accept the
default, press <em>Enter</em>. To save the files to another directory, enter
the directory and then press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>The system will be modified - continue?</strong> appears, type <code>y</code> and
press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>Installation complete - press return to exit</strong> displays, press
<em>Enter</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation of the proxy server is complete.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_zimbra_imapd">Installing Zimbra IMAPD</h3>
<div class="paragraph">
<p>Installing the new <code>zimbra-imapd</code> package is optional, and is available
as an unsupported beta if you want to test this beta product targeted
for scalable multi-server deployment. Zimbra imapd is normally installed
on the mailbox server or can be configured on a separate server. Zimbra
imapd can be installed on more than one server.</p>
</div>
<div class="sect3">
<h4 id="_installing_on_the_mailbox_server">Installing on the Mailbox Server</h4>
<div class="paragraph">
<p>If you are installing <code>zimbra-imapd</code> on the mailbox server, select the
<code>zimbra-imapd</code> package. Follow the
installation process for <a href="#_install_zimbra_mailbox_services">Install Zimbra Mailbox Services</a>.
After Step 11, configure the Zimbra-imapd.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the mailbox server, select to install the <code>zimbra-imapd</code> packages,
type <code>y</code> and press <strong>Enter</strong> to install the selected package.</p>
</li>
<li>
<p>The <em>Main</em> menu displays the default entries for the Zimbra component
you are installing. Select <strong>IMAPD Configuration</strong> menu. You can modify
any of the values.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>IMAPD configuration

   1) Status:                                  Enabled
   2) Add to upstream IMAP Servers?:           no

Select, or 'r' for previous menu [r] 2</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type <code>1</code> to disable the IMAPD process on this machine.</p>
</li>
<li>
<p>Type <code>2</code> to add the server to the upstream IMAP Servers list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Return to <a href="#_install_zimbra_mailbox_services">Install Zimbra Mailbox Services</a>, step 12,
to continue the server installation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_installing_on_a_separate_server_2">Installing on a separate server</h4>
<div class="paragraph">
<p>The LDAP host name and the Zimbra LDAP password must be known to the
imapd server. If not, the imapd server cannot contact the LDAP server
and the installation fails.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in <a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open a SSH session to the server, log on to the server as
root, and unpack the Zimbra software.</p>
</li>
<li>
<p>Select to install the <code>zimbra-imapd</code> package as
shown in the following screen shot example.
The other packages should be marked <code>N</code>.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If SNMP is used, the <code>zimbra-snmp</code> package must also be
installed.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Select the packages to install

Install zimbra-ldap [Y] N
Install zimbra-logger [Y] N
Install zimbra-mta [Y] N
Install zimbra-dnscache [N] N
Install zimbra-snmp [Y] N
Install zimbra-store [Y] N
Install zimbra-apache [Y] N
Install zimbra-spell [Y] N
Install zimbra-convertd [N] N
Install zimbra-memcached [N] N
Install zimbra-proxy [N] N
Install zimbra-archiving [N] N
Install zimbra-imapd [N] <strong>Y</strong>
Checking required space for zimbra-core

Installing:
    zimbra-core
    zimbra-imapd

This system will be modified. Continue [N] <strong>Y</strong>
Configuration section</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to install the selected package.</p>
</li>
<li>
<p>The <em>Main</em> menu displays. Type <code>1</code> and press <em>Enter</em> to go to the <strong>Common
Configuration</strong> menu.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The mailbox server hostname is displayed. You must change the LDAP
master host name and password to be the values configured on the LDAP
server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type <code>2</code>, press <em>Enter</em>, and type the LDAP host
name. (<code>ldap-1.example.com</code>, in this example.)</p>
</li>
<li>
<p>Type <code>4</code>, press <em>Enter</em>, and type the LDAP password.</p>
<div class="paragraph">
<p>After you set these values, the server immediately contacts the LDAP
server. If it cannot contact the server, you cannot proceed.</p>
</div>
</li>
<li>
<p>Type 7 to set the correct time zone</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the Main menu.</p>
</li>
<li>
<p>Type <code>2</code> to select <code>zimbra-imapd</code>.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Main menu

1) Common Configuration:
        +Hostname:                              localhost
        +Ldap master host:                      ldap-1.example.com
        +Ldap port:                             389
        +Ldap Admin password:                   set
        +LDAP Base DN:                          cn=zimbra
        +Store ephemeral attributes outside Ldap: no
        +Secure interprocess communications:    yes
        +TimeZone:                              (GMT-08.00) Pacific Time (US &amp; Canada)
        +IP Mode:                               ipv4
        +Default SSL digest:                    sha256

2) zimbra-imapd:                              Enabled
s) Save config to file
x) Expand menu
q) Quit

Select, or 'r' for previous menu [r] 2</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The <strong>IMAPD Configuration</strong> menu displays. You can modify any of the
values.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>By default the IMAPD service is enabled when it is selected for installation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
No IMAP sessions will be routed to the IMAPD server unless it is added to the multi-valued
<code>zimbraReverseProxyUpstreamImapServers</code> LDAP attribute.  This can be done using the <code>zmprov</code> command
at any time after the server is installed and does not have to be done during installation.
After adding the new IMAPD node to <code>zimbraReverseProxyUpstreamImapServers</code>, the globalconfig LDAP
cache must be flushed on all servers acting as lookup targets in order for them to pick up the change.
This can be done with the command <code>zmprov flushCache -a config</code>. To verify that this has taken effect,
make sure that the new IMAPD node is listed in the output of <code>zmprov gacf zimbraReverseProxyUpstreamImapServers</code>,
when run from a lookup target server.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>IMAPD configuration

   1) Status:                                  Enabled
   2) Add to upstream IMAP Servers?:           no</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the <em>Main</em> menu.</p>
</li>
<li>
<p>When the imapd server is configured, return to the <em>Main</em> menu and
type <code>a</code> to apply the configuration changes. Press <em>Enter</em> to save the
configuration data.</p>
</li>
<li>
<p>When <strong>Save Configuration data to a file</strong> appears, press <em>Enter</em>.</p>
</li>
<li>
<p>The next request asks where to save the files. To accept the
default, press <em>Enter</em>. To save the files to another directory, enter
the directory and then press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>The system will be modified - continue?</strong> appears, type <code>y</code> and
press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>Installation complete - press return to exit</strong> displays, press
<em>Enter</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation of the imapd server is complete.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_zimbra_archiving_package">Installing zimbra-archiving Package</h3>
<div class="paragraph">
<p>Installing the <code>zimbra-archiving</code> package is optional. This package
enables Zimbra Collaboration Archiving and Discovery, which offers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Archiving, the ability to archive messages that were delivered to or
sent by ZCS.</p>
</li>
<li>
<p>Discovery, the ability to search across mailboxes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The prerequisite to enabling archiving and discovery is the
installation and configuration of the <code>zimbra-archiving</code> package on at
least one mailbox server. The installation of this package provides
the ZCS discovery (also known as cross mailbox) search tool and sets
the attributes that allow archiving to be enabled on the Zimbra MTAs.</p>
</div>
<div class="paragraph">
<p>To enable archiving and discovery, select the <code>zimbra-store</code> and <code>zimbra-archiving</code>
packages during your installation process. The <code>zimbra-core</code>
package is installed by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Select the packages to install
Install zimbra-ldap [Y] N
Install zimbra-logger [Y] N
Install zimbra-mta [Y] N
Install zimbra-dnscache [N] N
Install zimbra-snmp [Y] N
Install zimbra-store [Y] <strong>Y</strong>
Install zimbra-apache [Y] N
Install zimbra-spell [Y] N
Install zimbra-convertd [N] N
Install zimbra-memcached [N] N
Install zimbra-proxy [N] N
Install zimbra-archiving [N] <strong>Y</strong>
Install zimbra-chat [Y] N
Install zimbra-drive [Y] N
Install zimbra-imapd [Y] N

Installing:
    zimbra-core
    zimbra-store
    zimbra-archiving
This system will be modified. Continue [N] <strong>Y</strong></pre>
</div>
</div>
<div class="paragraph">
<p>See the <em>Zimbra Archiving and Discovery</em> chapter in the
Zimbra Collaboration Administration Guide for more information about configuring and
archiving.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_zimbra_snmp_package">Installing the zimbra-SNMP Package</h3>
<div class="paragraph">
<p>Installing the <code>zimbra-snmp</code> package is optional, but if you use SNMP
monitoring, this package should be installed on each Zimbra
server.</p>
</div>
<div class="paragraph">
<p>In the <em>Main</em> menu, select <code>zimbra-snmp</code> to make changes to the
default values. The following question is asked for SNMP configuration.</p>
</div>
<div class="paragraph">
<p>Configure whether to be notified by SNMP or SMTP. The default is
<strong>No</strong>. If you enter yes, you must enter additional information.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For SNMP type the SNMP Trap host name.</p>
</li>
<li>
<p>For SMTP type the SMTP source email address and destination email
address.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>8) zimbra-snmp:                             Enabled
   +Enable SNMP notifications:              yes
   +SNMP Trap hostname:                     example.com
   +Enable SMTP notifications:              yes
   +SMTP Source email address:              admin@example.com
   +SMTP Destination email address:         admin@example.com</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_final_set_up">Final Set-Up</h3>
<div class="paragraph">
<p>After the Zimbra servers are configured in a multi-node configuration,
the following functions must be configured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In order for remote management and postfix queue management, the ssh
keys must be manually populated on each server. See
<a href="#_set_up_the_ssh_keys">Set Up the SSH Keys</a>.</p>
</li>
<li>
<p>If logger is installed, set up the syslog configuration files on
each server to enable server statistics to display on the
administration console, and then enable the logger monitor host. The
server statistics includes information about the message count,
message volume, and anti-spam and anti-virus activity. See
<a href="#_enabling_server_statistics_display">Enabling Server Statistics Display</a>.</p>
</li>
<li>
<p>Zimbra Collaboration ships a default <code>zimbra</code> user with a disabled
password. ZCS requires access to this account via ssh public key
authentication. On most operating systems this combination is okay,
but if you have modified pam rules to disallow any ssh access to
disabled accounts then you must define a password for the <code>zimbra</code>
UNIX account. This will allow ssh key authentication for checking
remote queues. See
<a href="https://wiki.zimbra.com/wiki/Mail_Queue_Monitoring">Mail queue
monitoring</a>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_set_up_the_ssh_keys">Set Up the SSH Keys</h4>
<div class="paragraph">
<p>To populate the SSH keys, perform the following as the <code>zimbra</code>
user (<code>sudo su - zimbra</code>) on each server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmupdateauthkeys</pre>
</div>
</div>
<div class="paragraph">
<p>The key is updated  in <code>/opt/zimbra/.ssh/authorized_keys</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_server_statistics_display">Enabling Server Statistics Display</h4>
<div class="paragraph">
<p>In order for the server statistics to display on the administration
console, the syslog configuration files must be modified.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Zimbra Collaboration supports the default syslog of a
supported operating system. Depending on your operating system, the
steps contained in this section might not be correct. See your
operating system documentation for specific information about how to
enable syslog.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On each server, as <code>root</code>, type
<code>/opt/zimbra/libexec/zmsyslogsetup</code>. This enables the server to
display statistics.</p>
</li>
<li>
<p>On the logger monitor host, you must enable either <strong>syslog</strong> or <strong>rsyslog</strong>
to log statistics from remote machines:</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For <strong>syslog</strong>:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit the <code>/etc/sysconfig/syslog</code> file, add <code>-r</code> to the <code>SYSLOGD_OPTIONS</code>
setting, <code>SYSLOGD_options="-r -m 0"</code>.</p>
</li>
<li>
<p>Stop the syslog daemon. Type <code>/etc/init.d/syslog</code> stop.</p>
</li>
<li>
<p>Start the syslog daemon. Type <code>/etc/init.d/syslog start</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For <strong>syslog</strong> on <em>Debian</em> or <em>Ubuntu</em>:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit the <code>/etc/default/syslogd</code> file, add <code>-r</code> to the <code>SYSLOGD_OPTIONS</code>
setting, <code>SYSLOGD_options="-r -m 0"</code></p>
</li>
<li>
<p>Stop the syslog daemon. Type <code>/etc/init.d/sysklogd stop</code>.</p>
</li>
<li>
<p>Start the syslog daemon. Type <code>/etc/init.d/sysklogd</code> start.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For <strong>rsyslog</strong>:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Uncomment the following lines in <code>/etc/rsyslog.conf</code></p>
<div class="listingblock">
<div class="content">
<pre>$modload imudp
$UDPServerRun 514</pre>
</div>
</div>
</li>
<li>
<p>Restart rsyslog</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For <strong>rsyslog</strong> on <em>RHEL</em> or <em>CentOS</em>:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Uncomment the following lines in <code>/etc/rsyslog.conf</code>.</p>
<div class="listingblock">
<div class="content">
<pre># Provides UDP syslog reception
#$ModLoad imudp
#$UDPServerRun 514

# Provides TCP syslog reception
#$ModLoad imtcp
#$InputTCPServerRun 514</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For <strong>syslog-ng</strong> on <code>SuSE</code>:</p>
</div>
<div class="paragraph">
<p>Uncomment the following from <code>/etc/syslog-ng/syslog-ng.conf</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#
# uncomment to process log messages from network:
#
#udp(ip("0.0.0.0") port(514));</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_spam_ham_training_on_mta_servers">Spam/Ham Training on MTA servers</h4>
<div class="paragraph">
<p>New installs of ZCS limit spam/ham training to the first MTA
installed. If you uninstall or move this MTA, you will need to enable
spam/ham training on another MTA, as one host should have this enabled
to run <code>zmtrainsa --cleanup</code>. To do this, set <code>zmlocalconfig -e
zmtrainsa_cleanup_host=TRUE</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verifying_server_configuration">Verifying Server Configuration</h3>
<div class="paragraph">
<p>When <strong>Configuration complete - press return to exit</strong> is displayed, the
installation is finished and the server has been started. Before going
to the next server, you should verify that the server is running.</p>
</div>
<div class="paragraph">
<p>Use the CLI command, <code>zmcontrol status</code>, to verify that each server is
running.  Perform the following on each server in your Zimbra Collaboration
environment.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log on as <code>root</code>.</p>
</li>
<li>
<p>Type <code>su - zimbra</code>.</p>
</li>
<li>
<p>Type <code>zmcontrol status</code>. The services status information is
displayed. All services should be running.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If services are not started, you can type <code>zmcontrol start</code>. See
the CLI command appendix in the Zimbra Collaboration Administration Guide for more
<code>zmcontrol</code> commands.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_logging_on_to_the_administration_console">Logging on to the Administration Console</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To log on to the administration console, open your browser, type the
administration console URL and log on to the console. The
administration console URL is entered as:</p>
<div class="ulist">
<ul>
<li>
<p>In case of Mailbox servers containing backend mailstore and UI
services together (mailstore server + UI server), you can access the
admin console directly using
<strong>https://&lt;mailstore-hostname&gt;:&lt;zimbraAdminPort&gt;</strong>.
The default value of <code>zimbraAdminPort</code> is <code>7071</code>.</p>
</li>
<li>
<p>In case of a deployment having even a single mailbox server running
in Web Application server split mode, the admin console needs to be
accessed strictly through the proxy using
<strong>https://&lt;proxy-hostname&gt;:&lt;zimbraAdminProxyPort&gt;</strong>
after switching <code>zimbraReverseProxyAdminEnabled</code> to <code>TRUE</code> and
restarting the proxy.
The default value of <code>zimbraAdminProxyPort</code> is <code>9071</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The administration console address must be typed with <code>https</code>, even if you configured only <code>http</code>.</p>
</li>
<li>
<p>The first time you log on, a certificate authority (CA) alert may be
displayed. Click <strong>Accept this certificate permanently</strong> to accept the
certificate and be able connect to the Zimbra administration console.
Then click <strong>OK</strong>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Enter the admin user name and password configured during the
installation process. Enter the user name as <strong>admin@example.com</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_post_installation_tasks">Post Installation Tasks</h3>
<div class="paragraph">
<p>Once Zimbra Collaboration is installed, if you installed the
Zimbra license, you can log on to the administration console and
configure additional domains, create Classes of Service, and provision
accounts. See the Zimbra Collaboration Administration Guide.</p>
</div>
<div class="sect3">
<h4 id="_defining_classes_of_service">Defining Classes of Service</h4>
<div class="paragraph">
<p>A default <em>Class of Service</em> (COS) is automatically created during the
installation of Zimbra software. The COS controls mailbox quotas,
message lifetime, password restrictions, attachment blocking and
server pools. You can modify the default COS and create new COSs to
assign to accounts according to your group management policies.</p>
</div>
<div class="paragraph">
<p>In an environment with multiple mailbox servers, COS is used to assign
the new accounts to a mailbox server. The COS server pool page lists
the mailbox servers in your Zimbra environment. When you
configure the COS, select which servers to add to the server
pool. Within each pool of servers, a random algorithm assigns new
mailboxes to any available server.</p>
</div>
<div class="paragraph">
<p>To create or modify a COS, from the administration console,
click COS. If you have questions, refer to the Help section.</p>
</div>
</div>
<div class="sect3">
<h4 id="_provisioning_accounts">Provisioning Accounts</h4>
<div class="paragraph">
<p>You can configure one account at a time with the New Account Wizard or
you can create many accounts at once using the Account Migration
Wizard.</p>
</div>
<div class="sect4">
<h5 id="_configuring_one_account">Configuring One Account</h5>
<div class="paragraph">
<p>The administration console <em>New Account Wizard</em> steps you through the
account information to be completed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the administration console Navigation pane, click <strong>Accounts</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Four accounts are listed: admin account, two spam training
accounts, and a global Documents account. These accounts do not need
any additional configuration.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>New</strong>. The first page of the <strong>New Account Wizard</strong> opens.</p>
</li>
<li>
<p>Enter the account name to be used as the email address and the last
name. This the only required information to create an account.</p>
</li>
<li>
<p>You can click <strong>Finish</strong> at this point, and the account is configured with the
default COS and global features.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To configure aliases, forwarding addresses, and specific features for this
account, proceed through the dialog before you click <strong>Finish</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the accounts are provisioned, these accounts can immediately start to
send and receive emails.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_many_accounts_at_once">Configuring Many Accounts at Once</h5>
<div class="paragraph">
<p>You can provision multiple accounts at once using the <em>Account
Migration</em> tool from the administration console. The wizard guides you
through the steps to import accounts from an external directory
server, either Active Directory or an LDAP server. The wizard
downloads account information from your directory and creates the
accounts in ZCS.</p>
</div>
<div class="paragraph">
<p>Refer to the Zimbra Collaboration Administration Guide to learn more about provisioning accounts.</p>
</div>
</div>
<div class="sect4">
<h5 id="_import_the_content_of_users_mailboxes">Import the Content of Users’ Mailboxes</h5>
<div class="paragraph">
<p>Zimbra’s migration and import tools can be used to move users’ email
messages, calendars, and contacts from their old email servers to
their accounts on the Zimbra server. When the user’s files are
imported, the folder hierarchy is maintained. These tools can be
accessed from the administration console Download page and instruction
guides are available from the Administration Console Help Desk.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ephemeral_data_migration">Ephemeral Data Migration</h4>
<div class="paragraph">
<p>Versions of Zimbra prior to 8.8.3 stored
<em>ephemeral data</em> in <em>LDAP</em>.  Examples of <em>ephemeral data</em> include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>zimbraAuthTokens</code></p>
</li>
<li>
<p><code>zimbraCsrfTokenData</code></p>
</li>
<li>
<p><code>zimbraLastLogonTimestamp</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Zimbra Collaboration version 8.8.3 introduced the ability to
store <em>ephemeral data</em> in an external service such as
<a href="http://ssdb.io/">SSDB</a>. This is an optional feature; however, it
can improve <em>LDAP</em> performance and stability.</p>
</div>
<div class="paragraph">
<p>Please refer to the <em>Zimbra Collaboration Administration Guide</em> for more information.
Migration of <em>ephemeral data</em> out of <em>LDAP</em> and into <em>SSDB</em>  must be
performed after an install or upgrade has been completed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uninstalling_zimbra_collaboration">Uninstalling Zimbra Collaboration</h3>
<div class="paragraph">
<p>To uninstall servers, run the install script with the <code>-u</code> option.
Then delete the <code>/opt/zimbra</code> directory and remove the ZCS tgz file on the
servers.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change directories to the original install directory for the zcs
files.</p>
</li>
<li>
<p>Type <code>./install.sh -u</code>.</p>
</li>
<li>
<p>When <strong>Completely remove existing installation?</strong> is displayed, type
<code>Yes</code>.</p>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The Zimbra servers are stopped, the existing packages, the webapp
directories, and the <code>/opt/zimbra</code> directory are removed.</p>
</div>
</div>
</div>
</li>
<li>
<p>Delete the zcs directory, type <code>rm -rf [zcsfilename]</code>.</p>
</li>
<li>
<p>Delete the <code>zcs.tgz</code> file, type <code>rm -rf zcs.tgz</code>.</p>
</li>
<li>
<p>Additional files may need to be deleted. See
<a href="https://wiki.zimbra.com/wiki/UnInstalling_Zimbra_on_Linux">Uninstall Zimbra on Linux</a>.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multi-server-adding-mailbox">Adding a Mailbox Server to a Single Server Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the Zimbra Collaboration (ZCS) single server environment,
the LDAP, MTA, and mailbox services are on one machine. This chapter
explains how to add a new machine that is configured as a mailbox
server to a single server configuration and how to remove the mailbox
server from the single server node.</p>
</div>
<div class="sect2">
<h3 id="_setup_requirements_for_adding_a_mailbox_server">Setup Requirements For Adding a Mailbox Server</h3>
<div class="ulist">
<ul>
<li>
<p>The new machine you are adding must have the same operating system,
including the latest version and patch levels, as installed on the
single server.</p>
</li>
<li>
<p>The system clock must be configured with the same time on both
machines.</p>
</li>
<li>
<p>You must install the same version of the ZCS software
that is installed on the single server node.</p>
</li>
<li>
<p>A copy of the ZCS license needs to be added to a
directory on the new machine.</p>
</li>
<li>
<p>You are adding Zimbra Proxy to ZCS, this
should be installed on the existing single-server before you set up
the new mailbox server. See <a href="#_installing_zimbra_proxy">Installing Zimbra Proxy</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_overview_of_process">Overview of Process</h3>
<div class="ulist">
<ul>
<li>
<p>Zimbra Mailbox Server is installed on the prepared machine.</p>
</li>
<li>
<p>Customized configuration for the single-server, such as custom themes
and Zimlets are added to the new mailbox server.</p>
</li>
<li>
<p>Commercial SSL certificates are added to the new mailbox server.</p>
</li>
<li>
<p>User accounts are moved from the single server to the new mailbox
server.</p>
</li>
<li>
<p>If you are moving all accounts from the single server, the mailbox
server is stopped on the single server machine.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_mailbox_server">Configuring the Mailbox Server</h3>
<div class="paragraph">
<p>The host name and zmhostname configured on the mailbox server are the
same as on the single server.</p>
</div>
<div class="paragraph">
<p>Make sure you know the LDAP master password as you configure it on the
sever that is being added. To find the master LDAP password on the
single server node, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -s zimbra_ldap_password</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are installing the Zimbra proxy or <em>MTA</em> on the
new node, you will also need to record the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bind password for postfix ldap user</p>
</li>
<li>
<p>Bind password for amavis ldap user</p>
</li>
<li>
<p>Bind password for nginx ldap user</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -s | grep -E '(amavis|nginx|postfix)_password'</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Before you begin make sure you have an up-to-date backup!
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in <a href="#starting_multiple_server_install">Starting the Installation Process</a>
to log on to the server as root and unpack the
Zimbra software.</p>
</li>
<li>
<p>Type <code>Y</code> for each package you are installing.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Install <code>zimbra-store</code>, and <code>zimbra-spell</code> (optional) packages. When
<code>zimbra-spell</code> is installed, the <code>zimbra-apache</code> package also is
installed.</p>
</li>
<li>
<p>If <code>zimbra-proxy</code> is configured, install <code>memcached</code>.</p>
</li>
<li>
<p>The <code>zimbra-logger</code> package is installed only on one mailbox
server. If you are moving all mailboxes to this server from the
original single server, install the <code>zimbra-logger</code> package.</p>
</li>
<li>
<p>If <em>Archive and Discovery</em> is installed on the single-server node,
install <code>zimbra-archiving</code> on the new mailbox server.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If SNMP is being used, type <code>Y</code> for <code>zimbra-snmp</code>. If SNMP is
used, it is installed on every Zimbra server.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to modify the system. The selected packages
are installed on the server.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em>Main</em> menu displays the default entries for the Zimbra
component you are installing.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Type <code>1</code> and press <em>Enter</em> to go to the <strong>Common Configuration</strong> menu.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The mailbox server hostname is displayed. You must change the
LDAP master host name and password to be the values configured on the
single- server node.
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Type <code>2</code>, press <em>Enter</em>, and type the LDAP host name.</p>
</li>
<li>
<p>Type <code>4</code>, press <em>Enter</em>, and type the LDAP password.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After you set these values, the server immediately contacts the
LDAP server. If it cannot contact the server, you cannot proceed.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Type <code>6</code> to set the correct time zone.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Type <code>r</code> to return to the Main menu.</p>
</li>
<li>
<p>From the Main menu, type <code>2</code> to go to the Store configuration
menu.</p>
<div class="ulist">
<ul>
<li>
<p>Type <code>2</code> to set <strong>Create Admin User</strong> to <code>No</code>.</p>
</li>
<li>
<p>Type the corresponding number to set the SMTP host. This is the
mta-server host name.</p>
</li>
<li>
<p>Type the corresponding number if you want to change the default web
server mode.</p>
</li>
<li>
<p>If you are setting up IMAP/POP proxy servers, type the
corresponding number to enable the servers.</p>
</li>
<li>
<p>If the <code>zimbra-proxy</code> is used and is installed on another server,
configure the following menu options</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Configure for use with mail proxy</p>
</li>
<li>
<p>Configure to use with web proxy</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Set either or both of these to TRUE if you are going to set up
<code>zimbra-proxy</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Type the corresponding menu number to install the Zimbra Collaboration license
file. Enter the location of the license file. For example, if you
saved the license file to the tmp directory, you would type
<code>/tmp/ZCSLicense.xml</code>. You cannot proceed without a license file.</p>
</li>
<li>
<p>If you are setting up proxy servers, type the corresponding number
 to enable the servers. When you enable these, IMAP/POP/HTTP server
 port numbers and proxy port numbers are automatically changed. See
<a href="#_configuration_during_installation">Configuration during installation</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>When the mailbox server is configured, return to the Main menu and
type a to apply the configuration changes. Press <em>Enter</em> to save the
configuration data.</p>
</li>
<li>
<p>When <strong>Save Configuration data to a file</strong> appears, press <em>Enter</em>.</p>
</li>
<li>
<p>The next request asks where to save the files. To accept the
default, press <em>Enter</em>. To save the files to another directory, enter
the directory and then press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>The system will be modified - continue?</strong> appears, type <code>y</code> and
press <em>Enter</em>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The server is modified. Installing all the components and
configuring the mailbox server can take a few minutes. This includes
installing SSL certificates, setting passwords, setting ports,
installing skins and Zimlets, setting time zone preferences, and
starting the servers, among other processes.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>When <strong>Configuration complete - press return to exit</strong> displays, press
<em>Enter</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation of the mailbox server is complete.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_customized_features">Adding Customized Features</h3>
<div class="paragraph">
<p>Any customizing of themes, or Zimlets, and any signed certificates
stored on the single-server must be added to the new mailbox
server. See the Zimbra Collaboration Administration Guide for information about adding the
customized features.</p>
</div>
</div>
<div class="sect2">
<h3 id="_testing_the_configuration">Testing the Configuration</h3>
<div class="paragraph">
<p>To make sure that the new mail store server is correctly configured,
create a new user on the new mailbox server and log into the account
to verify that your configuration is correct. See
<a href="#_provisioning_accounts">Provisioning Accounts</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_move_mailboxes">Move Mailboxes</h3>
<div class="paragraph">
<p>The command, <code>zmmboxmove</code>, is run to move user accounts from the mailbox
server on the single-sever node to the new mailbox server.</p>
</div>
<div class="paragraph">
<p>You can set global options to exclude items from the mailbox move. See
the Zimbra Collaboration Administration Guide User Accounts chapter for more information
about the mailbox move feature.</p>
</div>
<div class="paragraph">
<p>Move the following types of mailboxes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User accounts.</p>
</li>
<li>
<p>Admin mailboxes. If you do not move the admin mailbox, you cannot
log into the Zimbra Collaboration Web Client.</p>
</li>
<li>
<p>Spam and ham mailboxes.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you were using <em>Archive and Discovery</em> on the single server
mailbox, move the archival mailboxes as well.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_move_mailboxes_using_cli_zmmboxmove">Move Mailboxes Using CLI zmmboxmove</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To move a mailbox to a new server</p>
<div class="listingblock">
<div class="content">
<pre>zmmboxmove -a &lt;email@address&gt; --from &lt;servername&gt; --to &lt;servername&gt;</pre>
</div>
</div>
</li>
<li>
<p>To verify that the content of the mailbox was moved successfully, go
to the administration console, select the account that was
moved. Click <strong>View Mail</strong> on the toolbar. When the account opens, verify
that the account’s content is displayed and can be opened.</p>
</li>
<li>
<p>Purge the mailbox from the old server:</p>
<div class="listingblock">
<div class="content">
<pre>zmpurgeoldmbox -a &lt;email@address&gt; -s &lt;oldservername&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_turn_off_mailbox_server_on_single_server_node">Turn Off Mailbox Server on Single-Server Node</h3>
<div class="paragraph">
<p>When all mailboxes have moved from the single-server node to the new
mailbox server node, disable the Mailbox services on the original
single-server machine.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the original single-server node, disable the following mailbox
server components:</p>
<div class="openblock">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">mailbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zmprov -l ms &lt;singleserver.com&gt; -- -zimbraServiceEnabled mailbox</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">logger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zmprov -l ms &lt;singleserver.com&gt; -- -zimbraServiceEnabled logger</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">stats</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zmprov -l ms &lt;singleserver.com&gt; -- -zimbraServiceEnabled stats</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">spell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zmprov -l ms &lt;singleserver.com&gt; -- -zimbraServiceEnabled spell</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">convertd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zmprov -l ms &lt;singleserver.com&gt; -- -zimbraServiceEnabled convertd</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If archiving was installed, disable it as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmprov -l ms &lt;singleserver.com&gt; -- -zimbraServiceEnabled archiving</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>After the mailbox services are disabled, verify that antispam,
antivirus, ldap, mta, snmp, proxy, and memcached are the only services
on the original single-server node.</p>
<div class="listingblock">
<div class="content">
<pre>zmprov -l gs &lt;singleserver.com&gt; | grep -i serviceenabled</pre>
</div>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multi-master-replication">Configuring Multi-Master Replication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Set up multi-master LDAP replication to have a copy of the LDAP
database saved on each server in a group of LDAP servers identified
for multi-master replication (MMR). The database can be updated by
any member of the group. If one master fails, the other masters
continue to update the database.</p>
</div>
<div class="paragraph">
<p>The Zimbra install program is used to configure the multi-master LDAP
servers. Each master LDAP server is given an unique identifier when
they are configured and <code>zmlocalconfig</code> is used to add the ldap server
to the multi- master group.</p>
</div>
<div class="paragraph">
<p>You can also promote an existing replica to be part of the multi-master group.</p>
</div>
<div class="sect2">
<h3 id="_managing_multiple_master_ldap_servers">Managing Multiple Master LDAP Servers</h3>
<div class="paragraph">
<p>When you enable multi-master replication, you assign a server ID to
each master server to identify them in the group. This is used to
distinguish the servers in the group and to help resolve conflicts
that might occur.</p>
</div>
<div class="paragraph">
<p>In addition, each server is configured to assign internal replication
ID’s that are unique to that specific server. Other LDAP master
server can use the same replication ID, but within the server, these
replication IDs must be unique.</p>
</div>
<div class="paragraph">
<p>You can run the ZCS multiple master CLI,
<code>zmldapquery-mmr</code> from a specific master to see the server ID for that
master and all multi-master servers that are in the group and to see
the replication ID values for those masters.</p>
</div>
<div class="paragraph">
<p>On the server, enter the command as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/zimbra/libexec/zmldapquery-mmr</pre>
</div>
</div>
<div class="paragraph">
<p>Before you can enable the multi-master replication feature, you must
know the hostname of the first secondary master that is being added to
the group. The hostname is entered when you enable the feature. Once
you enable the multi- master replication feature, you do not need to
run the command again.</p>
</div>
<div class="paragraph">
<p>When <code>zmlocalconfig</code> is run the first time, the master LDAP servers
are configured as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first master LDAP server ID is set to <code>1</code>.</p>
</li>
<li>
<p>The master LDAP server is put in a group with a secondary master
that is listening to LDAP on port <code>389</code>.</p>
</li>
<li>
<p>The replication ID is set to <code>100</code> by default on the secondary
master.</p>
</li>
<li>
<p>Writes initiated from the server go to the LDAP <em>master-1</em> by
default. If LDAP <em>master-1</em> is down, writes move to ldap <em>master-2</em>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To enable the feature run:</p>
<div class="listingblock">
<div class="content">
<pre>./libexec/zmldapenable-mmr -s 1 -m ldap://&lt;&lt;master-2.example.com&gt;&gt;:389/</pre>
</div>
</div>
</li>
<li>
<p>Once the feature is enabled use the <code>zmlocalconfig</code> command to add the
LDAP servers to a group.</p>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -e ldap_master_url="ldap://&lt;&lt;master-1.example.com&gt;&gt;:389 ldap://&lt;&lt;master-2.example.com&gt;&gt;:389"</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_a_secondary_master_ldap_server">Installing a Secondary Master LDAP Server</h3>
<div class="paragraph">
<p>The master LDAP server must be running when you install the secondary
LDAP servers. You run the ZCS install program on the
secondary master LDAP servers to install the LDAP package.</p>
</div>
<div class="sect3">
<h4 id="_passwords_required_to_install_the_secondary_master">Passwords Required to Install the Secondary Master</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before you install a secondary master, you must know the following
passwords:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Zimbra admin LDAP password</p>
</li>
<li>
<p>LDAP replication password</p>
</li>
<li>
<p>NGINX LDAP password</p>
</li>
<li>
<p>Amavis LDAP password</p>
</li>
<li>
<p>Postfix LDAP password</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To find these passwords, on the ZCS server run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -s | grep passw | grep ldap</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_setting_up_a_secondary_master_ldap_server">Setting Up a Secondary Master LDAP Server</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow steps 1 through 4 in <a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open a SSH session to the LDAP server, log on to the server
as root, and unpack the Zimbra software.</p>
</li>
<li>
<p>Type <code>Y</code> and press <em>Enter</em> to install the <code>zimbra-ldap</code> package.</p>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to modify the system. The selected packages are
installed. The Main menu shows the default entries for the LDAP
server.</p>
</li>
<li>
<p>Type <code>1</code> to display the <em>Common Configuration</em> submenu.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Type <code>2</code> to change the <strong>LDAP Master host</strong> name to the name of the
primary master&#8217;s hostname; e.g., <em>master-1.example.com</em>.</p>
</li>
<li>
<p>Type <code>4</code> to change the <strong>LDAP admin password</strong> to the Zimbra admin
password of the primary master.</p>
</li>
<li>
<p>Type <code>r</code> to return to the main menu.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Type <code>2</code> to display the <em>LDAP configuration</em> submenu.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Type <code>4</code> to change the type to <code>mmr</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Item <code>5</code>, <em>LDAP Server ID</em>, is set to <code>2</code>. If this is the second
master, leave it unchanged. If it the third or later master, select <code>5</code>
and update the server ID accordingly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next four steps are to change the default passwords on this server
to match the passwords on the <em>master-1</em> LDAP server.</p>
</div>
</li>
<li>
<p>Type <code>7</code> to change the <em>LDAP replication password</em>.</p>
</li>
<li>
<p>Type <code>8</code> to change the <em>LDAP postfix password</em>.</p>
</li>
<li>
<p>Type <code>9</code> to change the <em>LDAP amavis password</em>.</p>
</li>
<li>
<p>Type <code>10</code> to change the <em>LDAP NGINX password</em>.</p>
</li>
<li>
<p>Type <code>r</code> to return to the main menu.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Type <code>a</code> to apply the configuration changes. Press <em>Enter</em> to save
the configuration data.</p>
</li>
<li>
<p>When <strong>Save Configuration data to a file</strong> appears, press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>The system will be modified - continue?</strong> appears, type <code>y</code> and press
<em>Enter</em>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The server is modified. Installing all the components and configuring the
server can take a few minutes.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>When <strong>Installation complete - press return to exit</strong> displays, press
<em>Enter</em>. The installation is complete.</p>
</li>
<li>
<p>Update the <code>ldap_master_url</code> attribute to contain both masters, enter
this new master as the <em>first</em> master in the list.</p>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -e ldap_master_url="ldap://&lt;&lt;master-2.example.com&gt;&gt;:389 ldap://&lt;&lt;master-1.example.com&gt;&gt;:389"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_promote_existing_replicas_to_multi_master_ldap_servers">Promote Existing Replicas to Multi-Master LDAP Servers</h3>
<div class="paragraph">
<p>In an existing ZCS setup where there is already a single master and
multiple replicas, you can promote an existing replica to become a
secondary master.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the master LDAP server find the LDAP replication, Postfix,
Amavis, and NGINX passwords.</p>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -s | grep passw | grep ldap</pre>
</div>
</div>
</li>
<li>
<p>Change the LDAP passwords on the server you are promoting to be the
same as the first master LDAP server.</p>
<div class="ulist">
<ul>
<li>
<p>LDAP replication password = <code>zmldappasswd -l &lt;password&gt;</code></p>
</li>
<li>
<p>LDAP postfix password = <code>zmldappasswd -p &lt;password&gt;</code></p>
</li>
<li>
<p>LDAP amavis password = <code>zmldappasswd -a &lt;password&gt;</code></p>
</li>
<li>
<p>LDAP NGINX password = <code>zmldappasswd -n &lt;password&gt;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Assign the next Server ID to this master. This example is <code>3</code></p>
<div class="listingblock">
<div class="content">
<pre>/opt/zimbra/libexec/zmldappromote-replica-mmr -s 3</pre>
</div>
</div>
</li>
<li>
<p>Update the <code>ldap_master_url</code> attribute to add the master to the
list.</p>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -e ldap_master_url="ldap://&lt;&lt;master-1.example.com&gt;&gt;:389 \
  ldap://&lt;&lt;master-2.example.com&gt;&gt;:389 ldap://&lt;&lt;master-3.example.com&gt;&gt;:389"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This updates the replica to be a multi-master replica, enabled with a
server ID. It is automatically configured to be a paired master with
the master it was previously replicating from.</p>
</div>
</div>
<div class="sect2">
<h3 id="_deleting_a_multi_master_replication_node">Deleting a Multi-Master Replication Node</h3>
<div class="paragraph">
<p>To delete a multi-master replication (MMR) node, use the following
steps.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Deleting an MMR node can only be performed in ZCS
8.0.7 and later.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update the <code>ldap_master_url</code> and <code>ldap_url</code> on every node, removing the
LDAP MMR node that will be shut down.</p>
</li>
<li>
<p>Wait 5-10 minutes to ensure the modification is in place.</p>
</li>
<li>
<p>Monitor <code>/var/log/zimbra.log</code> on the MMR node that will be shut down
and confirm it is no longer receiving modification traffic.</p>
</li>
<li>
<p>Run <code>ldap stop</code> on the MMR node that is being shut down.</p>
</li>
<li>
<p>Log into the remaining MMR nodes and perform the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>/opt/zimbra/libexec/zmldapmmrtool -q</code></p>
</li>
<li>
<p>Find the matching <em>RID</em> for the MMR node you shut down.</p>
</li>
<li>
<p><code>/opt/zimbra/libexec/zmldapmmrtool -d -o RID</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_example_of_deleting_an_mmr_node">Example of Deleting an MMR Node</h4>
<div class="paragraph">
<p>The following is an example of using <code>zmldapmmrtool</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>There are three MMR servers, <code>ldap-1.example.com</code>, <code>ldap-2.example.com</code>,
<code>ldap-3.example.com</code>, with <code>ldap-3.example.com</code> being shut down.</p>
<div class="listingblock">
<div class="content">
<pre>zimbra@ldap-1:/tmp/mmr$ ./zmldapmmrtool -q
Master replication information
Master replica 1
rid: 100 URI: ldap://ldap-2.example.com:389/ TLS: critical Master replica 2
rid: 101 URI: ldap://ldap-3.example.com:389/ TLS: critical</pre>
</div>
</div>
</li>
<li>
<p>The RID being used by <code>ldap-3.example.com</code> is <code>101</code>. This agreement can
be deleted with:</p>
<div class="listingblock">
<div class="content">
<pre>zimbra@ldap-1:/tmp/mmr$ ./zmldapmmrtool -d -o 101</pre>
</div>
</div>
</li>
<li>
<p>Confirm the deletion.</p>
<div class="listingblock">
<div class="content">
<pre>zimbra@ldap-1:/tmp/mmr$ ./zmldapmmrtool -q
Master replication information
Master replica 1
rid: 100 URI: ldap://ldap-2.example.com:389/ TLS: critical zimbra@ldap-1:/tmp/mmr</pre>
</div>
</div>
</li>
<li>
<p>Repeat on the remaining node(s).</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring_multiple_ldap_master_status">Monitoring Multiple LDAP Master Status</h3>
<div class="paragraph">
<p>The <em>Monitoring LDAP Replication Status</em> feature monitors the change
sequence number (CSN) values between an LDAP master server and an LDAP
replica server. The replica server is considered a shadow copy of the
master server. If the servers become out of sync, the monitoring
feature indicates the problem. The out of sync time period is
typically five minutes, although this value is configurable.</p>
</div>
<div class="sect3">
<h4 id="_feature_requirement">Feature Requirement</h4>
<div class="paragraph">
<p>Run the script <code>zmreplchk</code> located in <code>/opt/zimbra/libexec</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This script must be run on a ZCS server that has a
<code>localconfig</code> value set for <code>ldap_url</code> that includes all of the master
servers.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_error_codes_and_status_explanations">Error Codes and Status Explanations</h4>
<div class="paragraph">
<p>The following monitoring error codes and status explanations are given
with this feature:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In Sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The servers are currently in sync.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No contact</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No connection to the master server and the system
 exits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stand-alone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The master server has no replica servers and is
 considered a standalone master server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Could not execute StartTLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica server requires StartTLS
 and fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server down</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica server is currently down.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unable to search</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Searching the replica server for the context CSN
 fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xw Xd Xh Xm Xs behind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica server becomes out of
 sync. Status indicates amount of time the replica server is behind
 the master server in w=weeks, d=days, h=hours, m=minutes, and
 s=seconds.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, <code>ldap-2.example.com</code> is the master server, and
<code>ldap-3.example.com</code> and <code>ldap-4.example</code>.com are additional
servers. The following screen-shot shows the additional master servers
are in sync with the master server, as indicated by the <code>Code:0</code> and
<code>Status: In Sync</code>, and master server <code>ldap005</code> is currently down, as
indicated by <code>Code: 4</code> and <code>Status: Server down</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zimbra@ldap-2.example.com
Master: ldap://ldap-3.example.com:389 Code: 0 Status: In Sync CSN: 20120528123456.123456Z#000000#001#000000
Master: ldap://ldap-4.example.com:389 Code: 0 Status: In Sync CSN: 20120528123456.123456Z#000000#001#000000
Master: ldap://ldap-5.example.com:389 Code: 4 Status: Server down</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ldap-replication">Configuring LDAP Replication</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_configuring_ldap_replication_overview">Configuring LDAP Replication Overview</h3>
<div class="paragraph">
<p>Setting up LDAP replication lets you distribute Zimbra server
queries to specific replica LDAP servers. Only one master LDAP server
can be set up. This server is authoritative for user information,
server configuration, etc. Replica LDAP servers can be defined to
improve performance and to reduce the load on the master server. All
updates are made to the master server and these updates are copied to
the replica servers.</p>
</div>
<div class="paragraph">
<p>The Zimbra install program is used to configure a master LDAP
server and additional read-only replica LDAP servers. The master LDAP
server is installed and configured first, following the normal
ZCS installation options. The LDAP replica server
installation is modified to point the replica server to the LDAP
master host.</p>
</div>
<div class="paragraph">
<p>When the master LDAP server and the replica LDAP servers are correctly
installed, the following is automatically configured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SSH keys are set up on each LDAP server.</p>
</li>
<li>
<p>Trusted authentication between the master LDAP and the LDAP replica
servers is set up.</p>
</li>
<li>
<p>The content of the master LDAP directory is copied to the replica
LDAP server. Replica LDAP servers are read-only.</p>
</li>
<li>
<p>Zimbra servers are configured to query the replica LDAP
server instead of the master LDAP server.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_zimbra_master_ldap_server">Installing Zimbra Master LDAP Server</h3>
<div class="paragraph">
<p>You must install the master LDAP server before you can install replica
LDAP servers. Refer to <a href="#install_ldap_master">Installing Zimbra LDAP Master Server</a>
for master LDAP server installation instructions. After the
installation of the master LDAP server has completed, continue
to <a href="#_enable_replication_on_the_ldap_master">Enable Replication on the LDAP Master</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_enable_replication_on_the_ldap_master">Enable Replication on the LDAP Master</h3>
<div class="paragraph">
<p>On the master LDAP server, as the <code>zimbra</code> user, type:
<code>/opt/zimbra/libexec/ zmldapenablereplica</code> and press <em>Enter</em>. This enables
replication on the LDAP Master.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_a_replica_ldap_server">Installing a Replica LDAP Server</h3>
<div class="paragraph">
<p>The master LDAP server must be running when you install the replica
server. You run the ZCS install program on the replica
server to install the LDAP package.</p>
</div>
<div class="paragraph">
<p>Follow steps 1 through 4 in <a href="#starting_multiple_server_install">Starting the Installation Process</a>
to open a SSH session to the LDAP server, log on to the server
as root, and unpack the Zimbra software.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type <code>Y</code> and press <em>Enter</em> to install the <code>zimbra-ldap</code> package. In the
screen shot below, the package to be installed is emphasized.</p>
<div class="listingblock">
<div class="content">
<pre>Select the packages to install
<strong>Install zimbra-ldap [Y] y</strong>
Install zimbra-logger [Y] n
Install zimbra-mta [Y] n
Install zimbra-dnscache [N] n
Install zimbra-snmp [Y] n
Install zimbra-store [Y] n
Install zimbra-apache [Y] n
Install zimbra-spell [Y] n
Install zimbra-convertd [N] n
Install zimbra-memcached [Y] n
Install zimbra-proxy [Y] n
Installing:
    zimbra-core
zimbra-ldap
This system will be modified. Continue [N] <strong>Y</strong></pre>
</div>
</div>
</li>
<li>
<p>Type <code>Y</code>, and press <em>Enter</em> to modify the system. The selected packages
are installed. The Main menu shows the default entries for the LDAP
replica server. To expand the menu type <code>X</code> and press <em>Enter</em>.</p>
<div class="listingblock">
<div class="content">
<pre>Main menu

  1) Common Configuration:
  2) zimbra-ldap:                               Enabled
  .
  .
  .
  .
  r) Start servers after configuration          yes
  s) Save config to file
  x) Expand menu
  q) Quit

*** CONFIGURATION COMPLETE - press 'a' to apply
Select from menu, or press 'a' to apply config (? - help)</pre>
</div>
</div>
</li>
<li>
<p>Type <code>1</code> to display the <em>Common Configuration</em> submenus.</p>
<div class="listingblock">
<div class="content">
<pre>Common Configuration:

  1) Hostname:                                  ldap-1.example.com
  2) Ldap master host:                          ldap-1.example.com
  3) Ldap port:                                 389
  4) Ldap Admin password:                       set
  5) Store ephemeral attributes outside Ldap: no
  6) Secure interprocess communications:        Yes
  7) TimeZone:                                  (GMT-08.00) Pacific Time (US &amp; Canada)</pre>
</div>
</div>
</li>
<li>
<p>Type <code>2</code> to change the <strong>Ldap Master host</strong> name to the name of the
Master LDAP host.</p>
</li>
<li>
<p>Type <code>3</code>, to change the <strong>Ldap port</strong> to the same port as configured
for the Master LDAP server.</p>
</li>
<li>
<p>Type <code>4</code> and change the <strong>Ldap Admin password</strong> to the
Master LDAP admin password, then type <code>r</code> to return to the main menu.</p>
</li>
<li>
<p>Type <code>2</code> to display the <em>LDAP configuration</em> submenu.</p>
<div class="listingblock">
<div class="content">
<pre>Ldap configuration

  1) Status:                                    Enabled
  2) Create Domain:                             no
  3) Ldap Root password:                        set
  4) Ldap Replication password:                 set
  5) Ldap Postfix password:                     set
  6) Ldap Amavis password:                      set
  7) Ldap Nginx password:                       set</pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Type <code>2</code> and change <strong>Create Domain</strong> to <code>no</code>.</p>
</li>
<li>
<p>Type <code>4</code> for <strong>LDAP replication password</strong> and enter the same password to
match the value on the Master LDAP Admin user password for this local
config variable.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All passwords must be set to match the master ldap admin user
password. To determine this value on the master LDAP server, run
<code>zmlocalconfig -s ldap_replication_password</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you have installed Zimbra MTA on the LDAP
server, configure the Amavis and the Postfix passwords. To find these
values, issue the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -s ldap_amavis_password
zmlocalconfig -s ldap_postfix_password</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>When the LDAP server is configured, type <code>a</code> to apply the
configuration changes. Press <em>Enter</em> to save the configuration data.</p>
<div class="listingblock">
<div class="content">
<pre>Select, or press 'a' to apply config (? - help) a
Save configuration data? [Yes]
Save config in file: [/opt/zimbra/config.2843]
Saving config in /opt/zimbra/config.2843...Done
The system will be modified - continue? [No] y
Operations logged to /tmp/zmsetup.log.2843
Setting local config zimbra_server_hostname to [ldap.example.com]
.
Operations logged to /tmp/zmsetup.log.2843
Installation complete - press return to exit</pre>
</div>
</div>
</li>
<li>
<p>When <strong>Save Configuration data to a file</strong> appears, press <em>Enter</em>.</p>
</li>
<li>
<p>When <strong>The system will be modified - continue?</strong> appears, type <code>y</code> and press
<em>Enter</em>.</p>
<div class="listingblock">
<div class="content">
<pre>The server is modified. Installing all the components and configuring the
server can take a few minutes.</pre>
</div>
</div>
</li>
<li>
<p>When <strong>Installation complete - press return to exit</strong> displays, press
<em>Enter</em>.</p>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The installation on the replica LDAP server is complete. The content
of the master LDAP directory is copied to the replica LDAP server.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_test_the_replica">Test the Replica</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create several user accounts, either from the admin console or on
the master LDAP server. The CLI command to create these accounts is</p>
<div class="listingblock">
<div class="content">
<pre>zmprov ca &lt;name@domain.com&gt; &lt;password&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If you do not have a mailbox server setup, you can create domains
instead. Use this CLI command to create a domain</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmprov cd &lt;domain name&gt;</pre>
</div>
</div>
</li>
<li>
<p>To see if the accounts were correctly copied to the replica LDAP
server, on the replica LDAP server, type <code>zmprov -l gaa</code>.
Type <code>zmprov gad</code> to check all domains.
The accounts/domains created on the master
LDAP server should display on the replica LDAP server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In cases where the mailbox server is not setup, you can also use the
following command for account creation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zmprov ca &lt;name@domain&gt; &lt;password&gt; zimbraMailTransport &lt;where_to_deliver&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_zimbra_servers_to_use_ldap_replica">Configuring Zimbra Servers to Use LDAP Replica</h3>
<div class="paragraph">
<p>To use the replica LDAP server instead of the master LDAP server, you
must update the <code>ldap_url</code> value on the Zimbra servers that will query
the replica instead of the master. For each server that you want to
change:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Zimbra services on the server. Type <code>zmcontrol stop</code>.</p>
</li>
<li>
<p>Update the <code>ldap_url</code> value. Enter the replica LDAP server URL</p>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -e ldap_url="ldap://&lt;replicahost&gt; ldap://&lt;masterhost&gt;"</pre>
</div>
</div>
<div class="paragraph">
<p>Enter more than one replica hostnames in the list typed as</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"ldap://&lt;replicahost1&gt; ldap://&lt;replicahost2&gt; ldap://&lt;masterhost&gt;"</pre>
</div>
</div>
<div class="paragraph">
<p>The hosts are tried in the order listed. The master URL <em>must</em> always be
included and is listed <em>last</em>.</p>
</div>
</li>
<li>
<p>Update the <code>ldap_master_url</code> value. Enter the master LDAP server URL,
if not already set.</p>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -e ldap_master_url=ldap://&lt;masterhost&gt;:port</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Additional Steps for MTA hosts. After updating the <code>ldap_url</code>, rerun
<code>/opt/zimbra/ libexec/zmmtainit</code>.  This rewrites the Postfix
configuration with the updated <code>ldap_url</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_uninstalling_an_ldap_replica_server">Uninstalling an LDAP Replica Server</h3>
<div class="paragraph">
<p>If you do not want to use an LDAP replica server, follow these steps
to disable it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Uninstalling an LDAP server is the same as disabling it on the
master LDAP server.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_remove_ldap_replica_from_all_active_servers">Remove LDAP Replica from All Active Servers</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On each member server, including the replica, verify the <code>ldap_url</code>
value. Type	<code>zmlocalconfig [ldap_url]</code>.</p>
</li>
<li>
<p>Remove the disabled LDAP replica server URL from <code>zmlocalconfig</code>. Do
this by modifying the <code>ldap_url</code> to only include enabled
ZCS LDAP servers.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The master LDAP server should always be
at the end of the <code>ldap_url</code> string value.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>zmlocalconfig -e ldap_url="ldap://&lt;replica-server-host&gt; ldap://&lt;master-server-host&gt;"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_disable_ldap_on_the_replica">Disable LDAP on the Replica</h4>
<div class="paragraph">
<p>To disable LDAP on the replica server:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type <code>zmcontrol stop</code> to stop the Zimbra services on the
server.</p>
</li>
<li>
<p>To disable LDAP service, type</p>
<div class="listingblock">
<div class="content">
<pre>zmprov -l ms &lt;zmhostname&gt; -zimbraServiceEnabled ldap</pre>
</div>
</div>
</li>
<li>
<p>Type <code>zmcontrol start</code> to start other current Zimbra services on the
server.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Additional steps for MTA host. After updating the <code>ldap_url</code> with
<code>zmlocalconfig</code>, rerun <code>/opt/zimbra/libexec/zmmtainit</code>. This rewrites the
Postfix configuration with the updated <code>ldap_url</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring_ldap_replication_status">Monitoring LDAP Replication Status</h3>
<div class="paragraph">
<p>The <em>Monitoring LDAP Replication Status</em> feature monitors the change
sequence number (CSN) values between an LDAP master server and an LDAP
replica server. The replica server is considered a shadow copy of the
master server. If the servers become out of sync, the monitoring
feature indicates the problem. The out of sync time period is
typically five minutes, although this value is configurable.</p>
</div>
<div class="sect3">
<h4 id="_feature_requirement_2">Feature Requirement</h4>
<div class="paragraph">
<p>Run the script <code>zmreplchk</code> located in <code>/opt/zimbra/libexec</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This script must be run on a ZCS server that has a
<code>localconfig</code> value set for <code>ldap_url</code> that includes all of the replica
servers and ends with the master server.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_error_codes_and_status_explanations_2">Error Codes and Status Explanations</h4>
<div class="paragraph">
<p>The following monitoring error codes and status explanations are given
with this feature:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">Status</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In Sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The servers are currently in sync.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No contact</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No connection to the master server and the system
 exits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stand-alone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The master server has no replica servers and is
 considered a standalone master server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Could not execute StartTLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica server requires StartTLS
 and fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server down</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica server is currently down.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unable to search</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Searching the replica server for the context CSN
 fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xw Xd Xh Xm Xs behind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The replica server becomes out of
 sync. Status indicates amount of time the replica server is behind
 the master server in w=weeks, d=days, h=hours, m=minutes, and
 s=seconds.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, <code>ldap-2.example.com</code> is the master server, and
<code>ldap-3.example.com</code> and <code>ldap-4.example.com</code> are replicas servers. The
following screen-shot shows that replica server <code>ldap-3</code> is in sync
with the master server, as indicated by the <code>Code:0</code> and <code>Status: In
Sync</code>, and replica server <code>ldap-4</code> is currently down, as indicated by
<code>Code: 4</code> and <code>Status: Server down</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zimbra@ldap-2.example.com
Replica: ldap://ldap-3.example.com:389 Code: 0 Status: In Sync
Replica: ldap://ldap-4.example.com:389 Code: 4 Status: Server down</pre>
</div>
</div>
<div class="paragraph">
<p>If the replica server becomes out of sync with the master server, the
status given indicates in a time format how far behind the master
server it has become:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Replica: ldap://ldap-3.example.com:389 Code: 0 Status: In Sync
Replica: ldap://ldap-4.example.com:389 Code: 6 Status: 0w 0d 0h 14m 42s behind</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="System_Requirements">System Requirements for Zimbra Collaboration</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Servers</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Evaluation and Testing</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel/AMD 64-bit CPU 1.5 GHz</p>
</li>
<li>
<p>RAM requirements:</p>
<div class="ulist">
<ul>
<li>
<p>For single server installations, a minimum of 8GB of RAM is required.</p>
</li>
<li>
<p>For multi-server installations, contact Zimbra sales for recommendations.</p>
</li>
</ul>
</div>
</li>
<li>
<p>5 GB free disk space for software and logs</p>
</li>
<li>
<p>Temp file space for installs and upgrades*</p>
</li>
<li>
<p>Additional disk space for mail storage</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Production environments</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel/AMD 2.0 GHZ+ 64-bit CPU</p>
</li>
<li>
<p>RAM requirements:</p>
<div class="ulist">
<ul>
<li>
<p>For single server installations, a minimum of 8GB of RAM is required.</p>
</li>
<li>
<p>For multi-server installations, contact Zimbra sales for recommendations.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Temp file space for installs and upgrades*</p>
</li>
<li>
<p>10 GB free disk space for software and logs (SATA or SCSI for
performance, and RAID/Mirroring for redundancy)</p>
</li>
<li>
<p>Additional disk space for mail storage</p>
</li>
<li>
<p>Temp files space: The zimbra-store requires 5GB for <code>/opt/zimbra</code>, plus
additional space for mail storage. The other nodes require 100MB.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General Requirements</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Firewall Configuration should be set to “No firewall”.</p>
</li>
<li>
<p>RAID-5 is not recommended for installations with more than 100 accounts.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Network Edition and Open Source supported Cloud platforms</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following Cloud Platforms are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Oracle Cloud</p>
</li>
<li>
<p>VMware vCloud Director</p>
</li>
<li>
<p>VMware vCloud Air</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Operating System (Network Edition)</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following operating systems are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red Hat® Enterprise Linux® 7 (64-bit)</p>
</li>
<li>
<p>CentOS Linux® 7 (64-bit)</p>
</li>
<li>
<p>Red Hat Enterprise Linux 6 (64-bit), <strong>patch level 4 or later is required</strong></p>
</li>
<li>
<p>CentOS Linux 6 (64-bit), <strong>patch level 4 or later is required</strong></p>
</li>
<li>
<p>Oracle Linux 7.2</p>
</li>
<li>
<p>Oracle Linux 6.6</p>
</li>
<li>
<p>Ubuntu 16.04 LTS Server Edition (64-bit), starting from Zimbra Collaboration 8.7.1 and above</p>
</li>
<li>
<p>Ubuntu 14.04 LTS Server Edition (64-bit)</p>
</li>
<li>
<p>Ubuntu 12.04.4 LTS Server Edition (64-bit) <strong>running the saucy (3.11) or
later kernel is required. Deprecated starting Zimbra Collaboration 8.8</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the original install was done with
Ubuntu 12.04.2 or earlier, manual intervention is required to switch to
the saucy (3.11) or later kernel series.
See <a href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack" class="bare">https://wiki.ubuntu.com/Kernel/LTSEnablementStack</a> for further information.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Operating System (Open Source Edition)</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>In addition to supporting the operating systems listed above for the
Network Edition, other operating system versions are available for the
Open Source Edition. Check the Zimbra Open Source Downloads page on
<a href="https://www.zimbra.com" class="bare">https://www.zimbra.com</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Virtualization (Network Edition)</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following hypervisors are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VMware vSphere 6.x</p>
</li>
<li>
<p>VMware vSphere 5.x</p>
</li>
<li>
<p>VMware vSphere 4.x</p>
</li>
<li>
<p>XenServer 6.5</p>
</li>
<li>
<p>XenServer 6.2</p>
</li>
<li>
<p>KVM</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>File Systems</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following file systems are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>XFS</strong></p>
</li>
<li>
<p><strong>ext3</strong> or <strong>ext4</strong> file systems for Linux deployments</p>
</li>
<li>
<p><strong>NFS</strong> for backup only</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Other Dependencies</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Netcat (nc) is required on all operating systems using Zimbra Collaboration.
The <code>nc</code> utility must be installed prior to installation or upgrading.</p>
</div>
<div class="paragraph">
<p>For Ubuntu systems, disable <strong>AppArmor</strong> and verify that the
AppArmor service is not running before installing Zimbra Collaboration.</p>
</div>
<div class="paragraph">
<p>For Red Hat Enterprise operating systems, the
server must also have the following installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>NPTL</strong>. Native POSIX Thread Library</p>
</li>
<li>
<p><strong>Sudo</strong>. Superuser, required to delegate admins.</p>
</li>
<li>
<p><strong>libidn</strong>. For internationalizing domain names in applications (IDNA)</p>
</li>
<li>
<p><strong>GMP</strong>. GNU Multiple-Precision Library.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For Ubuntu 14 and Ubuntu 12:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sudo</p>
</li>
<li>
<p>libidn11</p>
</li>
<li>
<p>libpcre3</p>
</li>
<li>
<p>libexpat1</p>
</li>
<li>
<p>libgmp3c2</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Miscellaneous</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>SSH client software to transfer and install the Zimbra Collaboration software.</p>
</li>
<li>
<p>Valid DNS configured with an A record and MX record.</p>
</li>
<li>
<p>Servers should be configured to run Network Time Protocol (NTP) on a scheduled basis.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Administrator Computers<br>
<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
 Other configurations may work.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following operating system/browser combinations are supported:</p>
</div>
<div class="paragraph">
<p><strong>Windows Vista SP 2, Windows 7, Windows 8 or Windows 10 with one of the following:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Microsoft support is only available for Internet Explorer 11 or Microsoft Edge</p>
<div class="ulist">
<ul>
<li>
<p>IE11 and higher for Vista SP 2/Windows 7</p>
</li>
<li>
<p>IE11 and higher for Windows 8</p>
</li>
<li>
<p>IE11 or Microsoft Edge (Supported since ZCS 8.6 P4 and above) for Windows 10</p>
</li>
</ul>
</div>
</li>
<li>
<p>The latest stable release of:</p>
<div class="ulist">
<ul>
<li>
<p>Firefox</p>
</li>
<li>
<p>Safari</p>
</li>
<li>
<p>Google Chrome</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>'''Mac OS X 10.5, 10.6, 10.7, 10.8, 10.9, 10.10, 10.11 or 10.12 with one of the following:'''
* Firefox
* Safari
* Chrome</p>
</div>
<div class="paragraph">
<p>'''Linux with the latest stable release of one of the following:'''
* Firefox
* Google Chrome</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administrator Console Monitor</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Display minimum resolution 1024 x 768</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>End User Computers using Zimbra Web Client</strong><br>
<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
 Other configurations may work.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>For Zimbra Web Client - Advanced &amp; Standard version</strong></p>
</div>
<div class="paragraph">
<p>Minimum</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel/AMD/Power PC CPU 750MHz</p>
</li>
<li>
<p>256MB RAM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Recommended</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel/AMD/Power PC CPU 1.5GHz</p>
</li>
<li>
<p>512MB RAM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following operating system/browser combinations are supported:</p>
</div>
<div class="paragraph">
<p><strong>Windows Vista SP 2, Windows 7, Windows 8 or Windows 10 with one of the following:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Microsoft support is only available for Internet Explorer 11 or Microsoft Edge</p>
<div class="ulist">
<ul>
<li>
<p>IE11 and higher for Vista SP 2/Windows 7</p>
</li>
<li>
<p>IE11 and higher for Windows 8</p>
</li>
<li>
<p>IE11 or Microsoft Edge (Supported since ZCS 8.6 P4 and above) for Windows 10</p>
</li>
</ul>
</div>
</li>
<li>
<p>The latest stable release of:</p>
<div class="ulist">
<ul>
<li>
<p>Firefox</p>
</li>
<li>
<p>Safari</p>
</li>
<li>
<p>Google Chrome</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>'''Mac OS X 10.5, 10.6, 10.7, 10.8, 10.9, 10.10, 10.11 or 10.12 with one of the following:'''
* Firefox
* Safari
* Chrome</p>
</div>
<div class="paragraph">
<p>'''Linux with the latest stable release of one of the following:'''
* Firefox
* Google Chrome</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>End User Computers Using Other Clients</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Minimum</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel/AMD/Power PC CPU 750MHz</p>
</li>
<li>
<p>256MB RAM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Recommended</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel/AMD/Power PC CPU 1.5GHz</p>
</li>
<li>
<p>512MB RAM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Operating system POP/IMAP combinations</p>
</div>
<div class="paragraph">
<p>Windows Vista SP 2, Windows 7, Windows 8 or Windows 10 with one of the following:*
* Microsoft Outlook 2010, 2013 or 2016
* Any Linux distribution with Thunderbird
* Mac OS X 10.x with Apple Mail</p>
</div>
<div class="paragraph">
<p><strong>Accessibility and Screen Readers</strong> Zimbra recommends that customers
requiring use of screen readers for accessibility leverage the use of
the Standard Zimbra Web Client (HTML). Zimbra continues to invest in
improving the accessibility of this interface.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If users are presently using IE 9 or 10, Zimbra strongly recommends that they upgrade
to the latest version of Internet Explorer for optimal performance with ZWC.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Exchange Web Services</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>EWS Clients</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Outlook 2011/2016 (MAC only)</p>
</li>
<li>
<p>Apple Desktop Clients (OS X, 10.x)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>EWS Interoperability</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Exchange 2010, 2013 or 2016</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Monitor</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Display minimum resolution: 1024 x 768</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Internet Connection Speed</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>128 kbps or higher</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="Zimbra_Connector_for_Outlook">Zimbra Connector for Outlook (Network Edition Only)</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Operating System</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Windows 10</p>
</li>
<li>
<p>Windows 8</p>
</li>
<li>
<p>Windows 7</p>
</li>
<li>
<p>Vista</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Windows XP is deprecated. The 8.0.x series of Zimbra Collaboration is the last release to support
Microsoft Outlook 2003 and Microsoft Windows XP
</td>
</tr>
</table>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Microsoft Outlook</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Outlook 2016: 32-bit and 64-bit editions of Microsoft Outlook are supported.</p>
</li>
<li>
<p>Outlook 2013: 32-bit and 64-bit editions of Microsoft Outlook are supported.</p>
</li>
<li>
<p>Outlook 2010: Client computers must have Microsoft Office Outlook 2010 SP2 or later installed. Important: Outlook 2010 is deprecated: The 8.8 series of Zimbra Collaboration is the last release to support Microsoft Outlook 2010</p>
</li>
<li>
<p>Outlook 2007: Client computers must have Microsoft Office Outlook 2007 SP2 or later installed. Important: Outlook 2007 is deprecated: The 8.6 series of Zimbra Collaboration is the last release to support Microsoft Outlook 2007</p>
</li>
<li>
<p>Outlook 2003: Client computers must have Microsoft Office Outlook 2003 SP3 or later installed. Important: Outlook 2003 is deprecated: The 8.0.x series of Zimbra Collaboration is the last release to support Microsoft Outlook 2003</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Outlook 2003 is deprecated. The 8.0.x series of Zimbra Collaboration is the last release to
support Microsoft Outlook 2003 and Microsoft Windows XP.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Zimbra_Mobile">Zimbra Mobile (Network Edition Only)</h3>
<hr>
<div class="paragraph">
<p>Network Edition Mobile (MobileSync) provides mobile data access to email,
calendar, and contacts for users of selected mobile operating systems,
including:</p>
</div>
<div class="paragraph">
<p><strong>Smartphone Operating Systems</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>iOS6, iOS7, iOS8, iOS9, iOS10</p>
</li>
<li>
<p>Android 4.x, 5.x, 6.x, 7.x and 8.x</p>
</li>
<li>
<p>Windows OS</p>
</li>
<li>
<p>Microsoft Outlook using Exchange ActiveSync (EAS)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Zimbra_Touch_Client"><strong>Deprecated</strong> Zimbra Touch Client (Network Edition Only)</h3>
<hr>
<div class="paragraph">
<p>Supported devices for the Zimbra Touch Client include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>iOS6+: iPad®, iPad mini®, iPhone®, iPod touch®</p>
</li>
<li>
<p>Android 4.0+: Nexus 7, Nexus 10, Samsung Galaxy Tab™,
Samsung Galaxy S® III, Samsung Galaxy S® 4, Galaxy Nexus™</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="BES"><strong>Deprecated</strong> Zimbra Connector for BlackBerry Enterprise Server (Network Edition Only)</h3>
<div class="paragraph">
<p>Zimbra Connector for BlackBerry Enterprise Server (ZCB) provides seamless,
real-time synchronization of Zimbra user mailbox data to BlackBerry devices.</p>
</div>
<div class="paragraph">
<p>See <a href="https://www.zimbra.com/products/blackberry-enterprise-server.html" class="bare">https://www.zimbra.com/products/blackberry-enterprise-server.html</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="Available_Languages">Available Languages</h3>
<div class="paragraph">
<p>This section includes information about available languages, including
<a href="#end_user_translations">End User Translations</a> and
<a href="#admin_translations">Administrator Translations</a>.</p>
</div>
<div class="sect3">
<h4 id="end_user_translations">End User Translations</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Component</strong></th>
<th class="tableblock halign-left valign-top"><strong>Category</strong></th>
<th class="tableblock halign-left valign-top"><strong>Languages</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Web Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application/UI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arabic, Basque (EU), Catalan (EU), Chinese (Simplified PRC, Traditional HK, Taiwan),
Danish, Dutch, English (AU, UK, US), French, French Canadian, German,
Hindi, Hungarian, Italian, Japanese, Korean, Malay, Norwegian, Polish, Portuguese
(Brazil), Portuguese (Portugal), Romanian, Russian, Spanish, Swedish,
Thai, Turkish, Ukrainian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Web Client - Online Help (HTML)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dutch,
English, Spanish, French, Italian, Japanese, German, Portuguese
(Brazil), Chinese (Simplified PRC and Traditional HK), Russian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Web Client - End User Guide (PDF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Connector for Microsoft Outlook</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installer + Application/UI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arabic, Basque (EU), Catalan (EU), Chinese (Simplified PRC, Traditional HK, Taiwan),
Danish, Dutch, English (AU, UK, US), French, French Canadian, German,
Hindi, Hungarian, Italian, Japanese, Korean, Malay, Norwegian, Polish, Portuguese
(Brazil), Portuguese (Portugal), Romanian, Russian, Spanish, Swedish,
Thai, Turkish, Ukrainian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Connector for Microsoft Outlook - End User Guide (PDF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature
Documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="admin_translations">Administrator Translations</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Component</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Category</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Languages</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Admin Console</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arabic, Basque (EU), Catalan (EU), Chinese (Simplified PRC, Traditional HK, Taiwan),
Danish, Dutch, English (AU, UK, US), French, French Canadian, German,
Hindi, Hungarian, Italian, Japanese, Korean, Malay, Norwegian, Polish, Portuguese
(Brazil), Portuguese (Portugal), Romanian, Russian, Spanish, Swedish,
Thai, Turkish, Ukrainian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Admin Console Online Help (HTML)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feature Documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Documentation" Install + Upgrade / Admin Manual / Migration / Import /
Release Notes / System Requirements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Guides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Connector for Microsoft Outlook - Admin Guide (PDF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Install + Configuration Guide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note: To find SSH client software, go to Download.com at
<a href="http://www.download.com/" class="bare">http://www.download.com/</a> and search for SSH. The list displays software
that can be purchased or downloaded for free. An example of a free SSH
client software is PuTTY, a software implementation of SSH for Win32 and
Unix platforms. To download a copy go to <a href="http://putty.nl/">http://putty.nl</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Zimbra-Network-NG-Modules-first-steps-guide">Zimbra Network NG Modules: First Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guides contains all information needed in order to switch to the new Zimbra Network NG modules from their legacy counterparts after upgrading to Zimbra 8.8.</p>
</div>
<div class="sect2">
<h3 id="backup-ng">Switching to Backup NG</h3>
<div class="paragraph">
<p>Switching to the new Backup NG is a simple process that will initialize the
new backup system on a dedicated path.
Until the initialization is completed, the old backup engine will be active.
Old backup files will not be removed and the old backup and restore tools are
still available via the usual CLI commands.</p>
</div>
<div class="sect3">
<h4 id="backup-path-limitations">Backup Path Limitations</h4>
<div class="paragraph">
<p>In order to hold Backup NG data, a storage must comply to the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The storage must have a mountpoint on the system.</p>
<div class="ulist">
<ul>
<li>
<p>The "zimbra" user must of course have r/w permission on the path.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The data must be stored on a case-sensitive filesystem.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other than this, there are no hard limitations.</p>
</div>
</div>
<div class="sect3">
<h4 id="backup-ng-initialisation">Backup NG Initialization</h4>
<div class="paragraph">
<p>Before initializing the Backup NG module, make sure you have enough space on
the storage you wish to store the backup in. The average size of the backup is
50-70% of the nominal total quota of all mailboxes.</p>
</div>
<div class="paragraph">
<p>To initialize the Backup NG module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access the Zimbra Administration Console.</p>
</li>
<li>
<p>Enter the "Network Modules NG" section on the left menu.</p>
</li>
<li>
<p>Enter the "Backup" section.</p>
</li>
<li>
<p>Set the "Backup Path" to whatever directory you wish to store your backup into.</p>
</li>
<li>
<p>Click on the "Initialize" button</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mobile-ng">Switching to Mobile NG</h3>
<div class="paragraph">
<p>Switching to the new Mobile NG is a simple process that will activate the new
mobile handlers, deactivate the old ones and switch the synchronization control
over to Mobile NG from the legacy Zimbra Mobile.
Until the initialization is completed, the old mobile engine will be active.</p>
</div>
<div class="sect3">
<h4 id="what-happens-after-the-switch">What happens after the switch</h4>
<div class="paragraph">
<p>After switching to Mobile NG, all existing syncstates will be invalidated,
and all connected devices will automatically re-synchronize all of their data
through the new engine.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Since the switch will force all connected devices to re-synchonize all
of their data, make sure to alert your users beforehand to make sure that they have
wifi coverage or enough traffic on their mobile data plans.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The switch is completely transparent to end users, and no user interaction
 will be prompted or required.</p>
</div>
</div>
<div class="sect3">
<h4 id="mobile-ng-initialisation">Mobile NG Initialization</h4>
<div class="paragraph">
<p>To initialize the Mobile NG module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access the Zimbra Administration Console.</p>
</li>
<li>
<p>Enter the "Network Modules NG" section on the left menu.</p>
</li>
<li>
<p>Enter the "Mobile" section.</p>
</li>
<li>
<p>Click on the "Activate" button.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hsm-ng">Switching to HSM NG</h3>
<div class="paragraph">
<p>The HSM NG module will become active as soon as the upgrade to Zimbra 8.8 is
completed, and does not require any interaction.</p>
</div>
<div class="paragraph">
<p>Any old HSM policy, volume and volume configuration will be maintained.</p>
</div>
</div>
<div class="sect2">
<h3 id="admin-ng">Switching to Admin NG</h3>
<div class="paragraph">
<p>Switching to the new Admin NG module is a simple process that will migrate any
relevant ACL information to the module&#8217;s own configuration manager, clearing
existing ACLs and ACEs from the system.</p>
</div>
<div class="paragraph">
<p>The Admin NG module is significantly different than the old Delegated Administration engine.
Please make sure to read the product&#8217;s documentation and to only migrate to Admin NG if its feature set
meets your needs.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Admin Migration is a one way only process. Once Admin NG is initialized
it&#8217;s not possible to go back to the old engine, so if you have customized or complex
ACLs/ACEs consider whether switching or not carefully.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="admin-ng-initialisation">Admin NG Initialization</h4>
<div class="paragraph">
<p>To initialize the Admin NG module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access the Zimbra Administration Console.</p>
</li>
<li>
<p>Enter the "Network Modules NG" section on the left menu.</p>
</li>
<li>
<p>Enter the "Admin" section.</p>
</li>
<li>
<p>Click on the "Migrate" button.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-09-12 13:30:35 CDT
</div>
</div>
</body>
</html>