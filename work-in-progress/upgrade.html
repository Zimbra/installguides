<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Zimbra Collaboration In-Development Upgrade Steps</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Zimbra Collaboration In-Development Upgrade Steps</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_before_you_upgrade">Before you upgrade</a>
<ul class="sectlevel2">
<li><a href="#_database_integrity_checking">Database Integrity Checking</a></li>
<li><a href="#_preparing_your_operating_system">Preparing your operating system</a>
<ul class="sectlevel3">
<li><a href="#_ubuntu_os">Ubuntu OS</a></li>
<li><a href="#_red_hat_enterprise_linux_centos_linux">Red Hat Enterprise Linux/CentOS Linux</a></li>
</ul>
</li>
<li><a href="#_license_activation">License Activation</a></li>
<li><a href="#_upgrading_ldap_replica_servers_or_multi_master_server">Upgrading LDAP Replica Servers or Multi-Master Server</a></li>
<li><a href="#_disable_sslv3_support">Disable SSLv3 Support</a></li>
<li><a href="#_update_default_proxy_ssl_ciphers_attribute">Update Default Proxy SSL Ciphers Attribute</a></li>
<li><a href="#_customizing_zco_installations">Customizing ZCO Installations</a></li>
</ul>
</li>
<li><a href="#_upgrade_instructions">Upgrade Instructions</a>
<ul class="sectlevel2">
<li><a href="#_download_the_software">Download the Software</a></li>
<li><a href="#_single_server_upgrade_steps">Single Server Upgrade Steps</a>
<ul class="sectlevel3">
<li><a href="#_process">Process</a></li>
</ul>
</li>
<li><a href="#_multi_server_environment_upgrade_steps">Multi-Server Environment Upgrade Steps</a>
<ul class="sectlevel3">
<li><a href="#_process_2">Process</a></li>
</ul>
</li>
<li><a href="#_using_lmdb_as_the_supported_back_end_for_on_disk_database_maps">Using LMDB as the Supported Back-end for On-disk Database Maps</a></li>
</ul>
</li>
<li><a href="#_after_the_upgrade_is_complete">After the Upgrade is Complete</a>
<ul class="sectlevel2">
<li><a href="#_ephemeral_data_migration">Ephemeral Data Migration</a></li>
</ul>
</li>
<li><a href="#_remove_current_version_and_perform_clean_install_of_zcs">Remove Current Version and Perform Clean Install of ZCS</a></li>
<li><a href="#_status_of_your_customization_after_upgrade">Status of Your Customization after Upgrade</a></li>
<li><a href="#_changes_to_customized_themes">Changes to Customized Themes</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_before_you_upgrade">Before you upgrade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following tasks might need to be performed before you
upgrade. After you review the tasks in this section, go to Upgrade
Instructions. Be sure to read the
<a href="https://wiki.zimbra.com/index.php?title=Zimbra_Releases/8.7.0">release note</a> information before upgrading.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="https://bugzilla.zimbra.com/show_bug.cgi?id=105056">Bug
105056</a>
noted a problem that can occur during a rolling upgrade if two
factor authentication (2FA) is enabled before all mailbox servers have
been upgraded to 8.7.  In particular, pre-8.7 mailbox servers are not
compatible with 2FA.</p>
</div>
<div class="paragraph">
<p>Accordingly, it is recommended that 2FA is not enabled until all
mailbox servers have been upgraded to 8.7.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_database_integrity_checking">Database Integrity Checking</h3>
<div class="paragraph">
<p>Some customers have had corrupted databases prior to upgrade, and the
upgrade has in some of those cases exacerbated the problem. In order
to detect any corrupted databases as early as possible, we have added
an optional step to check the MariaDB database with
<code>zmdbintegrityreport</code> prior to making any system changes. You are
prompted to decide if you would like to run the zmdbintegrityreport.</p>
</div>
<div class="paragraph">
<p><code>zmdbintegrityreport</code> can take minutes to an hour to run,
depending on your system size and disk bandwidth.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>zmdbintegrityreport</code> is run on a weekly basis from cron on all
zimbra-store nodes. Large sites can opt to disable this by setting
<code>zmlocalconfig -e zmdbintegrityreport_disabled=TRUE</code>. If
you choose to disable this, it is recommended that the integrity
reports be run by hand during the your normal maintenance windows and
prior to running any ZCS upgrades.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_preparing_your_operating_system">Preparing your operating system</h3>
<div class="paragraph">
<p>Before you upgrade ZCS, Zimbra recommends that the operating system is
updated with the latest patches that have been tested with ZCS.</p>
</div>
<div class="sect3">
<h4 id="_ubuntu_os">Ubuntu OS</h4>
<div class="ulist">
<ul>
<li>
<p>Ubuntu 16.04 LTS Server Edition (64-bit)</p>
</li>
<li>
<p>Ubuntu 14.04 LTS Server Edition (64-bit)</p>
</li>
<li>
<p>Ubuntu 12.04.4 LTS Server Edition running the saucy (3.11) or later
kernel is required.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the original install was done with Ubuntu 12.04.2 or earlier,
manual intervention is required to switch to the saucy (3.11) or later
kernel series. See <a href="https://wiki.ubuntu.com/Kernel/LTSEnablementStack" class="bare">https://wiki.ubuntu.com/Kernel/LTSEnablementStack</a>
for further information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can find your current kernel version by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>uname -a</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>build@zre-ubuntu12-64:~$ uname -a
Linux zre-ubuntu12-64 3.11.0-17-generic #31~precise1-Ubuntu SMP Tue Feb 4
21:25:43 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_red_hat_enterprise_linux_centos_linux">Red Hat Enterprise Linux/CentOS Linux</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If running the RHEL linux distribution, you must have a current valid
license from RedHat.</p>
</li>
<li>
<p>The server must have a valid yum or apt-get configuration so that it
can reach the Zimbra package servers.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Red Hat® Enterprise Linux® 7, AS/ES (64-bit)</p>
</li>
<li>
<p>CentOS Linux® 7 (64-bit)</p>
</li>
<li>
<p>Red Hat Enterprise Linux 6, AS/ES (64-bit), patch level 4 or later is required</p>
</li>
<li>
<p>CentOS Linux 6 (64-bit), patch level 4 or later is required</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_license_activation">License Activation</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>At the beginning of an upgrade installation, the existing license is
validated as being current and qualifies for the upgrade. If your
license is expired, an error message displays and the upgrade cannot
be performed. Contact Zimbra Sales for a license renewal to continue
your upgrade.</p>
</li>
<li>
<p>An upgrade installation will not proceed without automatic
activation or a manually activated license file. License activations
are limited to five activations per license file. If you have
previously used all activations prior to upgrading your production
system, you must contact Zimbra Sales to enable additional license
activations.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All Network Edition installations require a valid license and license
activation. New installs will have a 10 day grace period from the
license issue date before requiring activation.</p>
</div>
<div class="paragraph">
<p>License activation is automatic during the install with systems that
have external access to the Zimbra license servers. A means of
creating manual activations will be provided for systems that do not
have external access to the Zimbra license servers. See the
<em>Zimbra Collaboration Administration Guide</em> for more information.</p>
</div>
<div class="paragraph">
<p>When upgrading, the way in which ZCO and archiving licensing is
enforced might have changed on the server if you are using an older
version of Zimbra Collaboration. Older licenses might have
<code>MAPIConnectorAccountsLimit</code> set to <code>0</code> or <code>ArchivingAccountsLimit</code> missing
in the license. Contact Zimbra Sales for an updated license file prior
to upgrading if you have licensed either of these features and your
current license does not properly reflect the correct number.</p>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_ldap_replica_servers_or_multi_master_server">Upgrading LDAP Replica Servers or Multi-Master Server</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These instructions apply to ZCS 8.0.0, 8.0.1, 8.0.2 to ZCS
8.0.4 and later.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have replica servers or are in multi-master mode, you have to
install the Zimbra <em>LDAP</em> schema specific to the release you are
upgrading to onto the replica servers or onto the multi-master server
before you upgrade to ZCS 8.0.4 and later.
See <a href="https://bugzilla.zimbra.com/show_bug.cgi?id=81048">Bug 81048</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the master <em>LDAP</em> server, perform a software installation only of
ZCS 8.0.4 and later.</p>
<div class="listingblock">
<div class="content">
<pre>./install.sh -s</pre>
</div>
</div>
</li>
<li>
<p>On each replica or additional master <em>LDAP</em> server in MMR mode, as
the <code>zimbra</code> user:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Stop the server via one of the following commands:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>ldap stop</code></p>
</li>
<li>
<p><code>zmcontrol stop</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Move the <code>zimbra</code> schema out of the way</p>
<div class="listingblock">
<div class="content">
<pre>cd /opt/zimbra/data/ldap/config/cn=config/cn=schema
mv cn={4}zimbra.ldif /opt/zimbra/data/ldap/cn={4}zimbra.ldif.dead</pre>
</div>
</div>
</li>
<li>
<p>Copy the schema from the master <em>LDAP</em> server.</p>
<div class="listingblock">
<div class="content">
<pre>scp root@&lt;master&gt;:/opt/zimbra/openldap/etc/openldap/schema/zimbra.ldif cn={4}zimbra.ldif</pre>
</div>
</div>
</li>
<li>
<p>Edit cn={4}zimbra.ldif to change the following two lines:</p>
<div class="listingblock">
<div class="content">
<pre>dn: cn=zimbra,cn=schema,cn=config     -------&gt;     dn: cn={4}zimbra
cn: zimbra                            -------&gt;     cn: {4}zimbra</pre>
</div>
</div>
</li>
<li>
<p>Start the server via one of the following commands:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>ldap start</code></p>
</li>
<li>
<p><code>zmcontrol start</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>On the master <em>LDAP</em> server run:</p>
<div class="listingblock">
<div class="content">
<pre>/opt/zimbra/libexec/zmsetup.pl</pre>
</div>
</div>
</li>
<li>
<p>On each replica server run:</p>
<div class="listingblock">
<div class="content">
<pre> ./install.sh</pre>
</div>
</div>
<div class="paragraph">
<p>To continue the upgrade, see <a href="#_multi_server_environment_upgrade_steps">Multi-Server Environment Upgrade Steps</a>.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_disable_sslv3_support">Disable SSLv3 Support</h3>
<div class="paragraph">
<p>If upgrading to ZCS 8.7.0, you need to completely disable SSLv3
support after the upgrade. Disabling SSLv3 is recommended as a result
of the SSLv3 vulnerability described in
<a href="https://www.us-cert.gov/ncas/alerts/TA14-290A">Alert (TA14-290A)</a>.</p>
</div>
<div class="paragraph">
<p>SSLv3 support has been deprecated by default in 8.6.0, although when
upgrading from previous versions of ZCS, some protocols might still be
enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>New keys created in ZCS 8.7.0 (or later) have SSLv3 disabled by default.</p>
</li>
<li>
<p>Pre-existing keys from earlier versions of ZCS will still have SSLv3 enabled.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Follow the steps in the Zimbra wiki article
<a href="https://wiki.zimbra.com/wiki/How_to_disable_SSLv3">How to Disable
SSLv3</a> to disable SSLv3 after upgrading to ZCS 8.7.0.</p>
</div>
</div>
<div class="sect2">
<h3 id="_update_default_proxy_ssl_ciphers_attribute">Update Default Proxy SSL Ciphers Attribute</h3>
<div class="paragraph">
<p>Whenever upgrading, it is recommended that you check the values of the
following attributes (<code>zmprov gcf &lt;attr&gt;</code>) and compare them
with the current default values (<code>zmprov desc -a &lt;attr&gt;</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zimbraReverseProxySSLCiphers
zimbraReverseProxySSLProtocols
zimbraSSLExcludeCipherSuites
zimbraMailboxdSSLProtocols</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you have not performed any recent hardening of your settings,
your config should already match the ZCS default; and no action would
be required.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, it is recommended to make the following changes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove the following from <code>zimbraReverseProxySSLCiphers</code>:</p>
<div class="listingblock">
<div class="content">
<pre>ECDHE-RSA-RC4-SHA
ECDHE-ECDSA-RC4-SHA
RC4-SHA</pre>
</div>
</div>
</li>
<li>
<p>Add the following to <code>zimbraReverseProxySSLCiphers</code>:</p>
<div class="listingblock">
<div class="content">
<pre>!RC4</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="https://wiki.zimbra.com/wiki/Cipher_suites" class="bare">https://wiki.zimbra.com/wiki/Cipher_suites</a> for the most
current information on cipher suite configuration.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_zco_installations">Customizing ZCO Installations</h3>
<div class="paragraph">
<p>Administrators who want to customize the <em>ZCO</em> installation MSI should
use the unsigned version of the MSI
(<code>ZimbraConnectorOLK_n.n.n.nnnn_xnn-unsigned.msi</code>), available in the
Zimbra download directory. The modified MSI should then replace the
standard signed MSI (<code>ZimbraConnectorOLK_n.n.n.nnnn_xnn.msi</code>) in order
to be available to end users from <code>/downloads/index.html</code> and the <em>ZCO</em>
auto-upgrade process. (<a href="https://bugzilla.zimbra.com/show_bug.cgi?id=85067">Bug 85067</a>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrade_instructions">Upgrade Instructions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_download_the_software">Download the Software</h3>
<div class="paragraph">
<p>For Network Edition, go to
<a href="http://www.zimbra.com/downloads/zimbra-collaboration" class="bare">http://www.zimbra.com/downloads/zimbra-collaboration</a> to access the
software.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Before you begin the upgrade, make sure you have a good backup for
all users!</p>
</li>
<li>
<p>Database reloads are performed on 7.x to any 8.x upgrade.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you run the install script, if ZCS is already installed, you will
be asked if you want to upgrade. Follow the instructions in this
release note to perform the upgrade. For additional information, refer
to the installation guide.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Zimbra recommends that an install or upgrade session be run with a
UNIX command such as <code>screen</code> to help prevent an install or upgrade
session from terminating before it is completed. This is important
when the upgrade includes restoring a configuration that has a large
number of accounts.</p>
</div>
<div class="paragraph">
<p>Example command usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>screen ./install.sh</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_single_server_upgrade_steps">Single Server Upgrade Steps</h3>
<div class="paragraph">
<p>You do not need to stop the services before upgrading. The upgrade
process automatically stops and starts the services as required for
the upgrade.</p>
</div>
<div class="sect3">
<h4 id="_process">Process</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as <code>root</code> to the Zimbra server and <code>cd</code> to the
directory where the ZCS Network Edition archive tar file is saved.
For example, <code>cd /var/tmp</code>. Then type the following commands:</p>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Unpack the file</p>
</div>
<div class="listingblock">
<div class="content">
<pre>tar xzvf zcs.tgz</pre>
</div>
</div>
<div class="paragraph">
<p>Change to the correct directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd &lt;expanded-directory&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Begin the upgrade installation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>./install.sh</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The upgrade script checks if <code>proxy</code> and <code>memcached</code> are
present. If both are found, the upgrade will proceed. If either are
missing then the upgrade will abort and alert.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>From 8.7.0 onwards proxy and memcached are required.</p>
</li>
<li>
<p>See <a href="https://wiki.zimbra.com/wiki/Enabling_Zimbra_Proxy_and_memcached#Using_existing_servers">Enabling Zimbra Proxy and memcached</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The Zimbra software agreement is displayed. Read this software
license agreement and type <code>Y</code>.</p>
</li>
<li>
<p>When <code>Use Zimbra&#8217;s packaging server [Y]</code> is displayed, press <code>enter</code>
to continue. Your system will be configured to add the Zimbra
packaging repository for '<em>yum'</em> or <em>apt-get</em> so it can install the
Zimbra third party packages.</p>
</li>
<li>
<p>When <code>Do you wish to upgrade? [Y]</code> is displayed, press <code>enter</code> to
continue. The upgrade packages are unpacked.</p>
</li>
<li>
<p>The packages are listed. The installer also lists packages that are
not installed. If you want to install the packages at this time, type
<code>Y</code>; otherwise press <code>enter</code>. The upgrade checks that there is enough
space to perform the upgrade. If there is not enough space, the
upgrade stops.</p>
</li>
<li>
<p>When <code>The system will be modified. Continue? [N]</code> is displayed, type
<code>Y</code> and press <code>enter</code>. The Zimbra server is stopped, and the older
packages are removed. The upgrade process verifies which version of
ZCS is being run and proceeds to upgrade the services, restores the
existing configuration files, and restarts the server. If you have a
configuration with a large number of accounts created, this can take a
while.</p>
</li>
<li>
<p>If you have not set the time zone, you will be asked to set it. This
sets the time zone in the default COS. The time zone that should be
entered is the time zone that the majority of users in the COS will be
located in.</p>
</li>
<li>
<p>When Configuration complete, press <code>enter</code>.</p>
</li>
<li>
<p>After all <em>MTA</em> nodes are upgraded to Zimbra Collaboration
In-Development,
the following commands may be run to fix the default globalconfig
values, if necessary.</p>
<div class="listingblock">
<div class="content">
<pre>zmprov mcf zimbraMtaCommandDirectory /opt/zimbra/common/sbin
zmprov mcf zimbraMtaDaemonDirectory /opt/zimbra/common/libexec
zmprov mcf zimbraMtaMailqPath /opt/zimbra/common/sbin/mailq
zmprov mcf zimbraMtaManpageDirectory /opt/zimbra/common/share/man
zmprov mcf zimbraMtaNewaliasesPath /opt/zimbra/common/sbin/newaliases
zmprov mcf zimbraMtaSendmailPath /opt/zimbra/common/sbin/sendmail</pre>
</div>
</div>
</li>
<li>
<p><a href="https://bugzilla.zimbra.com/show_bug.cgi?id=104158">DSPAM is not
longer shipped</a> starting <em>Zimbra Collaboration 8.7</em>. Please enter the
following commands to disable it.</p>
<div class="listingblock">
<div class="content">
<pre>zmprov ms `zmhostname` zimbraAmavisDSPAMEnabled FALSE
zmlocalconfig -e amavis_dspam_enabled=false
zmamavisdctl restart</pre>
</div>
</div>
</li>
<li>
<p>The upgrade is complete. It is recommended that you perform a full
backup after performing a major upgrade, due to database schema
changes.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multi_server_environment_upgrade_steps">Multi-Server Environment Upgrade Steps</h3>
<div class="paragraph">
<p>Upgrade the servers in the following order. Update each server one at
a time, following the instructions under <a href="#_process_2">Process</a> below.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>LDAP</em> master server. The <em>LDAP</em> master servers must all be upgraded
before proceeding, and they must be running as you upgrade the other
servers.</p>
</li>
<li>
<p><em>LDAP</em> replicas</p>
</li>
<li>
<p><em>MTA</em> servers - see <a href="#_using_lmdb_as_the_supported_back_end_for_on_disk_database_maps">Using LMDB as the Supported Back-end for On-disk Database Maps</a>.</p>
</li>
<li>
<p>Proxy servers</p>
</li>
<li>
<p>Mailstore servers</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_process_2">Process</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in as <code>root</code> to the Zimbra server and <code>cd</code> to the
directory where the ZCS Network Edition archive tar file is saved.
For example, <code>cd /var/tmp</code>. Then type the following commands:</p>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Unpack the file</p>
</div>
<div class="listingblock">
<div class="content">
<pre>tar xzvf zcs.tgz</pre>
</div>
</div>
<div class="paragraph">
<p>Change to the correct directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd &lt;expanded-directory&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Begin the upgrade installation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>./install.sh</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The upgrade script checks if <code>proxy</code> and <code>memcached</code> are
present. If both are found, the upgrade will proceed. If either are
missing then the upgrade will abort and alert.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>From 8.7.0 onwards proxy and memcached are required.</p>
</li>
<li>
<p>See <a href="https://wiki.zimbra.com/wiki/Enabling_Zimbra_Proxy_and_memcached#Using_existing_servers">Enabling Zimbra Proxy and memcached</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The Zimbra software agreement is displayed. Read this software
license agreement and type <code>Y</code>.</p>
</li>
<li>
<p>When <code>Use Zimbra&#8217;s packaging server [Y]</code> is displayed, press <code>enter</code>
to continue. Your system will be configured to add the Zimbra
packaging repository for '<em>yum'</em> or <em>apt-get</em> so it can install the
Zimbra third party packages.</p>
</li>
<li>
<p>When <code>Do you wish to upgrade? [Y]</code> is displayed, press <code>enter</code> to
continue. The upgrade packages are unpacked.</p>
</li>
<li>
<p>The packages are listed. The installer also lists packages that are
not installed. If you want to install the packages at this time, type
<code>Y</code>; otherwise press <code>enter</code>. The upgrade checks that there is enough
space to perform the upgrade. If there is not enough space, the
upgrade stops.</p>
</li>
<li>
<p>When <code>The system will be modified. Continue? [N]</code> is displayed, type
<code>Y</code> and press <code>enter</code>. The Zimbra server is stopped, and the older
packages are removed. The upgrade process verifies which version of
ZCS is being run and proceeds to upgrade the services, restores the
existing configuration files, and restarts the server. If you have a
configuration with a large number of accounts created, this can take a
while.</p>
</li>
<li>
<p>If you have not set the time zone, you will be asked to set it. This
sets the time zone in the default COS. The time zone that should be
entered is the time zone that the majority of users in the COS will be
located in.</p>
</li>
<li>
<p>When Configuration complete, press <code>enter</code>.</p>
</li>
<li>
<p>After all <em>MTA</em> nodes are upgraded to Zimbra Collaboration
In-Development,
the following commands may be run to fix the default globalconfig
values, if necessary.</p>
<div class="listingblock">
<div class="content">
<pre>zmprov mcf zimbraMtaCommandDirectory /opt/zimbra/common/sbin
zmprov mcf zimbraMtaDaemonDirectory /opt/zimbra/common/libexec
zmprov mcf zimbraMtaMailqPath /opt/zimbra/common/sbin/mailq
zmprov mcf zimbraMtaManpageDirectory /opt/zimbra/common/share/man
zmprov mcf zimbraMtaNewaliasesPath /opt/zimbra/common/sbin/newaliases
zmprov mcf zimbraMtaSendmailPath /opt/zimbra/common/sbin/sendmail</pre>
</div>
</div>
</li>
<li>
<p><a href="https://bugzilla.zimbra.com/show_bug.cgi?id=104158">DSPAM is not
longer shipped</a> starting <em>Zimbra Collaboration 8.7</em>. Please enter the
following commands to disable it.</p>
<div class="listingblock">
<div class="content">
<pre>zmprov ms `zmhostname` zimbraAmavisDSPAMEnabled FALSE
zmlocalconfig -e amavis_dspam_enabled=false
zmamavisdctl restart</pre>
</div>
</div>
</li>
<li>
<p>The upgrade is complete. It is recommended that you perform a full
backup after performing a major upgrade, due to database schema
changes.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_lmdb_as_the_supported_back_end_for_on_disk_database_maps">Using LMDB as the Supported Back-end for On-disk Database Maps</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Starting with ZCS 8.5 and later, <em>Postfix</em> is linked to <em>LMDB</em>, the same
back-end ZCS uses with <em>OpenLDAP</em>. Prior to ZCS 8.0, <em>Postfix</em> was linked
to <em>Berkeley DB</em>.</p>
</div>
<div class="paragraph">
<p>ZCS has not officially supported using any <em>Postfix</em> on-disk database
maps prior to ZCS 8.5. However, these have been used through custom
non-preserved modifications to the <code>postconf</code> configuration. These
modifications will be lost on upgrade.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To restore the modifications post-upgrade, the following steps need to
be performed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run postmap against the database input file to generate an LMDB
database.</p>
</li>
<li>
<p>It will be necessary to iterate through the postconf keys that have
<code>hash:/path/to/db</code> values and update them in LDAP to use
<code>lmdb:/path/to/db</code> values instead.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Many previously unsupported features that could be used with on-disk
database maps are now fully supported by ZCS. Check if your
customizations are correctly carried forward when
upgrading. See <a href="https://bugzilla.zimbra.com/show_bug.cgi?id=77586">Bug
77586</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_after_the_upgrade_is_complete">After the Upgrade is Complete</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you completed the upgrade, the following might need to be
addressed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Review <a href="https://wiki.zimbra.com/wiki/How_to_disable_SSLv3">How to disable SSLv3</a>.</p>
</li>
<li>
<p>Review <a href="https://wiki.zimbra.com/wiki/Cipher_suites">Cipher suites</a>.</p>
</li>
<li>
<p>During the upgrade process, Zimbra might make a binary backup of
existing databases when there are major structural changes occurring
to the database format for ease of downgrading. Administrators will
want to clean these up once they have confirmed a successful
upgrade. For <em>LDAP</em> servers, these backups are in
<code>/opt/zimbra/data/ldap</code>, and in the form of <code>&lt;dbname&gt;.prev.$$</code>
where <code>$$</code> is the process
ID of the upgrade script. See <a href="https://bugzilla.zimbra.com/show_bug.cgi?id=81167">Bug 81167</a>.</p>
</li>
<li>
<p>You should run <code>zmldapupgrade -b 66387</code> after upgrading.  The
<code>zimbraAllowFromAddress</code> attribute cannot be set for internal accounts
 or distribution lists. Running this script will change
 <code>zimbraAllowFromAddress</code> values to grants.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>This step was not included into the installer-driven upgrade due to
potentially long delay for sites that set <code>zimbraAllowFromAddress</code> on
many accounts.</p>
</li>
<li>
<p>The migration command reports how many accounts had the
<code>zimbraAllowFromAddress</code> attribute set and how many of
them needed migration. One way to verify all accounts got migrated
is to run the command again. The total won&#8217;t change, and the number
migrated should be 0. See
<a href="https://bugzilla.zimbra.com/show_bug.cgi?id=66387">Bug 66387</a> for
more information.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If your self-signed SSL certificates have expired, update them.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To check for expired certificates, run the following command as the
<code>zimbra</code> user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/opt/zimbra/libexec/zmcheckexpiredcerts -days 1 -verbose</pre>
</div>
</div>
<div class="paragraph">
<p>Zimbra Collaboration requires a valid self-signed or commercial SSL
certificate for communication between some components. The self-signed
certificates that are automatically created by the
Zimbra install have a default expiration.</p>
</div>
<div class="paragraph">
<p>If you have a Zimbra Collaboration installation that is over one year
old and are using self-signed certificates, your certificates will
need to be updated either prior to the upgrade or immediately
following the upgrade.</p>
</div>
<div class="paragraph">
<p>After you upgrade, the following commands run as the zimbra user will
regenerate the self-signed SSL certificates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo /opt/zimbra/bin/zmcertmgr createca -new
sudo /opt/zimbra/bin/zmcertmgr deployca
sudo /opt/zimbra/bin/zmcertmgr deploycrt self -new</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If you were using <code>zmlogger</code> prior to ZCS 8.0.7, it is
possible that numerous <code>rdd</code> files could be generated causing large
amounts of disk space to be used. ZCS 8.0.7 and later
contain a patch that prevents future additional growth of <code>rdd</code> files
on the logger server. To clean up existing <code>rdd</code> files, use the
following script to remove <code>rdd</code> files from your server.
See <a href="https://bugzilla.zimbra.com/show_bug.cgi?id=85222">Bug 85222</a>.</p>
<div class="listingblock">
<div class="content">
<pre>sudo su - zimbra
zmloggerctl stop
cd /opt/zimbra/logger/db/data

for nhostid in $(sqlite3 /opt/zimbra/logger/db/data/logger.sqlitedb 'select
id from hosts'); do for ID in $(sqlite3 logger.sqlitedb "select rrd_file, col_name_19 from rrds Where csv_file == 'imap.csv' and host_id == ${nhostid}" | egrep "__[0-9]+$" | cut -d'|' -f1 | sort -n | uniq); do mv rrds/${nhostid}-$ID.rrd /opt/zimbra/logger/db/data/wrong_rrds/; done ; done

for mon in {1..12}; do MON=$(LANG=en_US; date +%b -d 2013-${mon}-01); sqlite3 logger.sqlitedb "DELETE FROM rrds WHERE col_name_19 LIKE '${MON}_%'"; done

sqlite3 logger.sqlitedb "VACUUM;"

zmloggerctl start
rm -R /opt/zimbra/logger/db/data/wrong_rrds
rm /opt/zimbra/logger/db/data/logger.sqlitedb.backup</pre>
</div>
</div>
</li>
<li>
<p>If you have configured the following keys, you will need to replace
them as described here.</p>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The following keys are deprecated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>httpclient_client_connection_timeout
httpclient_connmgr_connection_timeout
httpclient_connmgr_idle_reaper_connection_timeout
httpclient_connmgr_idle_reaper_sleep_interval
httpclient_connmgr_keepalive_connections
httpclient_connmgr_max_host_connections
httpclient_connmgr_max_total_connections
httpclient_connmgr_so_timeout
httpclient_connmgr_tcp_nodelay</pre>
</div>
</div>
<div class="paragraph">
<p>They are replaced by the following keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>httpclient_internal_client_connection_timeout
httpclient_internal_connmgr_connection_timeout
httpclient_internal_connmgr_idle_reaper_connection_timeout
httpclient_internal_connmgr_idle_reaper_sleep_interval
httpclient_internal_connmgr_keepalive_connections
httpclient_internal_connmgr_max_host_connections
httpclient_internal_connmgr_max_total_connections
httpclient_internal_connmgr_so_timeout
httpclient_internal_connmgr_tcp_nodelay
httpclient_external_client_connection_timeout
httpclient_external_connmgr_connection_timeout
httpclient_external_connmgr_idle_reaper_connection_timeout
httpclient_external_connmgr_idle_reaper_sleep_interval
httpclient_external_connmgr_keepalive_connections
httpclient_external_connmgr_max_host_connections
httpclient_external_connmgr_max_total_connections
httpclient_external_connmgr_so_timeout
httpclient_external_connmgr_tcp_nodelay</pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_ephemeral_data_migration">Ephemeral Data Migration</h3>
<div class="paragraph">
<p>Versions of Zimbra prior to In-Development stored
<em>ephemeral data</em> in <em>LDAP</em>.  Examples of <em>ephemeral data</em> include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>zimbraAuthTokens</code></p>
</li>
<li>
<p><code>zimbraCsrfTokenData</code></p>
</li>
<li>
<p><code>zimbraLastLogonTimestamp</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Zimbra Collaboration version In-Development introduced the ability to
store <em>ephemeral data</em> in an external service such as
<a href="http://ssdb.io/">SSDB</a>. This is an optional feature; however, it
can improve <em>LDAP</em> performance and stability.</p>
</div>
<div class="paragraph">
<p>Please refer to the <em>Zimbra Collaboration Administration Guide</em> for more information.
Migration of <em>ephemeral data</em> out of <em>LDAP</em> and into <em>SSDB</em>  must be
performed after an install or upgrade has been completed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remove_current_version_and_perform_clean_install_of_zcs">Remove Current Version and Perform Clean Install of ZCS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you do not want to upgrade, but prefer to install Zimbra Collaboration
Network Edition as a new installation, when you run the
Zimbra Collaboration Network Edition install script, enter <code>N</code> when asked
<code>Do you wish to upgrade?</code></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
A warning displays asking if you want to delete all existing
users and mail. If you enter <code>Yes</code>, all users, mail, and
previous files are removed before proceeding with the new
installation. Refer to the installation guides for installation
instructions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status_of_your_customization_after_upgrade">Status of Your Customization after Upgrade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Upgrading to the newest release does not delete your accounts or
change your configuration.  Configuration settings stored in <em>LDAP</em> and
<em>localconfig</em> are preserved during upgrades. Any files installed by
Zimbra Collaboration might be deprecated and/or overwritten during
upgrades, removing any customizations. This includes customized
themes, logo branding changes, and crontab changes.  Only the core
Zimlets are enabled after the upgrade. Zimlets that you customized
and/or deployed are preserved during the upgrade but will be
disabled. As upgrading of customized Zimlets cannot be tested before
the release, Zimbra recommends that you verify that your customized
Zimlets work correctly before re-enabling them for your end-users
after the upgrade.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When upgrading to Zimbra Collaboration 8.5.x and later from a
previous major ZCS version, the upgrade step disables Zimlets that are
not the core Zimlets for ZCS in all COSs. If you have enabled other
Zimlets at the account level, you might need to manually disable these
Zimlets. See <a href="https://bugzilla.zimbra.com/show_bug.cgi?id=77836">Bug 77836</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All entries between the designated comments in the Zimbra
crontab file are overwritten with new defaults upon
upgrade. Customized backup schedules stored in the Zimbra crontab and
customizations to the crontab entry outside the designated comments
are preserved.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changes_to_customized_themes">Changes to Customized Themes</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Zimbra Collaboration 8.5.x and later, a new design for default skins was
implemented. Custom skins created for Zimbra 7.x might not
work as intended with Zimbra Collaboration 8.5.x and later. Depending on
what is in the skin, the issues might range from simple things such as
colors being used in the wrong places to larger issues like functional
components being hidden or placed in inaccessible areas of the
screen. The proper fix for this is to take an existing 8.5.x or later
skin, duplicate it, and update the skin to meet the same needs as the
old skin. See <a href="https://bugzilla.zimbra.com/show_bug.cgi?id=62523">Bug
62523</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-05-09 12:21:51 CDT
</div>
</div>
</body>
</html>